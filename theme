
//   const formik = useFormik({
//     // initialValues: {
//     //   fullName: "",
//     //   email: "",
//     //   mobileNo: "",
//     //   dob: "",
//     //   gender: "",
//     //   address: {
//     //     add1: "",
//     //     add2: "",
//     //     taluka: "",
//     //     dist: "",
//     //     state: "",
//     //     pincode: ""
//     //   },
//     //   highestQualification: "",
//     //   branches: "",
//     //   collegeName: "",
//     //   totalExperience: "",
//     //   courses: [],
//     //   password: "",
//     //   availableTiming: "",
//     //   linkedinProfile: "",
//     //   resume: null,
//     //   idProofTrainer: null,
//     //   profilePhotoTrainer: null,
//     // },
// initialValues: {
//   fullName: "",
//   email: "",
//   mobileNo: "",
//   dob: "",
//   gender: "",
//   title: "",
//   summary: "",
//   certifications: [],
//   achievements: [],
//   highestQualification: "",
//   collegeName: "",
//   totalExperience: "",
//   courses: [],
//   password: "",
//   availableTiming: "",
//   customBatchDays: [],
//   linkedinProfile: "",
//   resume: null,
//   idProofTrainer: null,
//   profilePhotoTrainer: null,
//   address: {
//     add1: "",
//     add2: "",
//     taluka: "",
//     dist: "",
//     state: "",
//     pincode: ""
//   },
// },

    
//   validationSchema: Yup.object({
//   // fullName: Yup.string().required("Full name is required"),
//   // email: Yup.string().email("Invalid email").required("Email is required"),
//   // mobileNo: Yup.string().required("Mobile number is required"),
//   // dob: Yup.date().required("Date of birth is required"),
//   // gender: Yup.string().required("Gender is required"),
//   // title: Yup.string().required("Title is required"),
//   // summary: Yup.string().required("Trainer summary is required"),
//   // highestQualification: Yup.string().required("Qualification is required"),
//   // collegeName: Yup.string().required("College name is required"),
//   // totalExperience: Yup.number().required("Experience is required"),
//   // courses: Yup.array().min(1, "Select at least one course"),
//   // password: Yup.string().min(6).required("Password is required"),
//   // availableTiming: Yup.string().required("Select availability"),
//   // linkedinProfile: Yup.string().url("Invalid URL").nullable(),
//   // resume: Yup.mixed().required("Resume is required"),
//   // idProofTrainer: Yup.mixed().nullable(),
//   // profilePhotoTrainer: Yup.mixed().nullable(),

//   // address: Yup.object({
//   //   add1: Yup.string().required("Address Line 1 is required"),
//   //   add2: Yup.string(),
//   //   taluka: Yup.string().required("Taluka is required"),
//   //   dist: Yup.string().required("District is required"),
//   //   state: Yup.string().required("State is required"),
//   //   pincode: Yup.string().required("Pincode is required"),
//   // }),
// }),

//     // onSubmit: async (values) => {
//     //   const formData = new FormData();
//     //   Object.entries(values).forEach(([key, value]) => {
//     //     if (key === "address") {
//     //       formData.append("address", JSON.stringify(value));
//     //     } else if (
//     //       key === "resume" ||
//     //       key === "idProofTrainer" ||
//     //       key === "profilePhotoTrainer"
//     //     ) {
//     //       if (value) formData.append(key, value);
//     //     } else {
//     //       formData.append(key, value);
//     //     }
//     //   });

//     //   try {
//     //     const res = await axios.post(`${BASE_URL}/api/trainer/register`, formData);
//     //     if (res.data.success) {
//     //       alert("Trainer registered successfully");
//     //       formik.resetForm();
//     //     }
//     //   } catch (err) {
//     //     console.error("Registration failed", err);
//     //   }
//     // },

//     //  onSubmit: async (values) => {
//     //   const formData = new FormData();
//     //   Object.entries(values).forEach(([key, value]) => {
//     //     if (key === "address") {
//     //       formData.append("address", JSON.stringify(value));
//     //     } else if (key === "subjectExperience" || key === "enrolledCourses") {
//     //       formData.append(key, JSON.stringify(value));
//     //     } else {
//     //       formData.append(key, value);
//     //     }
//     //   });

//     //   try {
//     //     const response = await fetch(`${process.env.REACT_APP_BASE_URL}/api/trainer/register`, {
//     //       method: "POST",
//     //       body: formData,
//     //     });

//     //     const result = await response.json();
//     //     if (result.success) {
//     //       alert("Trainer registered successfully!");
//     //     } else {
//     //       alert(result.message || "Something went wrong.");
//     //     }
//     //   } catch (err) {
//     //     console.error(err);
//     //     alert("Error submitting the form");
//     //   }
//     // },

// //     onSubmit: async (values) => {
// //   // ‚úÖ Replace 'custom' with joined days if selected
// //   const availableTiming =
// //     values.availableTiming === "custom"
// //       ? (values.customBatchDays || []).join("-")
// //       : values.availableTiming;

// //   const finalValues = {
// //     ...values,
// //     availableTiming, // ‚úÖ updated string value
// //   };

// //   // ‚ùå Remove helper field before sending
// //   delete finalValues.customBatchDays;

// //   // Optional warning
// //   if (finalValues.availableTiming === "custom") {
// //     console.warn("Custom availableTiming not replaced properly!");
// //   }

// //   // ‚úÖ Create FormData
// //   const formData = new FormData();
// //   Object.entries(finalValues).forEach(([key, value]) => {
// //     if (key === "address") {
// //       formData.append("address", JSON.stringify(value));
// //     } else if (
// //       key === "courses" 
// //       // ||
// //       // key === "enrolledCourses"
// //     ) {
// //       formData.append(key, JSON.stringify(value));
// //     } else {
// //       formData.append(key, value);
// //     }
// //   });

// //   try {
// //     // const response = await apiClient(
// //     //   `/api/trainer/register`,
// //     //   {
// //     //     method: "POST",
// //     //     body: formData,
// //     //   }
// //     // );

// //    const response= await axios.post(`${BASE_URL}/api/trainer/register`, formData, {
// //   headers: {
// //     "Content-Type": "multipart/form-data"
// //   }
// // });


// //     const result = await response.json();
// //     if (result.success) {
// //       alert("Trainer registered successfully!");
// //     } else {
// //       alert(result.message || "Please Try Again!.");
// //     }
// //   } catch (err) {
// //     console.error(err);
// //     alert("Error submitting the form");
// //   }
// // }

// onSubmit: async (values, { resetForm, setSubmitting }) => {
//   const formData = new FormData();
//   const finalValues = { ...values };

//   // Convert custom days to string
//   if (finalValues.availableTiming === "custom") {
//     finalValues.availableTiming = (finalValues.customBatchDays || []).join("-");
//   }
//   delete finalValues.customBatchDays;

//   // Append all form values
//   for (let key in finalValues) {
//     const value = finalValues[key];

//     if (key === "address" && typeof value === "object" && value !== null) {
//       Object.entries(value).forEach(([k, v]) => {
//         formData.append(`address[${k}]`, v);
//       });
//     } else if (Array.isArray(value)) {
//       value.forEach((item) => formData.append(`${key}[]`, item));
//     } else if (value instanceof File) {
//       formData.append(key, value);
//     } else if (value !== undefined && value !== null) {
//       formData.append(key, value);
//     }
//   }

//   try {
//     const res = await axios.post(`${BASE_URL}/api/trainer/register`, formData, {
//       headers: {
//         "Content-Type": "multipart/form-data",
//       },
//     });

//     if (res.data.success) {
//       alert("Trainer registered successfully!");
//       resetForm();
//     } else {
//       alert(res.data.message || "Please try again.");
//     }
//   } catch (err) {
//     console.error("‚ùå Error submitting form", err);
//     alert("Error submitting the form");
//   } finally {
//     setSubmitting(false);
//   }
// }


//   });

  

  // return (
  //   <form onSubmit={formik.handleSubmit} className="space-y-4">
  //     <InputField label="Full Name" name="fullName" formik={formik} />
  //     <InputField label="Email" name="email" formik={formik} />
  //     <InputField label="Mobile No" name="mobileNo" formik={formik} />
  //     <InputField label="Date of Birth" name="dob" type="date" formik={formik} />
  //     <InputField label="Gender" name="gender" formik={formik} />

  //     {/* Address Fields */}
  //     <InputField label="Address Line 1" name="address.add1" formik={formik} />
  //     <InputField label="Address Line 2" name="address.add2" formik={formik} />
  //     <InputField label="Taluka" name="address.taluka" formik={formik} />
  //     <InputField label="District" name="address.dist" formik={formik} />
  //     <InputField label="State" name="address.state" formik={formik} />
  //     <InputField label="Pincode" name="address.pincode" formik={formik} />

  //     <InputField label="Highest Qualification" name="highestQualification" formik={formik} />
  //     <InputField label="Specializations" name="specializations" formik={formik} />
  //     <InputField label="College Name" name="collegeName" formik={formik} />
  //     <InputField label="Total Experience" name="totalExperience" formik={formik} />
  //     <InputField label="Subject Experience" name="subjectExperience" formik={formik} />
  //     <InputField label="Password" name="password" type="password" formik={formik} />
  //     <InputField label="Available Timing" name="availableTiming" formik={formik} />
  //     <InputField label="LinkedIn Profile" name="linkedinProfile" formik={formik} />

  //     {/* File Inputs */}
  //     <div>
  //       <label>Resume</label>
  //       <input
  //         type="file"
  //         name="resume"
  //         onChange={(e) => formik.setFieldValue("resume", e.currentTarget.files[0])}
  //       />
  //     </div>
  //     <div>
  //       <label>ID Proof</label>
  //       <input
  //         type="file"
  //         name="idProofTrainer"
  //         onChange={(e) => formik.setFieldValue("idProofTrainer", e.currentTarget.files[0])}
  //       />
  //     </div>
  //     <div>
  //       <label>Profile Photo</label>
  //       <input
  //         type="file"
  //         name="profilePhotoTrainer"
  //         onChange={(e) => formik.setFieldValue("profilePhotoTrainer", e.currentTarget.files[0])}
  //       />
  //     </div>

  //     <button type="submit">Register Trainer</button>
  //   </form>
  // ); 

//   trainer registration form 


// import { useState, useEffect, useRef } from "react";
// import { useLocation, useParams, useNavigate } from "react-router-dom";
// import {
//   FaPlay,
//   FaPause,
//   FaVolumeUp,
//   FaVolumeMute,
//   FaExpand,
//   FaCompress,
//   FaStepBackward,
//   FaStepForward,
//   FaArrowLeft,
//   FaBook,
//   FaClock,
//   FaDownload,
//   FaHeart,
//   FaRegHeart,
//   FaShare,
//   FaList,
//   FaCog,
//   FaCheck,
// } from "react-icons/fa";
// import { DIR } from "../../utils/constants";
// import { useDispatch, useSelector } from "react-redux";
// import { setSelectedVideo } from "../../features/videoSlice";

// const VideoPlayerPage = () => {
//   const location = useLocation();
//   const dispatch = useDispatch();
//   const navigate = useNavigate();
//   const { courseId, videoId } = useParams();
//   const videoRef = useRef(null);

//   const { selectedVideo, courseTitle, chapterTitle, allLectures } = useSelector(
//     (state) => state.videos
//   );

//   // // Get data passed via navigate state
//   // const { video, courseTitle, chapterTitle, courseVideos = [] } = location.state || {};

//   const [isPlaying, setIsPlaying] = useState(false);
//   const [currentTime, setCurrentTime] = useState(0);
//   const [duration, setDuration] = useState(0);
//   const [volume, setVolume] = useState(1);
//   const [isMuted, setIsMuted] = useState(false);
//   const [isFullscreen, setIsFullscreen] = useState(false);
//   const [playbackRate, setPlaybackRate] = useState(1);
//   const [showControls, setShowControls] = useState(true);
//   const [isLiked, setIsLiked] = useState(false);
//   const [showPlaylist, setShowPlaylist] = useState(false);
//   const [buffered, setBuffered] = useState(0);

//   // Simulate related videos
//   // const relatedVideos = courseVideos.length > 0 ? courseVideos : [
//   //   { _id: '1', title: 'Introduction to React', duration: '15:30', completed: true },
//   //   { _id: '2', title: 'Components and Props', duration: '22:45', completed: false },
//   //   { _id: '3', title: 'State and Lifecycle', duration: '18:20', completed: false },
//   //   { _id: '4', title: 'Hooks Deep Dive', duration: '25:10', completed: false },
//   // ];

//   useEffect(() => {
//     if (!selectedVideo) {
//       console.warn("No selected video in Redux. Optionally fetch from API.");
//       // Optional: fetch lecture list and match videoId
//     }
//   }, [selectedVideo]);

//   //   useEffect(() => {
//   //   if (!selectedVideo && allLectures.length > 0) {
//   //     const fallbackVideo = allLectures.find(v => v._id === videoId);
//   //     if (fallbackVideo) {
//   //       dispatch(setSelectedVideo(fallbackVideo));
//   //     }
//   //   }
//   // }, [selectedVideo, allLectures]);

//   useEffect(() => {
//     if (videoId && allLectures.length > 0) {
//       const newVideo = allLectures.find((v) => v._id === videoId);
//       if (newVideo && newVideo._id !== selectedVideo?._id) {
//         // Reset player state
//         if (videoRef.current) {
//           videoRef.current.pause();
//           videoRef.current.currentTime = 0;
//         }
//         setCurrentTime(0);
//         setIsPlaying(false);

//         // Update Redux
//         dispatch(setSelectedVideo(newVideo));
//       }
//     }
//   }, [videoId, allLectures]);

//   const video = selectedVideo;
//   const relatedVideos = allLectures;
//   // const relatedVideos = Array.isArray(courseVideos) && courseVideos.length > 0 ? courseVideos : [];

//   useEffect(() => {
//     if (!video) {
//       console.warn(
//         "No video data found in state. Fetching from API might be needed."
//       );
//     }
//   }, [video]);

//   useEffect(() => {
//     const videoElement = videoRef.current;
//     if (!videoElement) return;

//     const updateTime = () => setCurrentTime(videoElement.currentTime);
//     const updateDuration = () => setDuration(videoElement.duration);
//     const updateBuffered = () => {
//       if (videoElement.buffered.length > 0) {
//         setBuffered(videoElement.buffered.end(0));
//       }
//     };

//     videoElement.addEventListener("timeupdate", updateTime);
//     videoElement.addEventListener("loadedmetadata", updateDuration);
//     videoElement.addEventListener("progress", updateBuffered);
//     videoElement.addEventListener("ended", () => setIsPlaying(false));

//     return () => {
//       videoElement.removeEventListener("timeupdate", updateTime);
//       videoElement.removeEventListener("loadedmetadata", updateDuration);
//       videoElement.removeEventListener("progress", updateBuffered);
//       videoElement.removeEventListener("ended", () => setIsPlaying(false));
//     };
//   }, []);

//   const togglePlay = () => {
//     if (videoRef.current) {
//       if (isPlaying) {
//         videoRef.current.pause();
//       } else {
//         videoRef.current.play();
//       }
//       setIsPlaying(!isPlaying);
//     }
//   };

//   const handleSeek = (e) => {
//     const seekTime =
//       (e.nativeEvent.offsetX / e.currentTarget.offsetWidth) * duration;
//     if (videoRef.current) {
//       videoRef.current.currentTime = seekTime;
//       setCurrentTime(seekTime);
//     }
//   };

//   const handleVolumeChange = (e) => {
//     const newVolume = parseFloat(e.target.value);
//     setVolume(newVolume);
//     if (videoRef.current) {
//       videoRef.current.volume = newVolume;
//       setIsMuted(newVolume === 0);
//     }
//   };

//   const toggleMute = () => {
//     if (videoRef.current) {
//       videoRef.current.muted = !isMuted;
//       setIsMuted(!isMuted);
//     }
//   };

//   const toggleFullscreen = () => {
//     if (!document.fullscreenElement) {
//       videoRef.current.requestFullscreen().catch((err) => {
//         console.log(`Error attempting to enable fullscreen: ${err.message}`);
//       });
//       setIsFullscreen(true);
//     } else {
//       document.exitFullscreen();
//       setIsFullscreen(false);
//     }
//   };

//   const formatTime = (seconds) => {
//     const mins = Math.floor(seconds / 60);
//     const secs = Math.floor(seconds % 60);
//     return `${mins}:${secs < 10 ? "0" : ""}${secs}`;
//   };

//   const handlePlaybackRateChange = (rate) => {
//     setPlaybackRate(rate);
//     if (videoRef.current) {
//       videoRef.current.playbackRate = rate;
//     }
//   };

//   const skip = (seconds) => {
//     if (videoRef.current) {
//       videoRef.current.currentTime += seconds;
//     }
//   };

//   console.log(
//     "Video URL:",
//     `${DIR.LECTURE_CONTENT}${selectedVideo.contentUrl}`
//   );
//   console.log("selectedVideo:", selectedVideo);

//   if (!video) {
//     return (
//       <div className="min-h-screen bg-gradient-to-br from-gray-900 to-black flex items-center justify-center">
//         <div className="text-center text-white">
//           <div className="animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-blue-500 mx-auto mb-4"></div>
//           <p className="text-xl">Loading video content...</p>
//         </div>
//       </div>
//     );
//   }

//   return (
//     <div className="min-h-screen bg-gradient-to-br from-gray-900 to-black text-white">
//       {/* Header */}
//       <header className="bg-black/80 backdrop-blur-lg border-b border-gray-800 sticky top-0 z-50">
//         <div className="max-w-7xl mx-auto px-4 py-3">
//           <div className="flex items-center justify-between">
//             <div className="flex items-center gap-4">
//               <button
//                 onClick={() => navigate(-1)}
//                 className="flex items-center gap-2 text-gray-300 hover:text-white transition-colors p-2 rounded-lg hover:bg-gray-800"
//               >
//                 <FaArrowLeft className="w-5 h-5" />
//                 <span className="hidden sm:block">Back to Course</span>
//               </button>
//               <div className="h-6 w-px bg-gray-700"></div>
//               <div>
//                 <h1 className="text-lg font-semibold line-clamp-1">
//                   {courseTitle}
//                 </h1>
//                 <p className="text-sm text-gray-400">{chapterTitle}</p>
//               </div>
//             </div>

//             <div className="flex items-center gap-3">
//               <button
//                 onClick={() => setIsLiked(!isLiked)}
//                 className="p-2 text-gray-400 hover:text-red-500 transition-colors"
//               >
//                 {isLiked ? (
//                   <FaHeart className="w-5 h-5 text-red-500" />
//                 ) : (
//                   <FaRegHeart className="w-5 h-5" />
//                 )}
//               </button>
//               <button className="p-2 text-gray-400 hover:text-white transition-colors">
//                 <FaShare className="w-5 h-5" />
//               </button>
//               <button className="p-2 text-gray-400 hover:text-white transition-colors">
//                 <FaDownload className="w-5 h-5" />
//               </button>
//             </div>
//           </div>
//         </div>
//       </header>

//       <div className="max-w-7xl mx-auto px-4 py-6">
//         <div className="grid lg:grid-cols-4 gap-6">
//           {/* Main Video Player */}
//           <div className="lg:col-span-3">
//             <div
//               className="relative bg-black rounded-2xl overflow-hidden shadow-2xl group"
//               onMouseEnter={() => setShowControls(true)}
//               onMouseLeave={() => setShowControls(false)}
//             >
//               {/* Video Element */}
//               {selectedVideo?.contentUrl ? (
//                 <video
//                   ref={videoRef}
//                   className="w-full aspect-video"
//                   // src="https://www.w3schools.com/html/mov_bbb.mp4"

//                   src={`${DIR.LECTURE_CONTENT}${selectedVideo.contentUrl}`}
//                   onClick={togglePlay}
//                   controls
//                 />
//               ) : (
//                 <div className="text-red-500 p-4">
//                   Video source not available
//                 </div>
//               )}

//               {/* <video
//                 ref={videoRef}
//                 className="w-full aspect-video"
//                 src={`${DIR.LECTURE_CONTENT}${selectedVideo.contentUrl}`}
//                 onClick={togglePlay}
//                 controls
//               >
//                 Your browser does not support the video tag.
//               </video> */}

//               {/* Custom Controls */}
//               {showControls && (
//                 <div className="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/90 to-transparent p-4 transition-opacity duration-300">
//                   {/* Progress Bar */}
//                   <div
//                     className="w-full bg-gray-700 h-2 rounded-full mb-4 cursor-pointer relative"
//                     onClick={handleSeek}
//                   >
//                     <div
//                       className="absolute top-0 left-0 bg-gray-400 h-2 rounded-full"
//                       style={{ width: `${(buffered / duration) * 100}%` }}
//                     ></div>
//                     <div
//                       className="absolute top-0 left-0 bg-blue-500 h-2 rounded-full transition-all duration-100"
//                       style={{ width: `${(currentTime / duration) * 100}%` }}
//                     ></div>
//                     <div
//                       className="absolute w-4 h-4 bg-blue-500 rounded-full -top-1 transform -translate-x-2 shadow-lg"
//                       style={{ left: `${(currentTime / duration) * 100}%` }}
//                     ></div>
//                   </div>

//                   {/* Control Buttons */}
//                   <div className="flex items-center justify-between">
//                     <div className="flex items-center gap-4">
//                       <button
//                         onClick={togglePlay}
//                         className="p-2 bg-white/20 rounded-full hover:bg-white/30 transition-colors"
//                       >
//                         {isPlaying ? (
//                           <FaPause className="w-4 h-4" />
//                         ) : (
//                           <FaPlay className="w-4 h-4" />
//                         )}
//                       </button>

//                       <button
//                         onClick={() => skip(-10)}
//                         className="p-2 text-gray-300 hover:text-white transition-colors"
//                       >
//                         <FaStepBackward className="w-4 h-4" />
//                       </button>

//                       <button
//                         onClick={() => skip(10)}
//                         className="p-2 text-gray-300 hover:text-white transition-colors"
//                       >
//                         <FaStepForward className="w-4 h-4" />
//                       </button>

//                       <div className="flex items-center gap-2">
//                         <button
//                           onClick={toggleMute}
//                           className="p-2 text-gray-300 hover:text-white transition-colors"
//                         >
//                           {isMuted ? (
//                             <FaVolumeMute className="w-4 h-4" />
//                           ) : (
//                             <FaVolumeUp className="w-4 h-4" />
//                           )}
//                         </button>
//                         <input
//                           type="range"
//                           min="0"
//                           max="1"
//                           step="0.1"
//                           value={volume}
//                           onChange={handleVolumeChange}
//                           className="w-20 accent-blue-500"
//                         />
//                       </div>

//                       <div className="text-sm text-gray-300">
//                         {formatTime(currentTime)} / {formatTime(duration)}
//                       </div>
//                     </div>

//                     <div className="flex items-center gap-3">
//                       {/* Playback Speed */}
//                       <div className="relative group/speed">
//                         <button className="px-3 py-1 bg-white/20 rounded-lg text-sm hover:bg-white/30 transition-colors">
//                           {playbackRate}x
//                         </button>
//                         <div className="absolute bottom-full right-0 mb-2 bg-gray-800 rounded-lg p-2 shadow-xl opacity-0 invisible group-hover/speed:opacity-100 group-hover/speed:visible transition-all duration-200">
//                           {[0.5, 0.75, 1, 1.25, 1.5, 2].map((rate) => (
//                             <button
//                               key={rate}
//                               onClick={() => handlePlaybackRateChange(rate)}
//                               className={`block w-full px-3 py-1 text-sm rounded hover:bg-gray-700 ${
//                                 playbackRate === rate
//                                   ? "text-blue-400"
//                                   : "text-gray-300"
//                               }`}
//                             >
//                               {rate}x
//                             </button>
//                           ))}
//                         </div>
//                       </div>

//                       <button
//                         onClick={toggleFullscreen}
//                         className="p-2 text-gray-300 hover:text-white transition-colors"
//                       >
//                         {isFullscreen ? (
//                           <FaCompress className="w-4 h-4" />
//                         ) : (
//                           <FaExpand className="w-4 h-4" />
//                         )}
//                       </button>
//                     </div>
//                   </div>
//                 </div>
//               )}

//               {/* Play/Pause Overlay */}
//               {!isPlaying && (
//                 <div className="absolute inset-0 flex items-center justify-center bg-black/40">
//                   <button
//                     onClick={togglePlay}
//                     className="p-6 bg-white/20 rounded-full hover:bg-white/30 transition-all duration-300 transform hover:scale-110"
//                   >
//                     <FaPlay className="w-12 h-12 text-white" />
//                   </button>
//                 </div>
//               )}
//             </div>

//             {/* Video Info */}
//             <div className="mt-6 bg-gray-800/50 rounded-2xl p-6 backdrop-blur-sm">
//               <h1 className="text-3xl font-bold mb-4">{video.title}</h1>
//               <p className="text-gray-300 text-lg leading-relaxed mb-6">
//                 {video.description}
//               </p>

//               <div className="flex flex-wrap gap-4 text-sm text-gray-400">
//                 <div className="flex items-center gap-2 bg-gray-700/50 px-3 py-2 rounded-lg">
//                   <FaBook className="w-4 h-4" />
//                   <span>{chapterTitle}</span>
//                 </div>
//                 <div className="flex items-center gap-2 bg-gray-700/50 px-3 py-2 rounded-lg">
//                   <FaClock className="w-4 h-4" />
//                   <span>Duration: {video.duration}</span>
//                 </div>
//               </div>
//             </div>
//           </div>

//           {/* Playlist Sidebar */}
//           <div className="lg:col-span-1">
//             <div className="bg-gray-800/50 rounded-2xl p-6 backdrop-blur-sm sticky top-24">
//               <div className="flex items-center justify-between mb-6">
//                 <h2 className="text-xl font-bold flex items-center gap-2">
//                   <FaList className="w-5 h-5 text-blue-400" />
//                   Course Videos
//                 </h2>
//                 <span className="text-sm text-gray-400 bg-gray-700 px-2 py-1 rounded">
//                   {relatedVideos.length} videos
//                 </span>
//               </div>

//               <div className="space-y-3 max-h-96 overflow-y-auto">
//                 {relatedVideos.map((relatedVideo, index) => (
//                   <div
//                     key={relatedVideo._id}
//                     className={`p-4 rounded-xl cursor-pointer transition-all duration-200 group ${
//                       video._id === relatedVideo._id
//                         ? "bg-blue-500/20 border border-blue-500/50"
//                         : "bg-gray-700/30 hover:bg-gray-700/50"
//                     }`}
//                     onClick={() => {
//                       // Navigate to this video
//                       navigate(
//                         `/course/${courseId}/video/${relatedVideo._id}`,
//                         {
//                           state: {
//                             video: relatedVideo,
//                             courseTitle,
//                             chapterTitle,
//                             courseVideos: relatedVideos,
//                           },
//                         }
//                       );
//                     }}
//                   >
//                     <div className="flex items-start gap-3">
//                       <div
//                         className={`w-10 h-10 rounded-lg flex items-center justify-center flex-shrink-0 ${
//                           video._id === relatedVideo._id
//                             ? "bg-blue-500 text-white"
//                             : relatedVideo.completed
//                             ? "bg-green-500 text-white"
//                             : "bg-gray-600 text-gray-300"
//                         }`}
//                       >
//                         {video._id === relatedVideo._id ? (
//                           <FaPlay className="w-4 h-4" />
//                         ) : relatedVideo.completed ? (
//                           <FaCheck className="w-4 h-4" />
//                         ) : (
//                           <span className="text-sm font-medium">
//                             {index + 1}
//                           </span>
//                         )}
//                       </div>

//                       <div className="flex-1 min-w-0">
//                         <h3
//                           className={`font-medium line-clamp-2 ${
//                             video._id === relatedVideo._id
//                               ? "text-blue-300"
//                               : "text-gray-200"
//                           }`}
//                         >
//                           {relatedVideo.title}
//                         </h3>
//                         <div className="flex items-center gap-2 mt-1 text-xs text-gray-400">
//                           <FaClock className="w-3 h-3" />
//                           <span>{relatedVideo.duration}</span>
//                           {relatedVideo.completed && (
//                             <span className="text-green-400">‚Ä¢ Completed</span>
//                           )}
//                         </div>
//                       </div>
//                     </div>
//                   </div>
//                 ))}
//               </div>

         
//             </div>
//           </div>
//         </div>
//       </div>
//     </div>
//   );
// };

// export default VideoPlayerPage;

//  this is the video player page 


// import { useState, useEffect } from "react";
// import { useParams, Link } from "react-router-dom";
// import { fetchCourseById } from "../../api/courses";
// import {
//   FaBook,
//   FaArrowLeft,
//   FaFileAlt,
//   FaTasks,
//   FaCheckCircle,
//   FaVideo,
//   FaListAlt,
// } from "react-icons/fa";
// import OverviewTab from "../../components/student-course/OverviewTab";
// import CurriculumTab from "../../components/student-course/CurriculumTab";
// import NotesTab from "../../components/student-course/NotesTab";
// import VideosTab from "../../components/student-course/VideosTab";
// import AssignmentsTab from "../../components/student-course/AssignmentsTab";
// import OutcomesTab from "../../components/student-course/OutcomesTab";

// const StudyCoursePage = () => {
//   const { courseId } = useParams();
//   const [course, setCourse] = useState(null);
//   const [loading, setLoading] = useState(true);
//   const [error, setError] = useState("");
//   const [activeTab, setActiveTab] = useState("overview");
//   const [expandedWeeks, setExpandedWeeks] = useState({});

//   useEffect(() => {
//     if (!courseId) return;

//     const loadCourseDetails = async () => {
//       try {
//         const courseData = await fetchCourseById(courseId);
//         setCourse(courseData);
//         setError("");
//       } catch (error) {
//         setError(error.message || "Failed to load course content.");
//         setCourse(null);
//       } finally {
//         setLoading(false);
//       }
//     };

//     loadCourseDetails();
//   }, [courseId]);

//   const toggleWeek = (phaseIndex, weekIndex) => {
//     const key = `${phaseIndex}-${weekIndex}`;
//     setExpandedWeeks((prev) => ({
//       ...prev,
//       [key]: !prev[key],
//     }));
//   };

//   // Tab components
//   const TabButton = ({ name, icon, isActive, count }) => (
//     <button
//       onClick={() => setActiveTab(name.toLowerCase())}
//       className={`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all duration-200 ${
//         isActive
//           ? "bg-blue-600 text-white shadow-md"
//           : "text-gray-700 hover:bg-gray-100 border border-gray-200"
//       }`}
//     >
//       {icon}
//       <span className="font-medium flex-1 text-left">{name}</span>
//       {count > 0 && (
//         <span
//           className={`px-2 py-1 rounded-full text-xs ${
//             isActive ? "bg-white text-blue-600" : "bg-blue-100 text-blue-600"
//           }`}
//         >
//           {count}
//         </span>
//       )}
//     </button>
//   );

//   if (loading) {
//     return (
//       <div className="min-h-screen bg-gray-50 flex items-center justify-center">
//         <div className="text-center">
//           <div className="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-600 mx-auto"></div>
//           <p className="mt-4 text-lg font-medium text-gray-600">
//             Loading course content...
//           </p>
//         </div>
//       </div>
//     );
//   }

//   if (error || !course) {
//     return (
//       <div className="min-h-screen bg-gray-50 flex items-center justify-center">
//         <div className="text-center p-6 bg-white rounded-xl shadow-md max-w-md">
//           <div className="w-16 h-16 bg-red-100 text-red-600 rounded-full flex items-center justify-center mx-auto mb-4">
//             <FaBook className="w-8 h-8" />
//           </div>
//           <h2 className="text-xl font-bold text-gray-800 mb-2">
//             {error ? "Error Loading Course" : "Course Not Found"}
//           </h2>
//           <p className="text-gray-600 mb-4">
//             {error || "The requested course could not be found."}
//           </p>
//           <Link
//             to="/my-courses"
//             className="inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"
//           >
//             <FaArrowLeft className="w-4 h-4" />
//             Back to My Courses
//           </Link>
//         </div>
//       </div>
//     );
//   }

//   // return (
//   //   <div className="min-h-screen bg-gray-50">
//   //     {/* Header */}
//   //     <div className="bg-white shadow-sm border-b">
//   //       <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
//   //         <div className="flex items-center justify-between">
//   //           <div className="flex items-center gap-4">
//   //             <Link
//   //               to="/my-courses"
//   //               className="inline-flex items-center gap-2 text-blue-600 hover:text-blue-800 font-medium"
//   //             >
//   //               <FaArrowLeft className="w-4 h-4" />
//   //               Back to Courses
//   //             </Link>
//   //             <div className="h-6 w-px bg-gray-300"></div>
//   //             <h1 className="text-2xl font-bold text-gray-900 flex items-center gap-2">
//   //               <FaBook className="text-blue-600" />
//   //               {course.title}
//   //             </h1>
//   //           </div>

//   //           <div className="flex items-center gap-4 text-sm text-gray-600">
//   //             <span>üéØ {course.enrolledCount} Enrolled</span>
//   //             <span>‚≠ê {course.rating}</span>
//   //             <span>‚è±Ô∏è {course.duration}</span>
//   //           </div>
//   //         </div>
//   //       </div>
//   //     </div>

//   //     <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
//   //       <div className="flex flex-col lg:flex-row gap-6">
//   //         {/* Sidebar Navigation */}
//   //         <div className="lg:w-64 flex-shrink-0">
//   //           <div className="bg-white rounded-lg shadow-sm border p-4 sticky top-6">
//   //             <nav className="space-y-2">
//   //               <TabButton
//   //                 name="Overview"
//   //                 icon={<FaListAlt className="w-4 h-4" />}
//   //                 isActive={activeTab === "overview"}
//   //                 count={0}
//   //               />
//   //               <TabButton
//   //                 name="Curriculum"
//   //                 icon={<FaBook className="w-4 h-4" />}
//   //                 isActive={activeTab === "curriculum"}
//   //                 count={
//   //                   course.phases?.reduce(
//   //                     (total, phase) => total + phase.weeks.length,
//   //                     0
//   //                   ) || 0
//   //                 }
//   //               />
//   //               <TabButton
//   //                 name="Notes"
//   //                 icon={<FaFileAlt className="w-4 h-4" />}
//   //                 isActive={activeTab === "notes"}
//   //                 count={course.notes?.length || 0}
//   //               />
//   //               <TabButton
//   //                 name="Videos"
//   //                 icon={<FaVideo className="w-4 h-4" />}
//   //                 isActive={activeTab === "videos"}
//   //                 count={course.lectures?.length || 0}
//   //               />
//   //               <TabButton
//   //                 name="Assignments"
//   //                 icon={<FaTasks className="w-4 h-4" />}
//   //                 isActive={activeTab === "assignments"}
//   //                 count={
//   //                   course.phases?.reduce(
//   //                     (total, phase) =>
//   //                       total +
//   //                       phase.weeks.reduce(
//   //                         (weekTotal, week) =>
//   //                           weekTotal +
//   //                           week.chapters.reduce(
//   //                             (chapterTotal, chapter) =>
//   //                               chapterTotal +
//   //                               (chapter.assignments?.length || 0),
//   //                             0
//   //                           ),
//   //                         0
//   //                       ),
//   //                     0
//   //                   ) || 0
//   //                 }
//   //               />
//   //               <TabButton
//   //                 name="Outcomes"
//   //                 icon={<FaCheckCircle className="w-4 h-4" />}
//   //                 isActive={activeTab === "outcomes"}
//   //                 count={course.learningOutcomes?.length || 0}
//   //               />
//   //             </nav>

//   //             {/* Progress Section */}
//   //             <div className="mt-6 pt-4 border-t">
//   //               <div className="text-sm text-gray-600 mb-2">Your Progress</div>
//   //               <div className="w-full bg-gray-200 rounded-full h-2">
//   //                 <div
//   //                   className="bg-green-600 h-2 rounded-full"
//   //                   style={{ width: "0%" }}
//   //                 ></div>
//   //               </div>
//   //               <div className="text-xs text-gray-500 mt-1">0% Complete</div>
//   //             </div>
//   //           </div>
//   //         </div>

//   //         {/* Main Content */}
//   //         <div className="flex-1">
//   //           {/* Overview Tab */}
//   //           {activeTab === "overview" && (
//   //             <OverviewTab course={course} setActiveTab={setActiveTab} />
//   //           )}

//   //           {/* Curriculum Tab */}
//   //           {activeTab === "curriculum" && (
//   //             <CurriculumTab
//   //               course={course}
//   //               expandedWeeks={expandedWeeks}
//   //               toggleWeek={toggleWeek}
//   //             />
//   //           )}

//   //           {/* Notes Tab */}
//   //           {activeTab === "notes" && <NotesTab course={course} />}

//   //           {/* Videos Tab */}
//   //           {activeTab === "videos" && <VideosTab course={course} />}

//   //           {/* Assignments Tab */}
//   //           {activeTab === "assignments" && <AssignmentsTab course={course} />}

//   //           {/* Outcomes Tab */}
//   //           {activeTab === "outcomes" && <OutcomesTab course={course} />}
//   //         </div>
//   //       </div>
//   //     </div>
//   //   </div>
//   // );

// return (
//   <div className="min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50">
//     {/* Sticky Header */}
//     <header className="sticky top-0 z-50 bg-white/90 backdrop-blur shadow-sm border-b">
//       <div className="max-w-7xl mx-auto px-6 py-4 flex items-center justify-between">
//         <div className="flex items-center gap-4">
//           <Link
//             to="/my-courses"
//             className="text-indigo-600 hover:text-indigo-800 text-sm font-medium flex items-center gap-2 transition"
//           >
//             <FaArrowLeft className="w-4 h-4" />
//             Back to Courses
//           </Link>
//           <div className="hidden sm:block h-6 w-px bg-gray-300"></div>
//           <h1 className="text-2xl font-bold text-gray-800 flex items-center gap-2">
//             <FaBook className="text-indigo-600" />
//             {course.title}
//           </h1>
//         </div>

//         <div className="flex items-center gap-6 text-sm text-gray-600 font-medium">
//           <span>üéØ {course.enrolledCount} Enrolled</span>
//           <span>‚≠ê {course.rating}</span>
//           <span>‚è±Ô∏è {course.duration}</span>
//         </div>
//       </div>
//     </header>

//     {/* Body */}
//     <div className="max-w-7xl mx-auto px-6 py-8 flex flex-col lg:flex-row gap-8">
//       {/* Sidebar Navigation */}
//       <aside className="lg:w-64 flex-shrink-0">
//         <div className="bg-white rounded-2xl shadow-lg border p-6 sticky top-24 space-y-6">
//           {/* Navigation */}
//           <nav className="space-y-2">
//             {[
//               { name: "Overview", icon: <FaListAlt />, key: "overview", count: 0 },
//               {
//                 name: "Curriculum",
//                 icon: <FaBook />,
//                 key: "curriculum",
//                 count:
//                   course.phases?.reduce(
//                     (total, phase) => total + phase.weeks.length,
//                     0
//                   ) || 0,
//               },
//               {
//                 name: "Notes",
//                 icon: <FaFileAlt />,
//                 key: "notes",
//                 count: course.notes?.length || 0,
//               },
//               {
//                 name: "Videos",
//                 icon: <FaVideo />,
//                 key: "videos",
//                 count: course.lectures?.length || 0,
//               },
//               {
//                 name: "Assignments",
//                 icon: <FaTasks />,
//                 key: "assignments",
//                 count:
//                   course.phases?.reduce(
//                     (total, phase) =>
//                       total +
//                       phase.weeks.reduce(
//                         (weekTotal, week) =>
//                           weekTotal +
//                           week.chapters.reduce(
//                             (chapterTotal, chapter) =>
//                               chapterTotal +
//                               (chapter.assignments?.length || 0),
//                             0
//                           ),
//                         0
//                       ),
//                     0
//                   ) || 0,
//               },
//               {
//                 name: "Outcomes",
//                 icon: <FaCheckCircle />,
//                 key: "outcomes",
//                 count: course.learningOutcomes?.length || 0,
//               },
//             ].map((tab) => (
//               <button
//                 key={tab.key}
//                 onClick={() => setActiveTab(tab.key)}
//                 className={`flex items-center justify-between w-full px-4 py-2 rounded-xl text-sm font-medium transition shadow-sm ${
//                   activeTab === tab.key
//                     ? "bg-indigo-100 text-indigo-700"
//                     : "text-gray-700 hover:bg-gray-100"
//                 }`}
//               >
//                 <div className="flex items-center gap-2">
//                   {tab.icon}
//                   {tab.name}
//                 </div>
//                 {tab.count > 0 && (
//                   <span className="bg-gray-200 text-gray-700 text-xs px-2 py-0.5 rounded-full">
//                     {tab.count}
//                   </span>
//                 )}
//               </button>
//             ))}
//           </nav>

//           {/* Progress */}
//           <div className="pt-4 border-t">
//             <div className="text-sm text-gray-600 font-medium mb-2">
//               Your Progress
//             </div>
//             <div className="w-full bg-gray-200 rounded-full h-2 overflow-hidden">
//               <div
//                 className="bg-green-500 h-full transition-all duration-700 ease-in-out"
//                 style={{ width: "0%" }} // Replace with actual % dynamically
//               ></div>
//             </div>
//             <div className="text-xs text-gray-500 mt-1">0% Complete</div>
//           </div>
//         </div>
//       </aside>

//       {/* Main Content */}
//       <main className="flex-1 min-w-0">
//         <div className="bg-white rounded-2xl shadow-md p-6 min-h-[60vh]">
//           {activeTab === "overview" && (
//             <OverviewTab course={course} setActiveTab={setActiveTab} />
//           )}
//           {activeTab === "curriculum" && (
//             <CurriculumTab
//               course={course}
//               expandedWeeks={expandedWeeks}
//               toggleWeek={toggleWeek}
//             />
//           )}
//           {activeTab === "notes" && <NotesTab course={course} />}
//           {activeTab === "videos" && <VideosTab course={course} />}
//           {activeTab === "assignments" && <AssignmentsTab course={course} />}
//           {activeTab === "outcomes" && <OutcomesTab course={course} />}
//         </div>
//       </main>
//     </div>
//   </div>
// );

// };

// export default StudyCoursePage;
//  this is the stude page 



// /**
//  * üì¶ EventTableModal.jsx
//  *
//  * This modal displays all sessions under a given session category (e.g., event, webinar, workshop, internship-session).
//  * It page is triggered when the user clicks the "Manage" button from the `SessionCategoryForm` component.
//  */

// import { useEffect, useState } from "react";
// import ReactModal from "react-modal";
// import { useNavigate } from "react-router-dom";
// import apiClient from "../../api/axiosConfig";
// import ScrollableTable from "../table/ScrollableTable";

// import { Pencil, Trash, Trash2 } from "lucide-react";
// import { Tooltip } from "react-tooltip";
// // import {
// //   deleteSessionCategory,
// //   deleteEvent,
// //   deleteWebinar,
// //   deleteWorkshop,
// // } from "./upSkillsApi";

// // import { deleteSessionCategory } from "./upSkillsApi";

// // Helps screen readers focus on the modal
// ReactModal.setAppElement("#root");

// const EventTableModal = ({ isOpen, onClose, categoryId, categorySlug }) => {
//   const [data, setData] = useState([]);
//   const [loading, setLoading] = useState(false);
//   const [error, setError] = useState("");
//   const navigate = useNavigate();
//   // Could come from props, modal state, or route
// const [activeType, setActiveType] = useState("session-category");


// // Example handler inside your component
// const handleDelete = async (id, type) => {
//   if (!window.confirm(`Are you sure you want to delete this ${type}?`)) return;

//   try {
//     switch (type) {
//       case "session-category":
//         await deleteSessionCategory(id);
//         setSessionCategories((prev) => prev.filter((item) => item._id !== id));
//         toast.success("Session category deleted successfully!");
//         break;

//       case "event":
//         await deleteEvent(id);
//         setEvents((prev) => prev.filter((item) => item._id !== id));
//         toast.success("Event deleted successfully!");
//         break;

//       case "webinar":
//         await deleteWebinar(id);
//         setWebinars((prev) => prev.filter((item) => item._id !== id));
//         toast.success("Webinar deleted successfully!");
//         break;

//       case "workshop":
//         await deleteWorkshop(id);
//         setWorkshops((prev) => prev.filter((item) => item._id !== id));
//         toast.success("Workshop deleted successfully!");
//         break;

//       default:
//         throw new Error("Unknown delete type");
//     }
//   } catch (err) {
//     console.error(err);
//     toast.error(`Failed to delete ${type}.`);
//   }
// };

//   //  Fetch sessions based on the selected category slug (type)
//   useEffect(() => {
//     if (!isOpen) return;

//     const fetchSessions = async () => {
//       setLoading(true);
//       setError("");

//       try {
//         let response;

//         switch (categorySlug) {
//           case "event":
//             response = await apiClient.get("/api/event");
//             break;
//           case "webinar":
//             response = await apiClient.get("/api/webinars");
//             break;
//           case "workshop":
//             response = await apiClient.get("/api/workshops");
//             break;
//           case "internship-session":
//             response = await apiClient.get("/api/internship-sessions");
//             break;
//           default:
//             throw new Error("Unknown session type");
//         }

//         setData(response.data?.data || []);
//       } catch (err) {
//         console.error("‚ùå Failed to fetch sessions:", err);
//         setError("Failed to load sessions.");
//       } finally {
//         setLoading(false);
//       }
//     };

//     fetchSessions();
//   }, [isOpen, categorySlug]);

//   //  Table column definitions
//   const columns = [
//     { header: "Title", accessor: "title" },
//     {
//       header: "Start Date",
//       accessor: (row) =>
//         row.startDate
//           ? new Date(row.startDate).toLocaleDateString("en-US", {
//               year: "numeric",
//               month: "short",
//               day: "numeric",
//             })
//           : "‚Äî",
//     },
//     {
//       header: "End Date",
//       accessor: (row) =>
//         row.endDate
//           ? new Date(row.endDate).toLocaleDateString("en-US", {
//               year: "numeric",
//               month: "short",
//               day: "numeric",
//             })
//           : "‚Äî",
//     },
// {
//   header: "Actions",
//   accessor: (row) => (
//     <div className="flex items-center space-x-2">
//       {/* ‚úèÔ∏è Edit Button */}
//       <button
//         data-tooltip-id="tooltip"
//         data-tooltip-content="Edit"
//         onClick={() =>
//           navigate(
//             `/admin/${activeType}/${categoryId}/manage?type=edit&id=${row._id}`
//           )
//         }
//         className="text-blue-600 hover:bg-blue-100 p-2 rounded transition"
//       >
//         <Pencil size={18} />
//       </button>

//       {/* üóëÔ∏è Delete Button */}
//       <button
//         data-tooltip-id="tooltip"
//         data-tooltip-content="Delete"
//         onClick={() => handleDelete(row._id, activeType)}
//         className="text-red-600 hover:bg-red-100 p-2 rounded transition"
//       >
//         <Trash size={18} />
//       </button>
//     </div>
//   ),
// }


//     // {
//     //   header: "Actions",
//     //   accessor: (row) => (
//     //     <div className="flex items-center space-x-2">
//     //       {/* ‚úèÔ∏è Edit Button with Tooltip */}
//     //       <button
//     //         data-tooltip-id="tooltip"
//     //         data-tooltip-content="Edit Session"
//     //         onClick={() =>
//     //           navigate(
//     //             `/admin/session-category/${categoryId}/manage?type=edit&id=${row._id}`
//     //           )
//     //         }
//     //         className="text-blue-600 hover:bg-blue-100 p-2 rounded transition"
//     //       >
//     //         <Pencil size={18} />
//     //       </button>
//     //     </div>
//     //   ),
//     // },
//   ];

//   return (
//     <ReactModal
//       isOpen={isOpen}
//       onRequestClose={onClose}
//       contentLabel="All Sessions Modal"
//       className="p-6 bg-white rounded-lg shadow-lg max-w-3xl mx-auto mt-20 outline-none"
//       overlayClassName="fixed inset-0 bg-black/70 flex items-start justify-center z-50"
//     >
//       <div>
//         {/* Modal Header */}
//         <div className="flex justify-between items-center mb-4">
//           <h2 className="text-xl font-semibold capitalize">
//             All {categorySlug} Sessions
//           </h2>
//           <button
//             onClick={onClose}
//             className="text-gray-600 hover:text-black text-xl"
//           >
//             ‚úï
//           </button>
//         </div>

//         {/* Content */}
//         {loading ? (
//           <p>Loading...</p>
//         ) : error ? (
//           <p className="text-red-500">{error}</p>
//         ) : (
//           <ScrollableTable columns={columns} data={data} maxHeight="400px" />
//         )}
//       </div>

//       {/* Tooltip provider for icons */}
//       <Tooltip id="tooltip" place="top" />
//     </ReactModal>
//   );
// };

// export default EventTableModal;

// working event theme code 


// import { useFormik } from "formik";
// import { useEffect, useState } from "react";
// import { useLocation, useNavigate, useParams } from "react-router-dom";
// import * as Yup from "yup";

// // import EventTablePage from "../../pages/EventTablePage";
// import EventTablePage from "../../pages/admin/EventTablePage";

// import DateRangePicker from "../form/DateRangePicker";
// import Dropdown from "../form/Dropdown";
// import DynamicInputFields from "../form/DynamicInputFields";
// import FileInput from "../form/FileInput";
// import InputField from "../form/InputField";
// import MultiImageUpload from "../form/MultiImageUpload";
// import TextAreaField from "../form/TextAreaField";
// import TimeRangePicker from "../form/TimeRangePicker";
// import ToggleSwitch from "../form/ToggleSwitch";

// import { createEvent, getEventById, updateEvent } from "./upSkillsApi";
// // import { DIR } from "../../utils/constants";
// import { DIR } from "../../utils/constants";

// const EventForm = () => {
//   const { id } = useParams();
//   const navigate = useNavigate();
//   const { search } = useLocation();
//   const query = new URLSearchParams(search);

//   const mode = query.get("type"); // "edit" or "add"
//   const eventId = query.get("id");

//   const [loading, setLoading] = useState(false);
//   const [categoryName, setCategoryName] = useState("");
//   const [message, setMessage] = useState("");
//   const [isTableOpen, setIsTableOpen] = useState(false);

//   // Default form values
//   const defaultValues = {
//     title: "",
//     slug: "",
//     description: "",
//     category: id || "",
//     startDate: "",
//     endDate: "",
//     startTime: "",
//     endTime: "",
//     duration: "",
//     location: "",
//     mode: "Offline",
//     meetingLink: "",
//     organizer: "",
//     speakers: [""],
//     bannerImage: null,
//     gallery: [],
//     registrationLink: null,
//     isFree: true,
//     price: 0,
//     fees: {
//       amount: "",
//       currency: "INR",
//       refundPolicy: "",
//     },
//     tags: [""],
//     priority: "",
//     maxParticipants: "",
//     agenda: [{ time: "", activity: "" }],
//     resources: [],
//     sponsors: [""],
//     certificateAvailable: false,
//     feedbackFormLink: "",
//     topics: [""],
//     capacity: "",
//     socialLinks: {
//       facebook: "",
//       instagram: "",
//       twitter: "",
//       linkedin: "",
//     },
//     isActive: true,
//   };

//   const [initialValues, setInitialValues] = useState(defaultValues);

//   // Fetch event data if in edit mode and set form initial values
//   useEffect(() => {
//     const loadEvent = async () => {
//       if (mode === "edit" && eventId) {
//         setLoading(true);
//         try {
//           const resp = await getEventById(eventId);
//           const fetchedEvent = resp?.data?.data;
//           if (!fetchedEvent) {
//             // maybe show error or fallback
//             return;
//           }
//           // Prepare values for Formik, mapping existing images to full URLs
//           const prepared = {
//             ...defaultValues,
//             ...fetchedEvent,
//             category: fetchedEvent.category?._id || "",
//             startDate: fetchedEvent.startDate
//               ? fetchedEvent.startDate.split("T")[0]
//               : "",
//             endDate: fetchedEvent.endDate
//               ? fetchedEvent.endDate.split("T")[0]
//               : "",
//             startTime: fetchedEvent.startTime || "",
//             endTime: fetchedEvent.endTime || "",
//             bannerImage: fetchedEvent.bannerImage
//               ? `${DIR.EVENT_BANNER}${fetchedEvent.bannerImage}`
//               : null,
//             gallery: Array.isArray(fetchedEvent.gallery)
//               ? fetchedEvent.gallery.map(
//                   (file) => `${DIR.EVENT_GALLERY_IMAGE}${file}`
//                 )
//               : [],
//             tags: fetchedEvent.tags || [""],
//             priority: fetchedEvent.priority || "",
//             resources: fetchedEvent.resources || [],
//             speakers: fetchedEvent.speakers || [""],
//             sponsors: fetchedEvent.sponsors || [""],
//             topics: fetchedEvent.topics || [""],
//             capacity: fetchedEvent.capacity || "",
//             duration: fetchedEvent.duration || "",
//             fees: fetchedEvent.fees || {
//               amount: "",
//               currency: "INR",
//               refundPolicy: "",
//             },
//             socialLinks: {
//               facebook: fetchedEvent.socialLinks?.facebook || "",
//               instagram: fetchedEvent.socialLinks?.instagram || "",
//               twitter: fetchedEvent.socialLinks?.twitter || "",
//               linkedin: fetchedEvent.socialLinks?.linkedin || "",
//             },
//             certificateAvailable: fetchedEvent.certificateAvailable ?? false,
//           };
//           setInitialValues(prepared);
//         } catch (error) {
//           console.error("Error fetching event:", error);
//           setMessage("Failed to load event for editing.");
//         } finally {
//           setLoading(false);
//         }
//       } else {
//         // If not edit mode, reset to default
//         setInitialValues(defaultValues);
//       }
//     };

//     loadEvent();
//     // eslint-disable-next-line react-hooks/exhaustive-deps
//   }, [mode, eventId]); // Re-run if mode or eventId changes

//   // Validation schema (you can extend this as per your field requirements)
//   const validationSchema = Yup.object({
//     title: Yup.string().required("Title is required"),
//     slug: Yup.string().required("Slug is required"),
//     // Add more required validations as needed
//   });

//   const formik = useFormik({
//     initialValues,
//     validationSchema,
//     enableReinitialize: true,
//     onSubmit: async (values) => {
//       setLoading(true);
//       setMessage("");

//       try {
//         const formData = new FormData();

//         // Append simple scalar or nested data excluding bannerImage and gallery
//         Object.entries(values).forEach(([key, value]) => {
//           if (key === "bannerImage" || key === "gallery") return;

//           if (key === "agenda") {
//             // agenda is an array of objects
//             value.forEach((item, idx) => {
//               formData.append(`agenda[${idx}][time]`, item.time);
//               formData.append(`agenda[${idx}][activity]`, item.activity);
//             });
//           } else if (Array.isArray(value)) {
//             // arrays of strings or similar
//             value.forEach((item) => {
//               if (item !== null && item !== undefined && item !== "")
//                 formData.append(`${key}[]`, item);
//             });
//           } else if (
//             typeof value === "object" &&
//             value !== null &&
//             !Array.isArray(value)
//           ) {
//             // nested object (e.g. fees, socialLinks)
//             Object.entries(value).forEach(([subKey, subVal]) => {
//               if (subVal !== undefined && subVal !== null) {
//                 formData.append(`${key}[${subKey}]`, subVal);
//               }
//             });
//           } else {
//             // simple scalar
//             formData.append(key, value);
//           }
//         });

//         // Handle bannerImage: only upload if it's a File (new upload)
//         if (values.bannerImage instanceof File) {
//           formData.append("bannerImage", values.bannerImage);
//         }

//         // Handle gallery: send existing filenames and new image files
//         if (Array.isArray(values.gallery)) {
//           values.gallery.forEach((item) => {
//             if (item instanceof File) {
//               // new image file
//               formData.append("gallery", item);
//             } else if (typeof item === "string") {
//               // existing URL => extract filename
//               const fileName = item.split("/").pop();
//               formData.append("gallery", fileName);
//             }
//           });
//         }

//         // ... after building formData
//         console.log("FormData contents:");
//         for (let pair of formData.entries()) {
//           console.log(pair[0], ":", pair[1]);
//         }

//         let resp;

//         if (mode === "edit" && eventId) {
//           resp = await updateEvent(eventId, formData);
//           setMessage("‚úÖ Event updated successfully");
//         } else {
//           resp = await createEvent(formData);
//           setMessage("‚úÖ Event created successfully");
//           formik.resetForm();
//         }

//         // Optionally you can use resp to do further actions or redirect
//       } catch (err) {
//         console.error("Submit error:", err);
//         setMessage("‚ùå Failed to submit event.");
//       } finally {
//         setLoading(false);
//       }
//     },
//   });

//   const modeOptions = [
//     { _id: "Online", title: "Online" },
//     { _id: "Offline", title: "Offline" },
//     { _id: "Hybrid", title: "Hybrid" },
//   ];

//   return (
//     <form
//       onSubmit={formik.handleSubmit}
//       className="space-y-10 p-8 max-w-6xl mx-auto bg-white shadow-xl rounded-xl border border-gray-200"
//     >
//       <h2 className="text-3xl font-bold text-gray-900 border-b border-gray-200 pb-4 mb-8 text-center">
//         {mode === "edit" ? "Edit Event" : "Create Event"}
//       </h2>

//       {message && (
//         <p className="mb-4 text-center text-blue-600 font-semibold">
//           {message}
//         </p>
//       )}

//       {/* Basic Information */}
//       <section className="space-y-6">
//         <h3 className="text-xl font-semibold text-gray-800 border-b border-gray-200 pb-2">
//           Basic Information
//         </h3>
//         <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
//           <InputField label="Title" name="title" formik={formik} />
//           <InputField label="Slug" name="slug" formik={formik} />
//           <TextAreaField
//             label="Description"
//             name="description"
//             formik={formik}
//             rows={4}
//             className="md:col-span-2"
//           />
//           <InputField label="Location" name="location" formik={formik} />
//           <Dropdown
//             label="Project Mode"
//             name="mode"
//             options={modeOptions}
//             formik={formik}
//           />
//           {["Online", "Hybrid"].includes(formik.values.mode) && (
//             <InputField
//               label="Meeting Link"
//               name="meetingLink"
//               formik={formik}
//             />
//           )}
//         </div>
//       </section>

//       {/* Date & Time */}
//       <section className="space-y-6">
//         <h3 className="text-xl font-semibold text-gray-800 border-b border-gray-200 pb-2">
//           Date & Time
//         </h3>
//         <DateRangePicker formik={formik} />
//         <TimeRangePicker formik={formik} />
//       </section>

//       {/* Organizers & Speakers */}
//       <section className="space-y-6">
//         <h3 className="text-xl font-semibold text-gray-800 border-b border-gray-200 pb-2">
//           Organizers & Speakers
//         </h3>
//         <InputField label="Organizer" name="organizer" formik={formik} />
//         <DynamicInputFields label="Speakers" name="speakers" formik={formik} />
//       </section>

//       {/* Pricing & Participants */}
//       <section className="space-y-6">
//         <h3 className="text-xl font-semibold text-gray-800 border-b border-gray-200 pb-2">
//           Pricing & Participants
//         </h3>
//         <ToggleSwitch
//           label="Is Free Event"
//           name="isFree"
//           checked={formik.values.isFree}
//           onChange={(e) => formik.setFieldValue("isFree", e.target.checked)}
//         />
//         {!formik.values.isFree && (
//           <InputField
//             label="Price"
//             name="price"
//             type="number"
//             formik={formik}
//           />
//         )}
//         <InputField
//           label="Max Participants"
//           name="maxParticipants"
//           type="number"
//           formik={formik}
//         />
//       </section>

//       {/* Agenda */}
//       <section className="space-y-6">
//         <h3 className="text-xl font-semibold text-gray-800 border-b border-gray-200 pb-2">
//           Agenda
//         </h3>
//         {formik.values.agenda.map((item, idx) => (
//           <div
//             key={idx}
//             className="grid grid-cols-1 md:grid-cols-3 gap-4 items-center mb-2"
//           >
//             <input
//               type="time"
//               value={item.time}
//               onChange={(e) => {
//                 const arr = [...formik.values.agenda];
//                 arr[idx].time = e.target.value;
//                 formik.setFieldValue("agenda", arr);
//               }}
//               className="border border-blue-500 p-2 rounded w-full"
//               required
//             />
//             <input
//               type="text"
//               value={item.activity}
//               onChange={(e) => {
//                 const arr = [...formik.values.agenda];
//                 arr[idx].activity = e.target.value;
//                 formik.setFieldValue("agenda", arr);
//               }}
//               placeholder={`Activity ${idx + 1}`}
//               className="border border-blue-500 p-2 rounded w-full"
//               required
//             />
//             <div className="flex gap-2">
//               {formik.values.agenda.length > 1 && (
//                 <button
//                   type="button"
//                   onClick={() => {
//                     const filtered = formik.values.agenda.filter(
//                       (_, i) => i !== idx
//                     );
//                     formik.setFieldValue("agenda", filtered);
//                   }}
//                   className="bg-red-500 text-white px-2 rounded"
//                 >
//                   ‚úï
//                 </button>
//               )}
//               {idx === formik.values.agenda.length - 1 && (
//                 <button
//                   type="button"
//                   onClick={() =>
//                     formik.setFieldValue("agenda", [
//                       ...formik.values.agenda,
//                       { time: "", activity: "" },
//                     ])
//                   }
//                   className="bg-blue-500 text-white px-4 rounded"
//                 >
//                   +
//                 </button>
//               )}
//             </div>
//           </div>
//         ))}
//       </section>

//       {/* Additional Info */}
//       <section className="space-y-6">
//         <h3 className="text-xl font-semibold text-gray-800 border-b border-gray-200 pb-2">
//           Additional Info
//         </h3>
//         <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
//           <FileInput label="Banner Image" name="bannerImage" formik={formik} />
//           <DynamicInputFields label="Tags" name="tags" formik={formik} />
//           <InputField label="Priority" name="priority" formik={formik} />
//           <DynamicInputFields
//             label="Resources"
//             name="resources"
//             formik={formik}
//           />
//           <MultiImageUpload label="Gallery" name="gallery" formik={formik} />
//           <DynamicInputFields
//             label="Sponsors"
//             name="sponsors"
//             formik={formik}
//           />
//           <InputField
//             label="Feedback Form Link"
//             name="feedbackFormLink"
//             formik={formik}
//           />
//           <InputField
//             label="Registration Link"
//             name="registrationLink"
//             formik={formik}
//           />
//           <ToggleSwitch
//             label="Certificate Available"
//             name="certificateAvailable"
//             checked={formik.values.certificateAvailable}
//             onChange={(e) =>
//               formik.setFieldValue("certificateAvailable", e.target.checked)
//             }
//           />
//         </div>
//       </section>

//       {/* Social Media Links */}
//       <section className="space-y-6">
//         <h3 className="text-xl font-semibold text-gray-800 border-b border-gray-200 pb-2">
//           Social Media Links
//         </h3>
//         <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
//           <InputField
//             label="Facebook"
//             name="socialLinks.facebook"
//             formik={formik}
//           />
//           <InputField
//             label="Instagram"
//             name="socialLinks.instagram"
//             formik={formik}
//           />
//           <InputField
//             label="Twitter"
//             name="socialLinks.twitter"
//             formik={formik}
//           />
//           <InputField
//             label="LinkedIn"
//             name="socialLinks.linkedin"
//             formik={formik}
//           />
//         </div>
//       </section>

//       {/* Submit Button */}
//       <div className="flex justify-end pt-4">
//         <button
//           type="submit"
//           disabled={formik.isSubmitting || loading}
//           className="px-8 py-4 bg-green-600 hover:bg-green-700 text-white font-semibold rounded-xl shadow-lg transition disabled:opacity-50 disabled:cursor-not-allowed"
//         >
//           {mode === "edit" ? "Update Event" : "Create Event"}
//         </button>
//       </div>

//       {/* Optional: status message */}
//       {message && (
//         <p className="text-sm mt-4 text-center text-gray-600 italic">
//           {message}
//         </p>
//       )}

//       {/* Modal / table for events (if needed) */}
//       <EventTablePage
//         isOpen={isTableOpen}
//         onClose={() => setIsTableOpen(false)}
//         // you might pass editing callback
//       />
//     </form>
//   );
// };

// export default EventForm; working event form 



// // src/components/forms/WebinarForm.jsx

// import { useFormik } from "formik";
// import { useEffect, useState } from "react";
// import { useLocation, useParams } from "react-router-dom";
// import * as Yup from "yup";

// // import InputField from "../form-fields/InputField";
// import Dropdown from "../form/Dropdown";
// import DynamicInputFields from "../form/DynamicInputFields";
// import FileInput from "../form/FileInput";
// import InputField from "../form/InputField";
// import TextAreaField from "../form/TextAreaField";
// import TimeRangePicker from "../form/TimeRangePicker";
// import ToggleSwitch from "../form/ToggleSwitch";

// import { createWebinar, getWebinarById, updateWebinar } from "./upSkillsApi";
// // import { DIR } from "../../constants/dir";
// import { DIR } from "../../utils/constants";

// const WebinarForm = () => {
//   const { id: categoryId } = useParams(); // might be a session-category ID
//   const { search } = useLocation();
//   const query = new URLSearchParams(search);

//   const mode = query.get("type"); // "edit" or "add"
//   const webinarId = query.get("id"); // only exists in edit mode

//   const [loading, setLoading] = useState(false);
//   const [formStatus, setFormStatus] = useState("");

//   const defaultValues = {
//     title: "",
//     description: "",
//     date: "",
//     startTime: "",
//     endTime: "",
//     speakerName: "",
//     speakerBio: "",
//     speakerPhoto: null,
//     platform: "",
//     meetingLink: "",
//     meetingId: "",
//     passcode: "",
//     registrationRequired: true,
//     maxParticipants: "",
//     tags: [""],
//     status: "Upcoming",
//   };

//   const [initialValues, setInitialValues] = useState(defaultValues);

//   // Fetch data only in edit mode
//   useEffect(() => {
//     const fetchWebinar = async () => {
//       if (mode !== "edit" || !webinarId) return;

//       setLoading(true);
//       try {
//         const resp = await getWebinarById(webinarId);
//         const data = resp.data?.data;
//         if (data && data._id) {
//           setInitialValues({
//             title: data.title || "",
//             description: data.description || "",
//             date: data.date ? data.date.split("T")[0] : "",
//             startTime: data.startTime || "",
//             endTime: data.endTime || "",
//             speakerName: data.speakerName || "",
//             speakerBio: data.speakerBio || "",
//             speakerPhoto: data.speakerPhoto
//               ? `${DIR.WEBINAR_SPEAKER_PHOTO}${data.speakerPhoto}`
//               : null,
//             platform: data.platform || "",
//             meetingLink: data.meetingLink || "",
//             meetingId: data.meetingId || "",
//             passcode: data.passcode || "",
//             registrationRequired: data.registrationRequired ?? true,
//             maxParticipants: data.maxParticipants
//               ? String(data.maxParticipants)
//               : "",
//             tags:
//               Array.isArray(data.tags) && data.tags.length > 0
//                 ? data.tags
//                 : [""],
//             status: data.status || "Upcoming",
//           });
//           setFormStatus("");
//         } else {
//           setFormStatus("‚ùå Webinar not found");
//         }
//       } catch (err) {
//         console.error("Error fetching webinar:", err);
//         setFormStatus("‚ùå Failed to load webinar data");
//       } finally {
//         setLoading(false);
//       }
//     };

//     fetchWebinar();
//   }, [mode, webinarId]);

//   const formik = useFormik({
//     initialValues,
//     enableReinitialize: true,
//     validationSchema: Yup.object({
//       title: Yup.string().required("Title is required"),
//       date: Yup.date().required("Date is required"),
//       startTime: Yup.string().required("Start time is required"),
//       speakerName: Yup.string().required("Speaker name is required"),
//       platform: Yup.string().required("Platform is required"),
//       meetingLink: Yup.string()
//         .url("Must be a valid URL")
//         .required("Meeting link is required"),
//     }),
//     onSubmit: async (values, { resetForm, setSubmitting }) => {
//       setSubmitting(true);
//       setFormStatus("");

//       try {
//         const formData = new FormData();

//         // Tags
//         if (Array.isArray(values.tags)) {
//           values.tags
//             .filter((tag) => tag.trim() !== "")
//             .forEach((tag) => formData.append("tags[]", tag));
//         }

//         // Speaker Photo
//         if (values.speakerPhoto instanceof File) {
//           formData.append("speakerPhoto", values.speakerPhoto);
//         }

//         // Scalar fields
//         const scalarFields = [
//           "title",
//           "description",
//           "date",
//           "startTime",
//           "endTime",
//           "speakerName",
//           "speakerBio",
//           "platform",
//           "meetingLink",
//           "meetingId",
//           "passcode",
//           "registrationRequired",
//           "maxParticipants",
//           "status",
//         ];

//         scalarFields.forEach((field) => {
//           const val = values[field];
//           if (val !== undefined && val !== null && val !== "") {
//             formData.append(field, val);
//           }
//         });

//         // Create or Update
//         if (mode === "edit" && webinarId) {
//           await updateWebinar(webinarId, formData);
//           setFormStatus("‚úÖ Webinar updated successfully!");
//         } else {
//           await createWebinar(formData);
//           setFormStatus("‚úÖ Webinar created successfully!");
//           resetForm();
//         }
//       } catch (err) {
//         console.error("Error submitting webinar:", err);
//         setFormStatus("‚ùå Failed to submit webinar.");
//       } finally {
//         setSubmitting(false);
//       }
//     },
//   });
//   return (
//     <form
//       onSubmit={formik.handleSubmit}
//       className="space-y-8 p-8 max-w-4xl mx-auto bg-white shadow-lg rounded-lg border border-gray-200"
//     >
//       <h2 className="text-3xl font-bold mb-6 text-gray-900 text-center">
//         {webinarId ? "Edit Webinar" : "Create Webinar"}
//       </h2>

//       {loading && (
//         <p className="text-center text-gray-500">Loading webinar data...</p>
//       )}
//       {formStatus && (
//         <p
//           className={`text-center text-sm font-medium ${
//             formStatus.startsWith("‚úÖ") ? "text-green-600" : "text-red-600"
//           }`}
//         >
//           {formStatus}
//         </p>
//       )}

//       {/* Title & Description */}
//       <InputField label="Title" name="title" formik={formik} />
//       <TextAreaField label="Description" name="description" formik={formik} />

//       {/* Date & Time */}
//       <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
//         <div>
//           <label className="block text-sm font-medium text-gray-700">
//             Date*
//           </label>
//           <input
//             type="date"
//             name="date"
//             value={formik.values.date}
//             onChange={formik.handleChange}
//             onBlur={formik.handleBlur}
//             className="w-full mt-1 border border-gray-300 rounded-md p-2 focus:ring focus:ring-blue-300"
//           />
//           {formik.touched.date && formik.errors.date && (
//             <span className="text-red-500 text-xs">{formik.errors.date}</span>
//           )}
//         </div>
//         <TimeRangePicker formik={formik} />
//       </div>

//       {/* Platform & Meeting Details */}
//       <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
//         <InputField label="Platform" name="platform" formik={formik} />
//         <InputField
//           label="Meeting Link"
//           name="meetingLink"
//           formik={formik}
//           type="url"
//         />
//         <InputField label="Meeting ID" name="meetingId" formik={formik} />
//         <InputField label="Passcode" name="passcode" formik={formik} />
//       </div>

//       {/* Speaker info */}
//       <InputField label="Speaker Name" name="speakerName" formik={formik} />
//       <TextAreaField label="Speaker Bio" name="speakerBio" formik={formik} />
//       <FileInput label="Speaker Photo" name="speakerPhoto" formik={formik} />

//       {/* Registration & Tags */}
//       <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
//         <InputField
//           label="Max Participants"
//           name="maxParticipants"
//           type="number"
//           formik={formik}
//         />
//         <DynamicInputFields label="Tags" name="tags" formik={formik} />
//       </div>
//       <ToggleSwitch
//         label="Registration Required"
//         name="registrationRequired"
//         checked={formik.values.registrationRequired}
//         onChange={() =>
//           formik.setFieldValue(
//             "registrationRequired",
//             !formik.values.registrationRequired
//           )
//         }
//       />

//       {/* Status */}
//       <Dropdown
//         label="Status"
//         name="status"
//         formik={formik}
//         options={[
//           { _id: "Upcoming", title: "Upcoming" },
//           { _id: "Ongoing", title: "Ongoing" },
//           { _id: "Completed", title: "Completed" },
//         ]}
//       />

//       {/* Submit Button */}
//       <div className="flex justify-center mt-6">
//         <button
//           type="submit"
//           disabled={formik.isSubmitting}
//           className="px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-md shadow disabled:opacity-50"
//         >
//           {formik.isSubmitting
//             ? "Submitting..."
//             : webinarId
//             ? "Update Webinar"
//             : "Create Webinar"}
//         </button>
//       </div>
//     </form>
//   );
// };

// export default WebinarForm;

//  working webinar form


// import { useFormik } from "formik";
// import { useEffect, useState } from "react";
// import { useLocation } from "react-router-dom";
// import * as Yup from "yup";

// import DateRangePicker from "../form/DateRangePicker";
// import DynamicInputFields from "../form/DynamicInputFields";
// import InputField from "../form/InputField";
// import TextAreaField from "../form/TextAreaField";
// import ToggleSwitch from "../form/ToggleSwitch";

// import {
//   createWorkshop,
//   fetchWorkshopById,
//   updateWorkshop,
// } from "./upSkillsApi";

// const useQuery = () => new URLSearchParams(useLocation().search);

// const formatDateForInput = (isoString) => {
//   if (!isoString) return "";
//   return new Date(isoString).toISOString().split("T")[0];
// };

// const WorkshopForm = () => {
//   const query = useQuery();
//   const id = query.get("id");

//   const [initialData, setInitialData] = useState(null);
//   const [loading, setLoading] = useState(Boolean(id));

//   useEffect(() => {
//     if (!id) return;

//     const fetchData = async () => {
//       setLoading(true);
//       try {
//         const data = await fetchWorkshopById(id);
//         if (data) {
//           const safeData = {
//             ...data,
//             prerequisites:
//               Array.isArray(data.prerequisites) && data.prerequisites.length > 0
//                 ? data.prerequisites
//                 : [""],
//             topics:
//               Array.isArray(data.topics) && data.topics.length > 0
//                 ? data.topics
//                 : [""],
//             instructors:
//               Array.isArray(data.instructors) && data.instructors.length > 0
//                 ? data.instructors.map((ins) => ({
//                     name: ins.name ?? "",
//                     designation: ins.designation ?? "",
//                   }))
//                 : [{ name: "", designation: "" }],
//             contact: {
//               email: data.contact?.email ?? "",
//               phone: data.contact?.phone ?? "",
//             },
//             fees: data.fees ?? "",
//             startDate: formatDateForInput(data.startDate),
//             endDate: formatDateForInput(data.endDate),
//             certification: data.certification ?? false,
//             status: data.status ?? "Past",
//           };
//           setInitialData(safeData);
//         }
//       } catch (error) {
//         console.error("Failed to fetch workshop:", error);
//       } finally {
//         setLoading(false);
//       }
//     };

//     fetchData();
//   }, [id]);

//   const validationSchema = Yup.object({
//     title: Yup.string().required("Title is required"),
//     description: Yup.string().required("Description is required"),
//     fees: Yup.number()
//       .min(0, "Fees must be positive")
//       .required("Fees is required"),
//     instructors: Yup.array().of(
//       Yup.object({
//         name: Yup.string().required("Instructor name is required"),
//         designation: Yup.string().required("Designation is required"),
//       })
//     ),
//   });

//   const formik = useFormik({
//     enableReinitialize: true,
//     initialValues: initialData || {
//       title: "",
//       description: "",
//       startDate: "",
//       endDate: "",
//       duration: "",
//       location: "",
//       prerequisites: [""],
//       topics: [""],
//       instructors: [{ name: "", designation: "" }],
//       registrationLink: "",
//       fees: "",
//       certification: false,
//       contact: {
//         email: "",
//         phone: "",
//       },
//       status: "Past",
//     },
//     validationSchema,
//     // onSubmit: async (values, { setSubmitting, setStatus, resetForm }) => {
//     //   try {
//     //     const payload = {
//     //       ...values,
//     //       fees: Number(values.fees),
//     //       prerequisites: values.prerequisites.filter((p) => p.trim() !== ''),
//     //       topics: values.topics.filter((t) => t.trim() !== ''),
//     //       instructors: values.instructors.filter(
//     //         (ins) => ins.name.trim() !== '' || ins.designation.trim() !== ''
//     //       ),
//     //     };

//     //     if (id) {
//     //       await updateWorkshop(id, payload);
//     //       setStatus('Workshop updated successfully!');
//     //     } else {
//     //       await createWorkshop(payload);
//     //       setStatus('Workshop created successfully!');
//     //       resetForm();
//     //     }
//     //   } catch (error) {
//     //     console.error('Submission error:', error);
//     //     setStatus('Failed to submit workshop.');
//     //   } finally {
//     //     setSubmitting(false);
//     //   }
//     // },

//     onSubmit: async (values, { setSubmitting, setStatus }) => {
//       try {
//         const payload = {
//           ...values,
//           fees: Number(values.fees),
//           prerequisites: values.prerequisites.filter((p) => p.trim() !== ""),
//           topics: values.topics.filter((t) => t.trim() !== ""),
//           instructors: values.instructors.filter(
//             (ins) => ins.name.trim() !== "" || ins.designation.trim() !== ""
//           ),
//         };

//         console.log("Submitting payload:", payload);

//         if (id) {
//           const result = await updateWorkshop(id, payload);
//           console.log("Update result:", result);
//           setStatus("Workshop updated successfully!");
//         } else {
//           await createWorkshop(payload);
//           setStatus("Workshop created successfully!");
//         }
//       } catch (error) {
//         console.error("Error during submission:", error);
//         setStatus("Failed to submit workshop: " + error.message);
//       } finally {
//         setSubmitting(false);
//       }
//     },
//   });

//   const addInstructor = () => {
//     formik.setFieldValue("instructors", [
//       ...formik.values.instructors,
//       { name: "", designation: "" },
//     ]);
//   };

//   const removeInstructor = (index) => {
//     const updated = [...formik.values.instructors];
//     updated.splice(index, 1);
//     formik.setFieldValue("instructors", updated);
//   };

//   if (loading) {
//     return (
//       <div className="flex justify-center items-center h-40 text-gray-500 font-semibold">
//         Loading workshop data...
//       </div>
//     );
//   }

//   return (
//     <form
//       onSubmit={formik.handleSubmit}
//       className="max-w-5xl mx-auto bg-white shadow-xl rounded-xl border border-gray-300 p-8 space-y-10"
//     >
//       <h2 className="text-3xl font-bold text-gray-900 border-b border-gray-200 pb-4 mb-8">
//         {id ? "Edit Workshop" : "Create Workshop"}
//       </h2>

//       {/* Basic Info */}
//       <section className="space-y-6">
//         <h3 className="text-xl font-semibold text-gray-800 border-b border-gray-200 pb-2 mb-4">
//           Basic Information
//         </h3>
//         <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
//           <InputField label="Title" name="title" formik={formik} />
//           <InputField label="Duration" name="duration" formik={formik} />
//           <InputField label="Location" name="location" formik={formik} />
//           <InputField
//             label="Registration Link"
//             name="registrationLink"
//             formik={formik}
//           />
//           <InputField label="Fees" name="fees" type="number" formik={formik} />
//         </div>
//         <TextAreaField label="Description" name="description" formik={formik} />
//       </section>

//       {/* Schedule */}
//       <section className="space-y-6">
//         <h3 className="text-xl font-semibold text-gray-800 border-b border-gray-200 pb-2 mb-4">
//           Schedule
//         </h3>
//         <DateRangePicker formik={formik} />
//       </section>

//       {/* Workshop Content */}
//       <section className="space-y-6">
//         <h3 className="text-xl font-semibold text-gray-800 border-b border-gray-200 pb-2 mb-4">
//           Workshop Content
//         </h3>
//         <DynamicInputFields
//           label="Prerequisites"
//           name="prerequisites"
//           formik={formik}
//         />
//         <DynamicInputFields label="Topics" name="topics" formik={formik} />
//       </section>

//       {/* Instructors */}
//       <section className="space-y-6">
//         <h3 className="text-xl font-semibold text-gray-800 border-b border-gray-200 pb-2 mb-4">
//           Instructors
//         </h3>

//         {formik.values.instructors.map((instructor, index) => {
//           const nameField = `instructors.${index}.name`;
//           const designationField = `instructors.${index}.designation`;

//           const nameError =
//             formik.touched.instructors?.[index]?.name &&
//             formik.errors.instructors?.[index]?.name;
//           const designationError =
//             formik.touched.instructors?.[index]?.designation &&
//             formik.errors.instructors?.[index]?.designation;

//           return (
//             <div
//               key={index}
//               className="grid grid-cols-1 md:grid-cols-[1fr_1fr_auto] gap-4 items-center"
//             >
//               <div>
//                 <input
//                   type="text"
//                   name={nameField}
//                   placeholder="Name"
//                   value={instructor.name ?? ""}
//                   onChange={formik.handleChange}
//                   onBlur={formik.handleBlur}
//                   className={`w-full px-4 py-2 rounded-lg border outline-none bg-white transition ${
//                     nameError
//                       ? "border-red-500 focus:ring-red-300"
//                       : "border-blue-400 focus:ring-blue-300"
//                   }`}
//                 />
//                 {nameError && (
//                   <div className="text-red-600 text-sm mt-1">{nameError}</div>
//                 )}
//               </div>

//               <div>
//                 <input
//                   type="text"
//                   name={designationField}
//                   placeholder="Designation"
//                   value={instructor.designation ?? ""}
//                   onChange={formik.handleChange}
//                   onBlur={formik.handleBlur}
//                   className={`w-full px-4 py-2 rounded-lg border outline-none bg-white transition ${
//                     designationError
//                       ? "border-red-500 focus:ring-red-300"
//                       : "border-blue-400 focus:ring-blue-300"
//                   }`}
//                 />
//                 {designationError && (
//                   <div className="text-red-600 text-sm mt-1">
//                     {designationError}
//                   </div>
//                 )}
//               </div>

//               <button
//                 type="button"
//                 onClick={() => removeInstructor(index)}
//                 className="text-sm text-red-600 hover:underline"
//                 disabled={formik.values.instructors.length === 1}
//               >
//                 Remove
//               </button>
//             </div>
//           );
//         })}

//         <button
//           type="button"
//           onClick={addInstructor}
//           className="text-blue-600 text-sm mt-2 hover:underline"
//         >
//           + Add Instructor
//         </button>
//       </section>

//       {/* Certification Toggle */}
//       <section className="space-y-6">
//         <h3 className="text-xl font-semibold text-gray-800 border-b border-gray-200 pb-2 mb-4">
//           Certification
//         </h3>
//         <ToggleSwitch
//           label="Will this workshop offer a certification?"
//           name="certification"
//           formik={formik}
//         />
//       </section>

//       {/* Contact Info */}
//       <section className="space-y-6">
//         <h3 className="text-xl font-semibold text-gray-800 border-b border-gray-200 pb-2 mb-4">
//           Contact Information
//         </h3>
//         <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
//           <InputField
//             label="Contact Email"
//             name="contact.email"
//             formik={formik}
//           />
//           <InputField
//             label="Contact Phone"
//             name="contact.phone"
//             formik={formik}
//           />
//         </div>
//       </section>

//       {/* Status Selection */}
//       <section className="space-y-6">
//         <h3 className="text-xl font-semibold text-gray-800 border-b border-gray-200 pb-2 mb-4">
//           Workshop Status
//         </h3>
//         <div className="flex gap-6">
//           {["Past", "Upcoming", "Ongoing"].map((status) => (
//             <label key={status} className="inline-flex items-center space-x-2">
//               <input
//                 type="radio"
//                 name="status"
//                 value={status}
//                 checked={formik.values.status === status}
//                 onChange={formik.handleChange}
//               />
//               <span>{status}</span>
//             </label>
//           ))}
//         </div>
//       </section>

//       {/* Submit Button and Status */}
//       <div className="pt-6 border-t border-gray-200">
//         {formik.status && (
//           <div className="mb-4 text-green-600 font-medium">{formik.status}</div>
//         )}
//         <button
//           type="submit"
//           disabled={formik.isSubmitting}
//           className="bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition"
//         >
//           {formik.isSubmitting
//             ? id
//               ? "Updating..."
//               : "Creating..."
//             : id
//             ? "Update Workshop"
//             : "Create Workshop"}
//         </button>
//       </div>
//     </form>
//   );
// };

// export default WorkshopForm;
// working workshop form 


// import { useFormik } from "formik";
// import { useEffect } from "react";
// import { useLocation } from "react-router-dom";
// import * as Yup from "yup";
// import apiClient from "../../api/axiosConfig";
// import DateRangePicker from "../form/DateRangePicker";
// import Dropdown from "../form/Dropdown";
// import DynamicInputFields from "../form/DynamicInputFields";
// import InputField from "../form/InputField";
// import TextAreaField from "../form/TextAreaField";
// import ToggleSwitch from "../form/ToggleSwitch";

// const InternshipSessionForm = () => {


// const location = useLocation();
// const queryParams = new URLSearchParams(location.search);
// const sessionId = queryParams.get("id");
// const isEditMode = queryParams.get("type") === "edit";

//   const formik = useFormik({
//     initialValues: {
//       title: "",
//       description: "",
//       startDate: "",
//       endDate: "",
//       duration: "",
//       mode: "",
//       location: "",
//       topics: [""], // ‚úÖ now as array
//       capacity: "",
//       fees: {
//         amount: "",
//         // currency: "",
//         refundPolicy: "",
//       },
//       certification: false,
//       status: "",
//     },
//     validationSchema: Yup.object({
//       // add validations if needed
//     }),
 
//     onSubmit: async (values, { resetForm, setSubmitting, setStatus }) => {
//   try {
//     const payload = {
//       ...values,
//       capacity: Number(values.capacity),
//       fees: {
//         ...values.fees,
//         amount: Number(values.fees.amount),
//       },
//       topics: values.topics.filter((t) => t.trim() !== ""),
//     };

//     if (isEditMode && sessionId) {
//       await apiClient.put(`/api/internship-sessions/${sessionId}`, payload);
//       setStatus("‚úÖ Internship session updated successfully!");
//     } else {
//       await apiClient.post("/api/internship-sessions", payload);
//       setStatus("‚úÖ Internship session created successfully!");
//       resetForm();
//     }
//   } catch (err) {
//     console.error("Error submitting internship session:", err);
//     setStatus("‚ùå Failed to submit internship session.");
//   } finally {
//     setSubmitting(false);
//   }
// }

//   });

//   useEffect(() => {
//   const fetchInternshipSession = async () => {
//     if (!isEditMode || !sessionId) return;

//     try {
//       const response = await apiClient.get(`/api/internship-sessions/${sessionId}`);
//       const data = response.data?.data;

//       if (data && data._id) {
//         formik.setValues({
//           title: data.title || "",
//           description: data.description || "",
//           startDate: data.startDate?.split("T")[0] || "",
//           endDate: data.endDate?.split("T")[0] || "",
//           duration: data.duration || "",
//           mode: data.mode || "",
//           location: data.location || "",
//           topics: Array.isArray(data.topics) ? data.topics : [""],
//           capacity: data.capacity?.toString() || "",
//           fees: {
//             amount: data.fees?.amount?.toString() || "",
//             // currency: data.fees?.currency || "",
//             refundPolicy: data.fees?.refundPolicy || "",
//           },
//           certification: data.certification ?? false,
//           status: data.status || "",
//         });
//       } else {
//         console.warn("Session not found");
//         formik.setStatus("‚ùå Internship session not found.");
//       }
//     } catch (error) {
//       console.error("Failed to fetch internship session:", error);
//       formik.setStatus("‚ùå Failed to fetch session data.");
//     }
//   };

//   fetchInternshipSession();
// }, [isEditMode, sessionId]);


//   return (
//     <form
//       onSubmit={formik.handleSubmit}
//       className="space-y-10 p-8 max-w-5xl mx-auto bg-white shadow-xl rounded-xl border border-gray-300"
//     >
//       <h2 className="text-3xl font-bold text-gray-900 border-b border-gray-200 pb-4 mb-8">
//         Create Internship Session
//       </h2>

//       {/* Section 1: Basic Information */}
//       <section className="space-y-6">
//         <h3 className="text-xl font-semibold text-gray-800 border-b border-gray-200 pb-2 mb-4">
//           Basic Information
//         </h3>
//         <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
//           <InputField
//             label="Title"
//             name="title"
//             formik={formik}
//             className="focus:ring-2 focus:ring-blue-400 transition"
//           />
//           <InputField
//             label="Duration (in months)"
//             name="duration"
//             formik={formik}
//             className="focus:ring-2 focus:ring-blue-400 transition"
//           />
//           <InputField
//             label="Location"
//             name="location"
//             formik={formik}
//             className="focus:ring-2 focus:ring-blue-400 transition"
//           />
//           <InputField
//             label="Capacity"
//             name="capacity"
//             type="number"
//             formik={formik}
//             className="focus:ring-2 focus:ring-blue-400 transition"
//           />
//         </div>
//       </section>

//       {/* Section 2: Fees & Payment */}
//       <section className="space-y-6">
//         <h3 className="text-xl font-semibold text-gray-800 border-b border-gray-200 pb-2 mb-4">
//           Fees & Payment
//         </h3>
//         <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
//           <InputField
//             label="Amount"
//             name="fees.amount"
//             type="number"
//             formik={formik}
//             className="focus:ring-2 focus:ring-blue-400 transition"
//           />
//           {/* <InputField
//             label="Currency"
//             name="fees.currency"
//             formik={formik}
//             className="focus:ring-2 focus:ring-blue-400 transition"
//           /> */}
//           <InputField
//             label="Refund Policy"
//             name="fees.refundPolicy"
//             formik={formik}
//             className="focus:ring-2 focus:ring-blue-400 transition"
//           />
//         </div>
//       </section>

//       {/* Section 3: Session Details */}
//       <section className="space-y-6">
//         <h3 className="text-xl font-semibold text-gray-800 border-b border-gray-200 pb-2 mb-4">
//           Session Details
//         </h3>

// <div className="w-132">
//         <Dropdown
//           label="Mode"
//           name="mode"
//           formik={formik}
//           options={[
//             { _id: "Online", title: "Online" },
//             { _id: "Offline", title: "Offline" },
//             { _id: "Hybrid", title: "Hybrid" },
//           ]}
//           className="focus:ring-2 focus:ring-blue-400 transition"
//         />
//         </div>

//         <TextAreaField
//           label="Description"
//           name="description"
//           formik={formik}
//           className="focus:ring-2 focus:ring-blue-400 transition"
//         />

//         <DateRangePicker formik={formik} />

//         <DynamicInputFields
//           formik={formik}
//           name="topics"
//           label="Topics"
//           className=""
//         />
//       </section>

//       {/* Section 4: Additional Settings */}
//       <section className="space-y-6">
//         <h3 className="text-xl font-semibold text-gray-800 border-b border-gray-200 pb-2 mb-4">
//           Additional Settings
//         </h3>

// <div className="w-132">
//         <Dropdown
//           label="Status"
//           name="status"
//           formik={formik}
//           options={[
//             { _id: "Upcoming", title: "Upcoming" },
//             { _id: "Ongoing", title: "Ongoing" },
//             { _id: "Past", title: "Past" },
//           ]}
//           className="focus:ring-2 focus:ring-blue-400 transition"
//         />
//         </div>

//         <ToggleSwitch
//           label="Certification Available"
//           name="certification"
//           checked={formik.values.certification}
//           onChange={() =>
//             formik.setFieldValue("certification", !formik.values.certification)
//           }
//           className=""
//         />
//       </section>

//       {/* Submit */}
//       <button
//         type="submit"
//         disabled={formik.isSubmitting}
//         className="w-full md:w-auto mt-8 px-8 py-4 bg-blue-600 hover:bg-blue-700 focus:ring-4 focus:ring-blue-300 transition text-white rounded-xl font-semibold shadow-lg disabled:opacity-50 disabled:cursor-not-allowed"
//       >
//         {formik.isSubmitting ? "Submitting..." : "Create Session"}
//       </button>

//       {formik.status && (
//         <p className="text-sm mt-4 text-gray-600 italic">{formik.status}</p>
//       )}
//     </form>
//   );
// };

// export default InternshipSessionForm;
//  working intership- session form 

   {/* Admin Routes */}
          {/* <Route element={<PrivateRoute roles={["admin"]} />}>
            <Route path="/admin/dashboard" element={<AdminDashboardPage />} />
            <Route path="/admin/users" element={<AdminUserManagementPage />} />
            <Route
              path="/admin/branches"
              element={<AdminBranchManagementPage />}
            />
            <Route
              path="/admin/courses"
              element={<AdminCourseManagementPage />}
            />
               <Route path="/admin/courses" element={<CourseTable />} />
        <Route path="/admin/courses/new" element={<CourseForm />} />
        <Route path="/admin/courses/edit/:id" element={<CourseForm />} />
            <Route
              path="/admin/course/:courseId/content"
              element={<CourseContentManagementPage />}
            />
            <Route
              path="/admin/enrollments"
              element={<AdminEnrollmentManagementPage />}
            />
            <Route path="/admin/tests" element={<TestManagementPage />} />
            <Route path="/admin/tests/create" element={<CreateTestPage />} />
            <Route path="/admin/results" element={<AdminAllResultsPage />} />
            <Route
              path="/admin/book-session"
              element={<SessionCategoryForm />}
            />
            <Route
              path="/admin/trainer-management"
              element={<TrainerTable />}
            />
            <Route
              path="/admin/session-category/:id/manage"
              element={<ManageSessionCategory />}
            />
            <Route
              path="/admin/session-category/:id/manage/event"
              element={<EventTablePage />}
            />
            <Route path="/profile" element={<ProfilePage />} />
          </Route> */}
//  application.jsx admin route 

// import { useEffect, useState } from "react";
// import { useNavigate } from "react-router";
// import ScrollableTable from "../../../components/table/ScrollableTable";
// import { BASE_URL } from "../../../utils/constants";
// import { approveTrainer, deleteTrainer, fetchAllTrainers } from "./trainerApi";
// // import {
// //   fetchAllTrainers,
// //   approveTrainer,
// //   deleteTrainer,
// // } from "../../../services/trainerService"; // Adjust path accordingly

// /**
//  * TrainerTable Component
//  *
//  * Displays a list of trainers with options to approve, edit, view, or delete.
//  * Utilizes a ScrollableTable component for displaying data in a scrollable area.
//  * 
//  * API interactions are abstracted to a service layer for cleaner separation of concerns.
//  */
// const TrainerTable = () => {
//   const [trainers, setTrainers] = useState([]);
//   const [loading, setLoading] = useState(false);
//   const [error, setError] = useState("");
//   const navigate = useNavigate();

//   /**
//    * Fetches trainer profiles from the backend.
//    * Handles loading and error states accordingly.
//    */
//   const loadTrainers = async () => {
//     setLoading(true);
//     setError("");

//     try {
//       const data = await fetchAllTrainers();
//       setTrainers(data);
//     } catch (err) {
//       console.error("Failed to fetch trainers:", err);
//       setError("Failed to fetch trainers.");
//     } finally {
//       setLoading(false);
//     }
//   };

//   // Load trainers on component mount
//   useEffect(() => {
//     loadTrainers();
//   }, []);

//   /**
//    * Approves a trainer and refreshes the trainers list.
//    * @param {string} trainerId
//    */
//   const handleApprove = async (trainerId) => {
//     try {
//       await approveTrainer(trainerId);
//       await loadTrainers();
//     } catch (err) {
//       console.error("Error approving trainer:", err);
//       alert("Failed to approve trainer.");
//     }
//   };

//   /**
//    * Deletes a trainer after user confirmation and refreshes the trainers list.
//    * @param {string} trainerId
//    */
//   const handleDelete = async (trainerId) => {
//     // if (!window.confirm("Are you sure you want to delete this trainer?")) return;

//     if (typeof window !== "undefined") {
//     const confirmed = window.confirm("Are you sure you want to delete this trainer?");
//     if (!confirmed) return;


//     try {
//       await deleteTrainer(trainerId);
//       await loadTrainers();
//     } catch (err) {
//       console.error("Error deleting trainer:", err);
//       alert("Failed to delete trainer.");
//     }
//   }
//   };

//   // Define table columns including custom renderers for profile images and actions
// const columns = [
//   {
//     header: "Profile",
//     accessor: (row) => (
//       row.profilePhotoTrainer ? (
//         <img
//           src={`${BASE_URL}/uploads/trainer/trainer-profilephoto/${row.profilePhotoTrainer}`}
//           alt={row.fullName}
//           className="w-12 h-12 rounded-full object-cover"
//         />
//       ) : (
//         <div className="w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center text-gray-500">
//           N/A
//         </div>
//       )
//     ),
//   },
//   { header: "Name", accessor: "fullName" },
//   { header: "Title", accessor: "title" },
//   { header: "Qualification", accessor: "highestQualification" },
//   {
//     header: "Experience",
//     accessor: "totalExperience",
//   },
//   {
//     header: "Email",
//     accessor: (row) => (
//       <a href={`mailto:${row.email}`} className="text-blue-600 hover:underline">
//         {row.email}
//       </a>
//     ),
//   },
//   {
//     header: "Mobile No",
//     accessor: "mobileNo",
//   },
//   {
//     header: "Location",
//     accessor: (row) => {
//       const { add1, add2, taluka, dist, state, pincode } = row.address || {};
//       return (
//         <div title={`${add1}, ${add2}, ${taluka}, ${dist}, ${state} - ${pincode}`}>
//           {add1}, {add2}, {taluka}
//         </div>
//       );
//     },
//   },
//   {
//     header: "Resume",
//     accessor: (row) =>
//       row.resume ? (
//         <a
//           href={`${BASE_URL}/uploads/trainer/trainer-resume/${row.resume}`}
//           target="_blank"
//           rel="noopener noreferrer"
//           className="text-blue-700 underline text-sm"
//           download
//         >
//           Download
//         </a>
//       ) : (
//         "N/A"
//       ),
//   },
//   {
//     header: "LinkedIn",
//     accessor: (row) =>
//       row.linkedinProfile ? (
//         <a
//           href={row.linkedinProfile.trim()}
//           target="_blank"
//           rel="noopener noreferrer"
//           className="text-blue-700 underline text-sm"
//         >
//           Profile
//         </a>
//       ) : (
//         "N/A"
//       ),
//   },
//   {
//     header: "Certifications",
//     accessor: (row) =>
//       row.certifications && row.certifications.length > 0
//         ? `${row.certifications.length} certifications`
//         : "None",
//   },
//   {
//     header: "Status",
//     accessor: (row) =>
//       row.isApproved || row.approvalStatus === "approved" ? (
//         <span className="text-green-600 font-medium">Approved</span>
//       ) : (
//         <button
//           onClick={() => handleApprove(row._id)}
//           className="px-3 py-1 bg-green-500 text-white text-xs rounded hover:bg-green-600"
//         >
//           Approve
//         </button>
//       ),
//   },
//   {
//     header: "Actions",
//     accessor: (row) => (
//       <div className="flex space-x-2">
//         <button
//           onClick={() => alert(`Viewing: ${row.fullName}`)}
//           className="text-blue-600 hover:underline text-sm"
//         >
//           View
//         </button>

//         <button
//           onClick={() => navigate(`/admin/trainers/update/${row._id}`)}
//           className="text-yellow-600 hover:underline text-sm"
//         >
//           Edit
//         </button>

//         <button
//           onClick={() => handleDelete(row._id)}
//           className="text-red-600 hover:underline text-sm"
//         >
//           Delete
//         </button>
//       </div>
//     ),
//   },
// ];



//   return (
//     <div className="p-6 bg-gradient-to-r from-blue-100 via-blue-200 to-pink-100">
//       <h2 className="text-2xl font-bold text-black flex justify-center text-center mb-4">All Trainers</h2>

//       {loading ? (
//         <p>Loading...</p>
//       ) : error ? (
//         <p className="text-red-500">{error}</p>
//       ) : (
//         <ScrollableTable columns={columns} data={trainers} maxHeight="500px" />
//       )}
//     </div>
//   );
// };

// export default TrainerTable;
// working trainer table 



// import React from "react";

// const ScrollableTable = ({ columns = [], data = [], maxHeight = "600px" }) => {
//   return (
//     <div className="w-full max-w-7xl mx-auto bg-white rounded-xl shadow-lg border-2 border-indigo-300 overflow-hidden">
//       {/* Scrollable container */}
//       <div
//         className="overflow-y-auto scrollbar-thin scrollbar-thumb-indigo-500 scrollbar-track-indigo-100"
//         style={{ maxHeight }}
//       >
//         <table className="w-full border-collapse text-sm text-left min-w-full">
//           {/* Sticky Header */}
//           <thead className="sticky top-0 bg-indigo-50 text-indigo-900 z-10 shadow-sm">
//             <tr>
//               {columns.map((col, index) => (
//                 <th
//                   key={index}
//                   className="px-6 py-4 font-semibold text-sm uppercase tracking-wider"
//                 >
//                   {col.header}
//                 </th>
//               ))}
//             </tr>
//           </thead>

//           {/* Table Body */}
//           <tbody className="divide-y divide-indigo-100">
//             {data.length > 0 ? (
//               data.map((row, rowIndex) => (
//                 <tr
//                   key={rowIndex}
//                   className={`${
//                     rowIndex % 2 === 0 ? "bg-white" : "bg-indigo-50"
//                   } hover:bg-indigo-100 transition-colors duration-300`}
//                 >
//                   {columns.map((col, colIndex) => (
//                     <td
//                       key={colIndex}
//                       className={`px-6 py-4 text-indigo-700 whitespace-nowrap ${
//                         colIndex === 0
//                           ? "font-semibold text-indigo-900"
//                           : "font-normal"
//                       }`}
//                     >
//                       {typeof col.accessor === "function"
//                         ? col.accessor(row)
//                         : row[col.accessor]}
//                     </td>
//                   ))}
//                 </tr>
//               ))
//             ) : (
//               <tr>
//                 <td
//                   colSpan={columns.length}
//                   className="px-6 py-8 text-center text-indigo-400 italic"
//                 >
//                   No data available
//                 </td>
//               </tr>
//             )}
//           </tbody>
//         </table>
//       </div>
//     </div>
//   );
// };

// export default ScrollableTable;

// scrollable table component 

// import ReactDOM from "react-dom";

// const Modal = ({ isOpen, onClose, title, children }) => {
//   if (!isOpen) return null;

//   return ReactDOM.createPortal(
//     <div className="fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-lg bg-opacity-50">
//       <div className="bg-white rounded-lg shadow-xl w-full max-w-lg relative p-6">
//         <button
//           onClick={onClose}
//           className="absolute top-2 right-3 text-gray-500 hover:text-gray-700 text-lg font-bold"
//         >
//           √ó
//         </button>
//         {title && <h2 className="text-lg font-semibold mb-4">{title}</h2>}
//         <div className="overflow-y-auto max-h-[70vh]">
//           {children}
//         </div>
//       </div>
//     </div>,
//     document.body
//   );
// };

// export default Modal;

// Modal component 

// import { useState } from "react";
// import { NavLink } from "react-router-dom";
// import {
//   FaBook,
//   FaChalkboardTeacher,
//   FaClipboardList,
//   FaUsers,
//   FaVideo,
//   FaImage,
//   FaCogs,
//   FaChevronDown,
//   FaChevronUp,
// } from "react-icons/fa";
// import { HiOutlineUserGroup } from "react-icons/hi";

// const menuItems = [
//   {
//     label: "Dashboard",
//     path: "/admin/dashboard",
//     icon: <FaUsers />,
//   },
//   {
//     label: "User Management",
//     path: "/admin/users",
//     icon: <FaUsers />,
//   },
//   {
//     label: "Book Session - Upskilling",
//     path: "/admin/book-session",
//     icon: <FaChalkboardTeacher />,
//   },
//   {
//     label: "Course Management",
//     icon: <FaBook />,
//     children: [
//       { label: "Courses", icon: <FaBook />, path: "/admin/courses" },
//       // { label: "Videos", icon: <FaVideo />, path: "/admin/add-course-videos" },
//         {
//         label: "Lectures",
//         icon: <FaVideo />,
//         children: [
//           {
//             label: "Add Lectures",
//             icon: <FaBook />,
//             path: "/admin/add-course-videos",
//           },
//           {
//             label: "Manage Lectures",
//             icon: <FaBook />,
//             path: "/admin/manage-course-videos",
//           },
//         ],
//       },

//       {
//         label: "Curriculum",
//         icon: <FaBook />,
//         children: [
//           {
//             label: "Add Curriculum",
//             icon: <FaBook />,
//             path: "/admin/add-curriculum",
//           },
//           {
//             label: "Manage Curriculum",
//             icon: <FaBook />,
//             path: "/admin/manage-curriculum",
//           },
//         ],
//       },
//           {
//         label: "Batches",
//         icon: <FaBook />,
//         children: [
//           {
//             label: "Add Batch",
//             icon: <FaBook />,
//             path: "/admin/add-batch",
//           },
//           {
//             label: "Manage Batches",
//             icon: <FaBook />,
//             path: "/admin/manage-batches",
//           },
//         ],
//       },
//         {
//         label: "Assignments",
//         icon: <FaBook />,
//         children: [
//           {
//             label: "Add Assignments",
//             icon: <FaBook />,
//             path: "/admin/add-assignment",
//           },
//           {
//             label: "Manage Assignments",
//             icon: <FaBook />,
//             path: "/admin/manage-assignments",
//           },
//         ],
//       },

//       {
//         label: "Notes",
//         icon: <FaVideo />,
//         children: [
//           {
//             label: "Add Notes",
//             icon: <FaBook />,
//             path: "/admin/add-notes",
//           },
//           {
//             label: "Manage Notes",
//             icon: <FaBook />,
//             path: "/admin/manage-notes",
//           },
//         ],
//       },
//       // { label: "Batches", icon: <FaUsers />, path: "/admin/manage-batches" },
//       { label: "Images", icon: <FaImage />, path: "/admin/courses/1/images" },
//       {
//         label: "Settings",
//         icon: <FaCogs />,
//         path: "/admin/courses/1/settings",
//       },
//     ],
//   },
//   {
//     label: "Enrollment Overview",
//     path: "/admin/enrollments",
//     icon: <FaClipboardList />,
//   },
//   {
//     label: "Trainer Management",
//     path: "/admin/trainer-management",
//     icon: <HiOutlineUserGroup />,
//   },
// ];

// const SidebarMenuItem = ({ item, expandedMenus, toggleSubmenu, level = 0 }) => {
//   const isActiveMenu = expandedMenus.includes(item.label);
//   const paddingLeft = `${level * 16 + 16}px`;

//   if (item.children) {
//     return (
//       <div>
//         <button
//           onClick={() => toggleSubmenu(item.label)}
//           className={`w-full flex items-center justify-between gap-3 py-2 rounded-lg text-sm font-medium transition`}
//           style={{ paddingLeft }}
//         >
//           <div className="flex items-center gap-3">
//             <span className="text-lg">{item.icon}</span>
//             {item.label}
//           </div>
//           {isActiveMenu ? <FaChevronUp /> : <FaChevronDown />}
//         </button>

//         {isActiveMenu && (
//           <div className="mt-1 flex flex-col gap-1">
//             {item.children.map((child, idx) => (
//               <SidebarMenuItem
//                 key={idx}
//                 item={child}
//                 expandedMenus={expandedMenus}
//                 toggleSubmenu={toggleSubmenu}
//                 level={level + 1}
//               />
//             ))}
//           </div>
//         )}
//       </div>
//     );
//   }

//   return (
//     <NavLink
//       to={item.path}
//       className={({ isActive }) =>
//         `flex items-center gap-3 py-2 rounded-lg text-sm font-medium transition ${
//           isActive
//             ? "bg-indigo-100 text-indigo-700"
//             : "text-gray-700 hover:bg-gray-100"
//         }`
//       }
//       style={{ paddingLeft }}
//     >
//       <span className="text-lg">{item.icon}</span>
//       {item.label}
//     </NavLink>
//   );
// };

// const AdminSidebar = () => {
//   const [expandedMenus, setExpandedMenus] = useState([]);

//   const toggleSubmenu = (label) => {
//     setExpandedMenus((prev) =>
//       prev.includes(label)
//         ? prev.filter((l) => l !== label)
//         : [...prev, label]
//     );
//   };

//   return (
//     <div className="w-64 min-h-screen bg-white border-r shadow-sm">
//       <div className="px-6 py-5 border-b">
//         <h2 className="text-xl font-bold text-indigo-600">Admin Panel</h2>
//       </div>

//       <nav className="mt-4 flex flex-col gap-1 px-2">
//         {menuItems.map((item, index) => (
//           <SidebarMenuItem
//             key={index}
//             item={item}
//             expandedMenus={expandedMenus}
//             toggleSubmenu={toggleSubmenu}
//           />
//         ))}
//       </nav>
//     </div>
//   );
// };

// export default AdminSidebar;
// admin sidemenu 

// import { useState } from "react";
// import { Link, useNavigate } from "react-router-dom";
// import { useAuth } from "../../contexts/AuthContext.jsx";
// const RegisterForm = () => {
//   const [formData, setFormData] = useState({
//     firstName: "",
//     lastName: "",
//     email: "",
//     password: "",
//     confirmPassword: "",
//     // branchId: "",
//   });
//   const [branches, setBranches] = useState([]);
//   // const [idCardImage, setIdCardImage] = useState(null);
//   // const [faceImage, setFaceImage] = useState(null);

//   const [error, setError] = useState("");
//   const [loading, setLoading] = useState(false);
//   const { register } = useAuth();
//   const navigate = useNavigate();

//   // useEffect(() => {
//   //   const loadBranches = async () => {
//   //     try {
//   //       const fetchedBranches = await fetchBranches();
//   //       setBranches(fetchedBranches || []);
//   //     } catch (err) {
//   //       setError("Failed to load branches.");
//   //     }
//   //   };
//   //   loadBranches();
//   // }, []);

//   const { firstName, lastName, email, password, confirmPassword } =
//     formData;

//   const onChange = (e) =>
//     setFormData({ ...formData, [e.target.name]: e.target.value });

//   // const handleIdCardChange = (e) => {
//   //     if (e.target.files && e.target.files[0]) {
//   //         setIdCardImage(e.target.files[0]);
//   //     }
//   // };

//   // const handleFaceCaptured = (imageDataUrl) => {
//   //     setFaceImage(imageDataUrl);
//   // };

//   const handleSubmit = async (e) => {
//     e.preventDefault();
//     setError("");

//     if (password !== confirmPassword) return setError("Passwords do not match");
//     // if (password.length < 6)
//     //   return setError("Password must be at least 6 characters long.");
//     // if (!branchId) return setError("Please select your branch.");
//     // if (!idCardImage) return setError('Please upload your ID card.');
//     // if (!faceImage) return setError('Please capture your face image.');

//     setLoading(true);

//   const registrationData = {
//   firstName,
//   lastName,
//   email,
//   password,
// };

//     registrationData.append("firstName", firstName);
//     registrationData.append("lastName", lastName);
//     registrationData.append("email", email);
//     registrationData.append("password", password);
//     // registrationData.append("branchId", branchId);
//     // registrationData.append('idCardImage', idCardImage);
//     // registrationData.append('faceImageBase64', faceImage);

//     try {
//       const response = await register(registrationData);
//       if (response.success) {
//         alert(
//           response.message ||
//             "Registration successful! Please check your email to verify."
//         );
//         navigate("/login");
//       } else {
//         setError(response.message || "Registration failed.");
//       }
//     } catch (err) {
//       setError(
//         err.response?.data?.message ||
//           err.message ||
//           "An unexpected error occurred."
//       );
//     }
//     setLoading(false);
//   };

//   return (
//  <div className="min-h-screen flex items-center justify-center px-4 py-7">
//   <form
//     onSubmit={handleSubmit}
//     encType="multipart/form-data"
//     className="w-full max-w-3xl bg-white backdrop-blur-lg border border-slate-200 rounded-3xl shadow-2xl p-10 md:p-14 space-y-8 transition-all"
//   >
//     <h2 className="text-2xl md:text-2xl font-bold text-slate-700 text-center mb-4">
//       Register to LMS
//     </h2>

//     {error && (
//       <div className="bg-red-100 text-red-700 px-4 py-3 rounded-lg shadow text-sm">
//         {error}
//       </div>
//     )}

//     {/* Name */}
//     <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
//       <div>
//         <label className="block text-sm font-medium text-slate-700 mb-1">
//           First Name
//         </label>
//         <input
//           type="text"
//           id="firstName"
//           name="firstName"
//           value={firstName}
//           onChange={onChange}
//           placeholder="John"
//           className="w-full px-4 py-3 bg-slate-100 border border-slate-300 text-slate-800 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-violet-400"
//           required
//         />
//       </div>

//       <div>
//         <label className="block text-sm font-medium text-slate-700 mb-1">
//           Last Name
//         </label>
//         <input
//           type="text"
//           id="lastName"
//           name="lastName"
//           value={lastName}
//           onChange={onChange}
//           placeholder="Doe"
//           className="w-full px-4 py-3 bg-slate-100 border border-slate-300 text-slate-800 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-violet-400"
//           required
//         />
//       </div>
//     </div>

//     {/* Email */}
//     <div>
//       <label className="block text-sm font-medium text-slate-700 mb-1">
//         Email
//       </label>
//       <input
//         type="email"
//         id="email"
//         name="email"
//         value={email}
//         onChange={onChange}
//         placeholder="you@example.com"
//         className="w-full px-4 py-3 bg-slate-100 border border-slate-300 text-slate-800 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-violet-400"
//         required
//       />
//     </div>

//     {/* Passwords */}
//     <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
//       <div>
//         <label className="block text-sm font-medium text-slate-700 mb-1">
//           Password
//         </label>
//         <input
//           type="password"
//           id="password"
//           name="password"
//           value={password}
//           onChange={onChange}
//           placeholder="Enter password"
//           className="w-full px-4 py-3 bg-slate-100 border border-slate-300 text-slate-800 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-violet-400"
//           required
//         />
//       </div>

//       <div>
//         <label className="block text-sm font-medium text-slate-700 mb-1">
//           Confirm Password
//         </label>
//         <input
//           type="password"
//           id="confirmPassword"
//           name="confirmPassword"
//           value={confirmPassword}
//           onChange={onChange}
//           placeholder="Re-enter password"
//           className="w-full px-4 py-3 bg-slate-100 border border-slate-300 text-slate-800 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-violet-400"
//           required
//         />
//       </div>
//     </div>

//     {/* Branch */}
//     {/* <div>
//       <label className="block text-sm font-medium text-slate-700 mb-1">
//         Select Branch
//       </label>
//       <select
//         id="branchId"
//         name="branchId"
//         value={branchId}
//         onChange={onChange}
//         required
//         className="w-full px-4 py-3 bg-slate-100 border border-slate-300 text-slate-800 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-violet-400"
//       >
//         <option value="" disabled>-- Select your branch --</option>
//         {branches.map((b) => (
//           <option key={b._id} value={b._id}>
//             {b.name}
//           </option>
//         ))}
//       </select>
//     </div> */}

//     {/* Submit */}
//     <button
//       type="submit"
//       className="w-full py-3 rounded-xl bg-violet-600 text-white font-semibold text-lg hover:bg-violet-700 transition-all duration-300 shadow-lg"
//       disabled={loading}
//     >
//       {loading ? "Registering..." : "Register"}
//     </button>

//     {/* Login Link */}
//     <p className="text-center text-slate-600 text-sm mt-6">
//       Already have an account?{" "}
//       <Link to="/login" className="text-violet-700 font-semibold hover:underline">
//         Login here
//       </Link>
//     </p>
//   </form>
// </div>

// );

// };

// export default RegisterForm;
// admin registration form 

// import { useEffect, useState } from "react";
// import { fetchAllUsersAdmin } from "../../api/admin.js";
// import { useAuth } from "../../contexts/AuthContext.jsx";
// import ScrollableTable from "../table/ScrollableTable.jsx";

// const UserList = () => {
//   const [users, setUsers] = useState([]);
//   const [error, setError] = useState("");
//   const [loading, setLoading] = useState(true);
//   const { token } = useAuth();

//   // Fetch all users for admin side

//   const loadUsers = async () => {
//     setLoading(true); // Start loading
//     try {
//       const fetchedUsers = await fetchAllUsersAdmin(token);
//       setUsers(fetchedUsers || []);
//       setError(""); // Clear any previous errors
//     } catch (err) {
//       setError("Failed to load users."); // Display error message
//       console.error("Error fetching users:", err);
//     }
//     setLoading(false); // Done loading
//   };

//   // triggers user data fetching whenever token changes
//   useEffect(() => {
//     if (token) {
//       loadUsers();
//     }
//   }, [token]);

//   // Define table columns with headers and accessors for user data
//   const columns = [
//     {
//       header: "Name",
//       accessor: (user) => `${user.firstName} ${user.lastName}`,
//     },
//     {
//       header: "Email",
//       accessor: "email",
//     },
//     {
//       header: "Role",
//       accessor: (user) =>
//         user.role.charAt(0).toUpperCase() + user.role.slice(1),
//     },
//   ];

//   // Render loading state UI
//   if (loading) {
//     return (
//       <div className="flex justify-center items-center min-h-screen">
//         <p className="text-lg text-gray-600 animate-pulse">Loading users...</p>
//       </div>
//     );
//   }

//   // Render error state UI
//   if (error) {
//     return (
//       <div className="flex justify-center items-center min-h-screen">
//         <p className="text-lg text-red-500">{error}</p>
//       </div>
//     );
//   }

//   return (
//     <div className="max-h-[700px] p-8 bg-gradient-to-r from-pink-200 via-blue-300 to-blue-200">
//       <div className="max-w-7xl mx-auto">
//         {/* Header Section */}
//         <header className="relative z-50 flex items-center justify-between px-6 py-5 bg-white border-b border-indigo-200">
//           <h1 className="text-3xl font-extrabold text-indigo-900 tracking-wide">
//             User Management
//           </h1>
//         </header>

//         {/* show message if no users, else show table */}
//         <div>
//           {users.length === 0 ? (
//             <p className="text-center text-gray-500 py-12 text-lg italic">
//               No users found.
//             </p>
//           ) : (
//             <ScrollableTable columns={columns} data={users} maxHeight="600px" />
//           )}
//         </div>
//       </div>
//     </div>
//   );
// };

// export default UserList;
// user list admin 

// import React, { useState, useEffect } from "react";
// import { useFormik, FormikProvider } from "formik";
// import * as Yup from "yup";
// import { useParams, useNavigate } from "react-router-dom";
// import apiClient from "../../../api/axiosConfig";

// export default function AddNotes() {
//   const { noteId } = useParams(); // get noteId from URL (for edit mode)
//   const navigate = useNavigate();

//   const [availableChapters, setAvailableChapters] = useState([]);
//   const [loading, setLoading] = useState(false);

//   // ‚úÖ Fetch chapters for dropdown
//   useEffect(() => {
//     const fetchChapters = async () => {
//       try {
//         const res = await apiClient.get("/api/chapters");
//         setAvailableChapters(res.data?.data || []);
//       } catch (err) {
//         console.error("Error fetching chapters:", err);
//       }
//     };
//     fetchChapters();
//   }, []);

//   // ‚úÖ Setup Formik
//   const formik = useFormik({
//     initialValues: {
//       chapter: "",
//       title: "",
//       content: "",
//       type: "",
//       duration: "",
//       file: null,
//     },
//     validationSchema: Yup.object({
//       chapter: Yup.string().required("Chapter is required"),
//       title: Yup.string().required("Title is required"),
//       content: Yup.string().required("Content is required"),
//       type: Yup.string().required("Type is required"),
//       duration: Yup.string().required("Duration is required"),
//     }),
//     onSubmit: async (values, { resetForm }) => {
//       try {
//         const formData = new FormData();
//         formData.append("chapter", values.chapter);
//         formData.append("title", values.title);
//         formData.append("content", values.content);
//         formData.append("type", values.type);
//         formData.append("duration", values.duration);
//         if (values.file) formData.append("file", values.file);

//         if (noteId) {
//           // ‚úÖ Update existing note
//           await apiClient.put(`/api/notes/${noteId}`, formData, {
//             headers: { "Content-Type": "multipart/form-data" },
//           });
//           alert("Note updated successfully!");
//         } else {
//           // ‚úÖ Create new note
//           await apiClient.post("/api/notes", formData, {
//             headers: { "Content-Type": "multipart/form-data" },
//           });
//           alert("Note created successfully!");
//         }

//         resetForm();
//         navigate("/admin/manage-notes");
//       } catch (error) {
//         console.error(error);
//         alert(
//           "Failed to submit note: " +
//             (error.response?.data?.message || error.message)
//         );
//       }
//     },
//   });

//   // ‚úÖ Prefill form if editing
//   useEffect(() => {
//     if (!noteId) return;

//     const fetchNote = async () => {
//       setLoading(true);
//       try {
//         const res = await apiClient.get(`/api/notes/${noteId}`);
//         if (res.data) {
//           const note = res.data;
//           formik.setValues({
//             chapter: note.chapter?._id || note.chapter || "",
//             title: note.title || "",
//             content: note.content || "",
//             type: note.type || "",
//             duration: note.duration || "",
//             file: null,
//           });
//         } else {
//           alert("Note not found");
//           navigate("/admin/manage-notes");
//         }
//       } catch (err) {
//         console.error(err);
//         alert("Failed to fetch note details");
//         navigate("/admin/manage-notes");
//       } finally {
//         setLoading(false);
//       }
//     };

//     fetchNote();
//   }, [noteId]);

//   if (loading) return <p className="text-center mt-10">Loading note...</p>;

//   return (
//     <FormikProvider value={formik}>
//       <form
//         onSubmit={formik.handleSubmit}
//         className="space-y-6 p-6 bg-white rounded-xl shadow-md max-w-xl mx-auto"
//       >
//         <h2 className="text-2xl font-bold mb-4 text-blue-700">
//           {noteId ? "Edit Note" : "Add Note"}
//         </h2>

//         {/* ‚úÖ Chapter Dropdown */}
//         <div>
//           <label className="block font-medium mb-1">Chapter</label>
//           <select
//             name="chapter"
//             value={formik.values.chapter}
//             onChange={formik.handleChange}
//             onBlur={formik.handleBlur}
//             className="w-full border rounded-lg px-4 py-2"
//           >
//             <option value="">Select Chapter</option>
//             {availableChapters.map((ch) => (
//               <option key={ch._id} value={ch._id}>
//                 {ch.title}
//               </option>
//             ))}
//           </select>
//           {formik.touched.chapter && formik.errors.chapter && (
//             <p className="text-red-500 text-sm">{formik.errors.chapter}</p>
//           )}
//         </div>

//         {/* ‚úÖ Title */}
//         <div>
//           <label className="block font-medium mb-1">Title</label>
//           <input
//             type="text"
//             name="title"
//             value={formik.values.title}
//             onChange={formik.handleChange}
//             onBlur={formik.handleBlur}
//             className="w-full border rounded-lg px-4 py-2"
//           />
//           {formik.touched.title && formik.errors.title && (
//             <p className="text-red-500 text-sm">{formik.errors.title}</p>
//           )}
//         </div>

//         {/* ‚úÖ Content */}
//         <div>
//           <label className="block font-medium mb-1">Content</label>
//           <textarea
//             name="content"
//             value={formik.values.content}
//             onChange={formik.handleChange}
//             onBlur={formik.handleBlur}
//             rows={4}
//             className="w-full border rounded-lg px-4 py-2"
//           />
//           {formik.touched.content && formik.errors.content && (
//             <p className="text-red-500 text-sm">{formik.errors.content}</p>
//           )}
//         </div>

//         {/* ‚úÖ Type */}
//         <div>
//           <label className="block font-medium mb-1">Type</label>
//           <input
//             type="text"
//             name="type"
//             value={formik.values.type}
//             onChange={formik.handleChange}
//             onBlur={formik.handleBlur}
//             placeholder="e.g., article, pdf, ppt"
//             className="w-full border rounded-lg px-4 py-2"
//           />
//           {formik.touched.type && formik.errors.type && (
//             <p className="text-red-500 text-sm">{formik.errors.type}</p>
//           )}
//         </div>

//         {/* ‚úÖ Duration */}
//         <div>
//           <label className="block font-medium mb-1">Duration</label>
//           <input
//             type="text"
//             name="duration"
//             value={formik.values.duration}
//             onChange={formik.handleChange}
//             onBlur={formik.handleBlur}
//             placeholder="e.g., 15:30"
//             className="w-full border rounded-lg px-4 py-2"
//           />
//           {formik.touched.duration && formik.errors.duration && (
//             <p className="text-red-500 text-sm">{formik.errors.duration}</p>
//           )}
//         </div>

//         {/* ‚úÖ File Upload */}
//         <div>
//           <label className="block font-medium mb-1">
//             Upload File (.pdf, .ppt, .docx)
//           </label>
//           <input
//             type="file"
//             accept=".ppt,.pdf,.docx"
//             onChange={(e) =>
//               formik.setFieldValue("file", e.currentTarget.files[0])
//             }
//             className="w-full"
//           />
//         </div>

//         {/* ‚úÖ Submit */}
//         <button
//           type="submit"
//           className="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition"
//         >
//           {noteId ? "Update Note" : "Submit Note"}
//         </button>
//       </form>
//     </FormikProvider>
//   );
// }

// add notes form admin 

// import React, { useState, useEffect } from 'react';
// import { useFormik, FormikProvider } from 'formik';
// import * as Yup from 'yup';
// import apiClient from '../../../api/axiosConfig';
// // import apiClient from '../utils/apiClient'; // adjust path

// export default function AddLectures() {
//   const [availableChapters, setAvailableChapters] = useState([]);

//   // Fetch chapters
//   useEffect(() => {
//     const fetchChapters = async () => {
//       try {
//         const res = await apiClient.get('/api/chapters');
//         setAvailableChapters(res.data?.data || []);
//       } catch (err) {
//         console.error('Error fetching chapters:', err);
//       }
//     };
//     fetchChapters();
//   }, []);

//   const formik = useFormik({
//     initialValues: {
//       chapter: '',
//       title: '',
//       contentUrl: null, // for file
//       duration: '',
//       description: '',
//     },
//     validationSchema: Yup.object({
//       chapter: Yup.string().required('Chapter is required'),
//       title: Yup.string().required('Title is required'),
//       duration: Yup.string().required('Duration is required'),
//       description: Yup.string().required('Description is required'),
//     }),
//     onSubmit: async (values, { resetForm }) => {
//       try {
//         const formData = new FormData();
//         formData.append('chapter', values.chapter);
//         formData.append('title', values.title);
//         formData.append('duration', values.duration);
//         formData.append('description', values.description);
//         if (values.contentUrl) {
//           formData.append('contentUrl', values.contentUrl);
//         }

//         const res = await apiClient.post('/api/lectures', formData, {
//           headers: {
//             'Content-Type': 'multipart/form-data',
//           },
//         });

//         alert('Lecture created successfully!');
//         resetForm();
//       } catch (error) {
//         console.error(error);
//         alert('Failed to create lecture: ' + (error.response?.data?.message || error.message));
//       }
//     },
//   });

//   return (
//     <FormikProvider value={formik}>
//       <form onSubmit={formik.handleSubmit} className="space-y-6 p-6 bg-white rounded-xl shadow-md max-w-xl mx-auto">
//         <h2 className="text-2xl font-bold mb-4 text-blue-700">Add Lecture</h2>

//         {/* Chapter Dropdown */}
//         <div>
//           <label className="block font-medium mb-1">Chapter</label>
//           <select
//             name="chapter"
//             value={formik.values.chapter}
//             onChange={formik.handleChange}
//             onBlur={formik.handleBlur}
//             className="w-full border rounded-lg px-4 py-2"
//           >
//             <option value="">Select Chapter</option>
//             {availableChapters.map((ch) => (
//               <option key={ch._id} value={ch._id}>
//                 {ch.title}
//               </option>
//             ))}
//           </select>
//           {formik.touched.chapter && formik.errors.chapter && (
//             <p className="text-red-500 text-sm">{formik.errors.chapter}</p>
//           )}
//         </div>

//         {/* Title */}
//         <div>
//           <label className="block font-medium mb-1">Title</label>
//           <input
//             type="text"
//             name="title"
//             value={formik.values.title}
//             onChange={formik.handleChange}
//             onBlur={formik.handleBlur}
//             className="w-full border rounded-lg px-4 py-2"
//           />
//           {formik.touched.title && formik.errors.title && (
//             <p className="text-red-500 text-sm">{formik.errors.title}</p>
//           )}
//         </div>

//         {/* Duration */}
//         <div>
//           <label className="block font-medium mb-1">Duration (e.g., 30 min)</label>
//           <input
//             type="text"
//             name="duration"
//             value={formik.values.duration}
//             onChange={formik.handleChange}
//             onBlur={formik.handleBlur}
//             className="w-full border rounded-lg px-4 py-2"
//           />
//           {formik.touched.duration && formik.errors.duration && (
//             <p className="text-red-500 text-sm">{formik.errors.duration}</p>
//           )}
//         </div>

//         {/* Description */}
//         <div>
//           <label className="block font-medium mb-1">Description</label>
//           <textarea
//             name="description"
//             value={formik.values.description}
//             onChange={formik.handleChange}
//             onBlur={formik.handleBlur}
//             rows={4}
//             className="w-full border rounded-lg px-4 py-2"
//           />
//           {formik.touched.description && formik.errors.description && (
//             <p className="text-red-500 text-sm">{formik.errors.description}</p>
//           )}
//         </div>

//         {/* MP4 File Upload */}
//         <div>
//           <label className="block font-medium mb-1">Lecture Video (.mp4)</label>
//           <input
//             type="file"
//             accept="video/mp4"
//             onChange={(e) => formik.setFieldValue('contentUrl', e.currentTarget.files[0])}
//             className="w-full"
//           />
//         </div>

//         {/* Submit */}
//         <button
//           type="submit"
//           className="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition"
//         >
//           Submit Lecture
//         </button>
//       </form>
//     </FormikProvider>
//   );
// }

// add lecture form admin 

// import React, { useState, useEffect } from "react";
// import { useNavigate, useParams } from "react-router-dom";
// import { Formik, Form, Field, FieldArray, ErrorMessage } from "formik";
// import * as Yup from "yup";
// import Select from "react-select"; // ‚úÖ We'll use react-select for multi-select
// import { useAuth } from "../hooks/useAuth"; // adjust import
// import apiClient, { fetchAllTrainers } from "../api"; // adjust import

// const CourseForm = () => {
//   const [editCourseData, setEditCourseData] = useState(null);
//   const [isLoading, setIsLoading] = useState(false);
//   const [error, setError] = useState("");
//   const [success, setSuccess] = useState("");
//   const [trainers, setTrainers] = useState([]);
//   const { token } = useAuth();
//   const navigate = useNavigate();
//   const { id } = useParams();

//   const initialValues = {
//     title: "",
//     description: "",
//     duration: "",
//     rating: 0,
//     enrolledCount: 0,
//     overview: "",
//     learningOutcomes: [""],
//     benefits: [""],
//     features: {
//       certificate: false,
//       codingExercises: false,
//       recordedLectures: false,
//     },
//     isActive: true,
//     keyFeatures: [
//       {
//         title: "",
//         description: "",
//         subPoints: [""],
//       },
//     ],
//     fees: "",
//     trainer: [], // store trainer IDs
//   };

//   const getInitialValues = () => {
//     if (!editCourseData) return initialValues;
//     return {
//       ...initialValues,
//       ...editCourseData,
//       duration: editCourseData.duration || "",
//       rating: editCourseData.rating || 0,
//       enrolledCount: editCourseData.enrolledCount || 0,
//       overview: editCourseData.overview || "",
//       learningOutcomes: editCourseData.learningOutcomes || [""],
//       benefits: editCourseData.benefits || [""],
//       features: editCourseData.features || {
//         certificate: false,
//         codingExercises: false,
//         recordedLectures: false,
//       },
//       isActive: editCourseData.isActive ?? true,
//       keyFeatures:
//         editCourseData.keyFeatures?.length > 0
//           ? editCourseData.keyFeatures
//           : [
//               {
//                 title: "",
//                 description: "",
//                 subPoints: [""],
//               },
//             ],
//       trainer: editCourseData.trainer || [], // trainer IDs
//     };
//   };

//   const CourseSchema = Yup.object().shape({
//     title: Yup.string().required("Title is required"),
//     description: Yup.string().required("Description is required"),
//     duration: Yup.string().required("Duration is required"),
//     rating: Yup.number().min(0).max(5).required("Rating is required"),
//     enrolledCount: Yup.number().min(0).required("Enrolled count is required"),
//     overview: Yup.string().required("Overview is required"),
//     learningOutcomes: Yup.array().of(Yup.string().required("Required")),
//     benefits: Yup.array().of(Yup.string().required("Required")),
//     features: Yup.object({
//       certificate: Yup.boolean(),
//       codingExercises: Yup.boolean(),
//       recordedLectures: Yup.boolean(),
//     }),
//     keyFeatures: Yup.array().of(
//       Yup.object({
//         title: Yup.string().required("Title is required"),
//         description: Yup.string(),
//         subPoints: Yup.array().of(Yup.string().required("Sub-point required")),
//       })
//     ),
//     isActive: Yup.boolean(),
//     fees: Yup.string().required("Fees are required"),
//     trainer: Yup.array().min(1, "Please select at least one trainer"),
//   });

//   // Fetch trainers
//   useEffect(() => {
//     const getTrainers = async () => {
//       try {
//         const data = await fetchAllTrainers();
//         setTrainers(data);
//       } catch (err) {
//         console.error("Failed to fetch trainers:", err);
//       }
//     };
//     getTrainers();
//   }, []);

//   // Fetch course if editing
//   useEffect(() => {
//     if (!id) return;
//     const fetchCourse = async () => {
//       try {
//         const res = await apiClient.get(`/api/courses/${id}`, {
//           headers: { Authorization: `Bearer ${token}` },
//         });
//         setEditCourseData(res.data.data);
//       } catch (err) {
//         setError("Failed to load course for editing.");
//         console.error(err);
//       }
//     };
//     fetchCourse();
//   }, [id, token]);

//   const handleSubmit = async (values, { setSubmitting, resetForm }) => {
//     setError("");
//     setSuccess("");
//     setIsLoading(true);

//     try {
//       if (id && editCourseData) {
//         await apiClient.put(`/api/courses/${id}`, values, {
//           headers: { Authorization: `Bearer ${token}` },
//         });
//         setSuccess("Course updated successfully!");
//       } else {
//         await apiClient.post("/api/courses", values, {
//           headers: { Authorization: `Bearer ${token}` },
//         });
//         setSuccess("Course created successfully!");
//       }

//       resetForm();
//       navigate("/admin/courses");
//     } catch (err) {
//       setError(
//         err.response?.data?.message || err.message || "Operation failed."
//       );
//     }

//     setIsLoading(false);
//     setSubmitting(false);
//   };

//   return (
//     <div className="bg-white shadow-md rounded-lg p-8">
//       <div className="flex justify-between items-center mb-6">
//         <h2 className="text-2xl font-semibold text-indigo-600">
//           {id ? "Edit Course" : "Create New Course"}
//         </h2>
//         <button
//           type="button"
//           onClick={() => navigate("/admin/courses")}
//           className="px-4 py-2 bg-gray-400 text-white rounded hover:bg-gray-500"
//         >
//           Cancel
//         </button>
//       </div>

//       {error && (
//         <div className="mb-4 p-3 bg-red-100 text-red-700 border border-red-400 rounded">
//           {error}
//         </div>
//       )}

//       {success && (
//         <div className="mb-4 p-3 bg-green-100 text-green-700 border border-green-400 rounded">
//           {success}
//         </div>
//       )}

//       <Formik
//         enableReinitialize
//         initialValues={getInitialValues()}
//         validationSchema={CourseSchema}
//         onSubmit={handleSubmit}
//       >
//         {({ values, setFieldValue, isSubmitting }) => (
//           <Form className="space-y-6">
//             {/* Title */}
//             <div>
//               <label className="block text-sm font-medium text-gray-700 mb-1">
//                 Title <span className="text-red-500">*</span>
//               </label>
//               <Field
//                 name="title"
//                 className="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:border-indigo-500 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"
//               />
//               <ErrorMessage
//                 name="title"
//                 component="div"
//                 className="text-xs text-red-500 mt-1"
//               />
//             </div>

//             {/* Trainer Multi-Select */}
//             <div>
//               <label className="block text-sm font-medium text-gray-700 mb-1">
//                 Trainers <span className="text-red-500">*</span>
//               </label>
//               <Select
//                 isMulti
//                 name="trainer"
//                 options={trainers.map((t) => ({
//                   value: t._id,
//                   label: t.fullName,
//                 }))}
//                 value={trainers
//                   .filter((t) => values.trainer.includes(t._id))
//                   .map((t) => ({ value: t._id, label: t.fullName }))}
//                 onChange={(selected) =>
//                   setFieldValue(
//                     "trainer",
//                     selected ? selected.map((s) => s.value) : []
//                   )
//                 }
//                 className="basic-multi-select"
//                 classNamePrefix="select"
//               />
//               <ErrorMessage
//                 name="trainer"
//                 component="div"
//                 className="text-xs text-red-500 mt-1"
//               />
//             </div>

//             {/* You can continue adding other fields like Description, Duration, Features, etc. */}

//             <div className="flex justify-between items-center pt-4">
//               <button
//                 type="submit"
//                 disabled={isSubmitting || isLoading}
//                 className="px-6 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 disabled:opacity-50"
//               >
//                 {editCourseData ? "Update Course" : "Create Course"}
//               </button>
//               <button
//                 type="button"
//                 onClick={() => navigate("/admin/courses")}
//                 className="px-6 py-2 bg-gray-400 text-white rounded hover:bg-gray-500"
//               >
//                 Cancel
//               </button>
//             </div>
//           </Form>
//         )}
//       </Formik>
//     </div>
//   );
// };

// export default CourseForm;


// import { useEffect, useState } from "react";
// import { Formik, Form, Field, FieldArray, ErrorMessage } from "formik";
// import * as Yup from "yup";
// import apiClient from "../../../api/axiosConfig.js";
// import { useAuth } from "../../../contexts/AuthContext.jsx";
// import { useNavigate, useParams } from "react-router-dom";
// import { fetchAllTrainers } from "../../../pages/admin/trainer-management/trainerApi.js";
// // import { fetchAllTrainers } from "../../../api/trainerApi.js";

// const CourseForm = () => {
//   const [editCourseData, setEditCourseData] = useState(null);
//   const [isLoading, setIsLoading] = useState(false);
//   const [error, setError] = useState("");
//   const [success, setSuccess] = useState("");
//   const [trainers, setTrainers] = useState([]);

//   const { token } = useAuth();
//   const navigate = useNavigate();
//   const { id } = useParams();

//   // üü¢ Fetch Trainers
//   useEffect(() => {
//     const getTrainers = async () => {
//       try {
//         const data = await fetchAllTrainers();
//         setTrainers(data);
//       } catch (err) {
//         console.error("Failed to fetch trainers:", err);
//       }
//     };
//     getTrainers();
//   }, []);

//   const initialValues = {
//     title: "",
//     description: "",
//     duration: "",
//     rating: 0,
//     enrolledCount: 0,
//     overview: "",
//     learningOutcomes: [""],
//     benefits: [""],
//     keyFeatures: [
//       {
//         title: "",
//         description: "",
//         subPoints: [""],
//       },
//     ],
//     features: {
//       certificate: false,
//       codingExercises: false,
//       recordedLectures: false,
//     },
//     fees: "",
//     trainer: [], // store trainer IDs
//     isActive: true,
//   };

//   const getInitialValues = () => {
//     if (!editCourseData) return initialValues;
//     return {
//       ...initialValues,
//       ...editCourseData,
//       trainer: editCourseData.trainer || [],
//     };
//   };

//   const CourseSchema = Yup.object().shape({
//     title: Yup.string().required("Title is required"),
//     description: Yup.string().required("Description is required"),
//     duration: Yup.string().required("Duration is required"),
//     rating: Yup.number().min(0).max(5).required("Rating is required"),
//     enrolledCount: Yup.number().min(0).required("Enrolled count is required"),
//     overview: Yup.string().required("Overview is required"),
//     fees: Yup.string().required("Fees are required"),
//     trainer: Yup.array().min(1, "Please select at least one trainer"),
//     learningOutcomes: Yup.array().of(Yup.string().required("Required")),
//     benefits: Yup.array().of(Yup.string().required("Required")),
//     keyFeatures: Yup.array().of(
//       Yup.object({
//         title: Yup.string().required("Title is required"),
//         description: Yup.string(),
//         subPoints: Yup.array().of(Yup.string().required("Sub-point required")),
//       })
//     ),
//     features: Yup.object({
//       certificate: Yup.boolean(),
//       codingExercises: Yup.boolean(),
//       recordedLectures: Yup.boolean(),
//     }),
//   });

//   const handleSubmit = async (values, { setSubmitting, resetForm }) => {
//     setError("");
//     setSuccess("");
//     setIsLoading(true);

//     try {
//       const payload = {
//         ...values,
//         trainer: values.trainer, // trainer IDs array
//       };

//       if (id && editCourseData) {
//         await apiClient.put(`/api/courses/${id}`, payload, {
//           headers: { Authorization: `Bearer ${token}` },
//         });
//         setSuccess("Course updated successfully!");
//       } else {
//         await apiClient.post("/api/courses", payload, {
//           headers: { Authorization: `Bearer ${token}` },
//         });
//         setSuccess("Course created successfully!");
//       }

//       resetForm();
//       navigate("/admin/courses");
//     } catch (err) {
//       setError(
//         err.response?.data?.message || err.message || "Operation failed."
//       );
//     } finally {
//       setIsLoading(false);
//       setSubmitting(false);
//     }
//   };

//   // üü¢ Fetch course if editing
//   useEffect(() => {
//     const fetchCourse = async () => {
//       if (!id) return;
//       try {
//         const res = await apiClient.get(`/api/courses/${id}`, {
//           headers: { Authorization: `Bearer ${token}` },
//         });
//         setEditCourseData(res.data.data);
//       } catch (err) {
//         setError("Failed to load course for editing.");
//         console.error(err);
//       }
//     };
//     fetchCourse();
//   }, [id, token]);

//   return (
//     <div className="bg-white shadow-md rounded-lg p-8">
//       <div className="flex justify-between items-center mb-6">
//         <h2 className="text-2xl font-semibold text-indigo-600">
//           {id ? "Edit Course" : "Create New Course"}
//         </h2>
//         <button
//           type="button"
//           onClick={() => navigate("/admin/courses")}
//           className="px-4 py-2 bg-gray-400 text-white rounded hover:bg-gray-500"
//         >
//           Cancel
//         </button>
//       </div>

//       {error && (
//         <div className="mb-4 p-3 bg-red-100 text-red-700 border border-red-400 rounded">
//           {error}
//         </div>
//       )}

//       {success && (
//         <div className="mb-4 p-3 bg-green-100 text-green-700 border border-green-400 rounded">
//           {success}
//         </div>
//       )}

//       <Formik
//         enableReinitialize
//         initialValues={getInitialValues()}
//         validationSchema={CourseSchema}
//         onSubmit={handleSubmit}
//       >
//         {({ values, isSubmitting, setFieldValue }) => (
//           <Form className="space-y-6">
//             {/* üè∑Ô∏è Title */}
//             <div>
//               <label className="block text-sm font-medium text-gray-700 mb-1">
//                 Title <span className="text-red-500">*</span>
//               </label>
//               <Field
//                 name="title"
//                 className="w-full px-3 py-2 border border-gray-300 rounded-md"
//               />
//               <ErrorMessage
//                 name="title"
//                 component="div"
//                 className="text-xs text-red-500 mt-1"
//               />
//             </div>

//             {/* üìÑ Description */}
//             <div>
//               <label className="block text-sm font-medium text-gray-700 mb-1">
//                 Description <span className="text-red-500">*</span>
//               </label>
//               <Field
//                 as="textarea"
//                 name="description"
//                 rows="3"
//                 className="w-full px-3 py-2 border border-gray-300 rounded-md"
//               />
//               <ErrorMessage
//                 name="description"
//                 component="div"
//                 className="text-xs text-red-500 mt-1"
//               />
//             </div>

//             {/* üìä Duration, Rating, Enrolled Count */}
//             <div className="grid grid-cols-1 sm:grid-cols-3 gap-4">
//               <div>
//                 <label className="block text-sm font-medium text-gray-700 mb-1">
//                   Duration <span className="text-red-500">*</span>
//                 </label>
//                 <Field
//                   name="duration"
//                   className="w-full px-3 py-2 border border-gray-300 rounded-md"
//                 />
//                 <ErrorMessage
//                   name="duration"
//                   component="div"
//                   className="text-xs text-red-500 mt-1"
//                 />
//               </div>
//               <div>
//                 <label className="block text-sm font-medium text-gray-700 mb-1">
//                   Rating <span className="text-red-500">*</span>
//                 </label>
//                 <Field
//                   type="number"
//                   name="rating"
//                   className="w-full px-3 py-2 border border-gray-300 rounded-md"
//                 />
//                 <ErrorMessage
//                   name="rating"
//                   component="div"
//                   className="text-xs text-red-500 mt-1"
//                 />
//               </div>
//               <div>
//                 <label className="block text-sm font-medium text-gray-700 mb-1">
//                   Enrolled Count <span className="text-red-500">*</span>
//                 </label>
//                 <Field
//                   type="number"
//                   name="enrolledCount"
//                   className="w-full px-3 py-2 border border-gray-300 rounded-md"
//                 />
//                 <ErrorMessage
//                   name="enrolledCount"
//                   component="div"
//                   className="text-xs text-red-500 mt-1"
//                 />
//               </div>
//             </div>

//             {/* üí∞ Fees */}
//             <div>
//               <label className="block text-sm font-medium text-gray-700 mb-1">
//                 Fees <span className="text-red-500">*</span>
//               </label>
//               <Field
//                 name="fees"
//                 type="text"
//                 placeholder="Enter course fees"
//                 className="w-full px-3 py-2 border border-gray-300 rounded-md"
//               />
//               <ErrorMessage
//                 name="fees"
//                 component="div"
//                 className="text-xs text-red-500 mt-1"
//               />
//             </div>

//             {/* üë®‚Äçüè´ Trainer Dropdown */}
//             <div>
//               <label className="block text-sm font-medium text-gray-700 mb-1">
//                 Select Trainer(s) <span className="text-red-500">*</span>
//               </label>
//               <select
//                 multiple
//                 value={values.trainer}
//                 onChange={(e) =>
//                   setFieldValue(
//                     "trainer",
//                     Array.from(e.target.selectedOptions, (opt) => opt.value)
//                   )
//                 }
//                 className="w-full px-3 py-2 border border-gray-300 rounded-md"
//               >
//                 {trainers.map((t) => (
//   <option key={t._id} value={t._id}>
//     {t.fullName}   // ‚úÖ use the correct field from API
//   </option>
// ))}

//               </select>
//               <p className="text-xs text-gray-500 mt-1">
//                 Hold Ctrl (Windows) or Cmd (Mac) to select multiple trainers.
//               </p>
//               <ErrorMessage
//                 name="trainer"
//                 component="div"
//                 className="text-xs text-red-500 mt-1"
//               />
//             </div>

//             {/* ‚úÖ Existing fields (Overview, Learning Outcomes, Benefits, Features, Key Features) remain unchanged */}
//             {/* You can keep the rest of your FieldArray code as it is */}

//             <div className="flex justify-between items-center pt-4">
//               <button
//                 type="submit"
//                 disabled={isSubmitting || isLoading}
//                 className="px-6 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 disabled:opacity-50"
//               >
//                 {editCourseData ? "Update Course" : "Create Course"}
//               </button>

//               <button
//                 type="button"
//                 onClick={() => navigate("/admin/courses")}
//                 className="px-6 py-2 bg-gray-400 text-white rounded hover:bg-gray-500"
//               >
//                 Cancel
//               </button>
//             </div>
//           </Form>
//         )}
//       </Formik>
//     </div>
//   );
// };

// export default CourseForm;
//  course form with fees and trainer 


  // return (
  //   <div className="bg-white shadow-md rounded-lg p-8">
  //     <div className="flex justify-between items-center mb-6">
  //       <h2 className="text-2xl font-semibold text-indigo-600">
  //         {id ? "Edit Course" : "Create New Course"}
  //       </h2>
  //       <button
  //         type="button"
  //         onClick={() => navigate("/admin/courses")}
  //         className="px-4 py-2 bg-gray-400 text-white rounded hover:bg-gray-500"
  //       >
  //         Cancel
  //       </button>
  //     </div>

  //     {error && (
  //       <div className="mb-4 p-3 bg-red-100 text-red-700 border border-red-400 rounded">
  //         {error}
  //       </div>
  //     )}

  //     {success && (
  //       <div className="mb-4 p-3 bg-green-100 text-green-700 border border-green-400 rounded">
  //         {success}
  //       </div>
  //     )}

  //     <Formik
  //       enableReinitialize
  //       initialValues={getInitialValues()}
  //       validationSchema={CourseSchema}
  //       onSubmit={handleSubmit}
  //     >
  //       {({ values, isSubmitting }) => (
  //         <Form className="space-y-6">
  //           <div>
  //             <label className="block text-sm font-medium text-gray-700 mb-1">
  //               Title <span className="text-red-500">*</span>
  //             </label>
  //             <Field
  //               name="title"
  //               className="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:border-indigo-500 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"
  //             />
  //             <ErrorMessage
  //               name="title"
  //               component="div"
  //               className="text-xs text-red-500 mt-1"
  //             />
  //           </div>

  //           <div>
  //             <label className="block text-sm font-medium text-gray-700 mb-1">
  //               Description <span className="text-red-500">*</span>
  //             </label>
  //             <Field
  //               as="textarea"
  //               name="description"
  //               rows="3"
  //               className="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:border-indigo-500 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"
  //             />
  //             <ErrorMessage
  //               name="description"
  //               component="div"
  //               className="text-xs text-red-500 mt-1"
  //             />
  //           </div>

  //           <div className="grid grid-cols-1 sm:grid-cols-3 gap-4">
  //             <div>
  //               <label className="block text-sm font-medium text-gray-700 mb-1">
  //                 Duration <span className="text-red-500">*</span>
  //               </label>
  //               <Field
  //                 name="duration"
  //                 className="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:border-indigo-500 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"
  //               />
  //               <ErrorMessage
  //                 name="duration"
  //                 component="div"
  //                 className="text-xs text-red-500 mt-1"
  //               />
  //             </div>
  //             <div>
  //               <label className="block text-sm font-medium text-gray-700 mb-1">
  //                 Rating <span className="text-red-500">*</span>
  //               </label>
  //               <Field
  //                 type="number"
  //                 name="rating"
  //                 className="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:border-indigo-500 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"
  //               />
  //               <ErrorMessage
  //                 name="rating"
  //                 component="div"
  //                 className="text-xs text-red-500 mt-1"
  //               />
  //             </div>
  //             <div>
  //               <label className="block text-sm font-medium text-gray-700 mb-1">
  //                 Enrolled Count <span className="text-red-500">*</span>
  //               </label>
  //               <Field
  //                 type="number"
  //                 name="enrolledCount"
  //                 className="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:border-indigo-500 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"
  //               />
  //               <ErrorMessage
  //                 name="enrolledCount"
  //                 component="div"
  //                 className="text-xs text-red-500 mt-1"
  //               />
  //             </div>
  //           </div>

  //           <div>
  //             <label className="block text-sm font-medium text-gray-700 mb-1">
  //               Overview <span className="text-red-500">*</span>
  //             </label>
  //             <Field
  //               as="textarea"
  //               name="overview"
  //               rows="3"
  //               className="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:border-indigo-500 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"
  //             />
  //             <ErrorMessage
  //               name="overview"
  //               component="div"
  //               className="text-xs text-red-500 mt-1"
  //             />
  //           </div>

  //           <div>
  //             <label className="block text-sm font-medium text-gray-700 mb-1">
  //               Learning Outcomes
  //             </label>
  //             <FieldArray name="learningOutcomes">
  //               {({ push, remove }) => (
  //                 <div className="space-y-2">
  //                   {values.learningOutcomes.map((_, idx) => (
  //                     <div key={idx} className="flex gap-2">
  //                       <Field
  //                         name={`learningOutcomes[${idx}]`}
  //                         className="flex-1 px-3 py-2 border border-gray-300 rounded-md"
  //                       />
  //                       <button
  //                         type="button"
  //                         className="px-2 py-1 bg-red-500 text-white rounded"
  //                         onClick={() => remove(idx)}
  //                         disabled={values.learningOutcomes.length === 1}
  //                       >
  //                         -
  //                       </button>
  //                       {idx === values.learningOutcomes.length - 1 && (
  //                         <button
  //                           type="button"
  //                           className="px-2 py-1 bg-green-500 text-white rounded"
  //                           onClick={() => push("")}
  //                         >
  //                           +
  //                         </button>
  //                       )}
  //                     </div>
  //                   ))}
  //                 </div>
  //               )}
  //             </FieldArray>
  //           </div>

  //           <div>
  //             <label className="block text-sm font-medium text-gray-700 mb-1">
  //               Benefits
  //             </label>
  //             <FieldArray name="benefits">
  //               {({ push, remove }) => (
  //                 <div className="space-y-2">
  //                   {values.benefits.map((_, idx) => (
  //                     <div key={idx} className="flex gap-2">
  //                       <Field
  //                         name={`benefits[${idx}]`}
  //                         className="flex-1 px-3 py-2 border border-gray-300 rounded-md"
  //                       />
  //                       <button
  //                         type="button"
  //                         className="px-2 py-1 bg-red-500 text-white rounded"
  //                         onClick={() => remove(idx)}
  //                         disabled={values.benefits.length === 1}
  //                       >
  //                         -
  //                       </button>
  //                       {idx === values.benefits.length - 1 && (
  //                         <button
  //                           type="button"
  //                           className="px-2 py-1 bg-green-500 text-white rounded"
  //                           onClick={() => push("")}
  //                         >
  //                           +
  //                         </button>
  //                       )}
  //                     </div>
  //                   ))}
  //                 </div>
  //               )}
  //             </FieldArray>
  //           </div>

  //           <div>
  //             <h3 className="font-semibold text-lg mb-2">Features</h3>
  //             <label className="inline-flex items-center mr-4">
  //               <Field type="checkbox" name="features.certificate" />
  //               <span className="ml-2">Certificate</span>
  //             </label>
  //             <label className="inline-flex items-center mr-4">
  //               <Field type="checkbox" name="features.codingExercises" />
  //               <span className="ml-2">Coding Exercises</span>
  //             </label>
  //             <label className="inline-flex items-center">
  //               <Field type="checkbox" name="features.recordedLectures" />
  //               <span className="ml-2">Recorded Lectures</span>
  //             </label>
  //           </div>

  //           <div>
  //             <label className="inline-flex items-center">
  //               <Field type="checkbox" name="isActive" />
  //               <span className="ml-2">Active</span>
  //             </label>
  //           </div>

  //           {/* <div>
  //             <label className="block text-sm font-medium text-gray-700 mb-1">
  //               Instructor
  //             </label>
  //             <Field
  //               name="instructor"
  //               className="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md"
  //             />
  //           </div> */}

  //           <div>
  //             <h3 className="font-semibold text-lg mb-2">Key Features</h3>
  //             <FieldArray name="keyFeatures">
  //               {({ push, remove }) => (
  //                 <div className="space-y-6">
  //                   {values.keyFeatures.map((feature, idx) => (
  //                     <div
  //                       key={idx}
  //                       className="p-4 border border-gray-300 rounded-md"
  //                     >
  //                       <div className="flex justify-between items-center mb-2">
  //                         <label className="font-medium">
  //                           Feature {idx + 1}
  //                         </label>
  //                         <button
  //                           type="button"
  //                           className="px-2 py-1 bg-red-500 text-white rounded"
  //                           onClick={() => remove(idx)}
  //                           disabled={values.keyFeatures.length === 1}
  //                         >
  //                           Remove
  //                         </button>
  //                       </div>
  //                       <div className="mb-2">
  //                         <Field
  //                           name={`keyFeatures[${idx}].title`}
  //                           placeholder="Title"
  //                           className="w-full px-3 py-2 border border-gray-300 rounded-md"
  //                         />
  //                         <ErrorMessage
  //                           name={`keyFeatures[${idx}].title`}
  //                           component="div"
  //                           className="text-xs text-red-500 mt-1"
  //                         />
  //                       </div>
  //                       <div className="mb-2">
  //                         <Field
  //                           as="textarea"
  //                           name={`keyFeatures[${idx}].description`}
  //                           placeholder="Description"
  //                           className="w-full px-3 py-2 border border-gray-300 rounded-md"
  //                           rows="2"
  //                         />
  //                       </div>
  //                       <div>
  //                         <label className="block mb-1 font-medium">
  //                           Sub Points
  //                         </label>
  //                         <FieldArray name={`keyFeatures[${idx}].subPoints`}>
  //                           {({ push: pushSP, remove: removeSP }) => (
  //                             <div className="space-y-1">
  //                               {feature.subPoints?.map((_, spIdx) => (
  //                                 <div key={spIdx} className="flex gap-2">
  //                                   <Field
  //                                     name={`keyFeatures[${idx}].subPoints[${spIdx}]`}
  //                                     className="flex-1 px-3 py-1 border border-gray-300 rounded-md"
  //                                   />
  //                                   <button
  //                                     type="button"
  //                                     className="px-2 py-1 bg-red-500 text-white rounded"
  //                                     onClick={() => removeSP(spIdx)}
  //                                     disabled={feature.subPoints.length === 1}
  //                                   >
  //                                     -
  //                                   </button>
  //                                   {spIdx === feature.subPoints.length - 1 && (
  //                                     <button
  //                                       type="button"
  //                                       className="px-2 py-1 bg-green-500 text-white rounded"
  //                                       onClick={() => pushSP("")}
  //                                     >
  //                                       +
  //                                     </button>
  //                                   )}
  //                                 </div>
  //                               ))}
  //                             </div>
  //                           )}
  //                         </FieldArray>
  //                       </div>
  //                     </div>
  //                   ))}
  //                   <button
  //                     type="button"
  //                     className="px-4 py-2 bg-indigo-600 text-white rounded"
  //                     onClick={() =>
  //                       push({
  //                         title: "",
  //                         description: "",
  //                         subPoints: [""],
  //                       })
  //                     }
  //                   >
  //                     Add Key Feature
  //                   </button>
  //                 </div>
  //               )}
  //             </FieldArray>
  //           </div>

  //           <div className="flex justify-between items-center pt-4">
  //             <button
  //               type="submit"
  //               disabled={isSubmitting || isLoading}
  //               className="px-6 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 disabled:opacity-50"
  //             >
  //               {editCourseData ? "Update Course" : "Create Course"}
  //             </button>
  //             <button
  //               type="button"
  //               onClick={() => navigate("/admin/courses")}
  //               className="px-6 py-2 bg-gray-400 text-white rounded hover:bg-gray-500"
  //             >
  //               Cancel
  //             </button>
  //           </div>
  //         </Form>
  //       )}
  //     </Formik>
  //   </div>
  // );

// course form previour working code with old ui 

// // SessionCategoryForm.jsx
// import { useFormik } from "formik";
// import { useEffect, useState } from "react";
// import { useNavigate } from "react-router-dom";
// import Swal from "sweetalert2";
// import * as Yup from "yup";

// import {
//   createSessionCategory,
//   deleteSessionCategory,
//   getSessionCategories,
//   updateSessionCategory,
// } from "./upSkillsApi";

// import InputField from "../form/InputField";
// import TextAreaField from "../form/TextAreaField";
// import ScrollableTable from "../table/ScrollableTable";
// import EventTableModal from "./EventTableModal";

// import { Pencil, Plus, Settings, Trash2 } from "lucide-react";
// import { Tooltip } from "react-tooltip";

// // ----------------------
// // Validation Schema
// // ----------------------
// const validationSchema = Yup.object({
//   name: Yup.string().required("Name is required"),
//   slug: Yup.string().required("Slug is required"),
//   desc: Yup.string().required("Description is required"),
//   type: Yup.string().required("Type is required"),
//   isActive: Yup.boolean(),
// });

// // ----------------------
// // Main Component
// // ----------------------
// const SessionCategoryForm = () => {
//   const [sessionCategories, setSessionCategories] = useState([]);
//   const [selectedCategory, setSelectedCategory] = useState(null);
//   const [loading, setLoading] = useState(false);
//   const [isTableOpen, setIsTableOpen] = useState(false);
//   const navigate = useNavigate();

//   // ----------------------
//   // Fetch all session categories
//   // ----------------------
//   const fetchCategories = async () => {
//     try {
//       const data = await getSessionCategories();
//       setSessionCategories(data || []);
//     } catch (error) {
//       console.error("Error fetching session categories:", error);
//       Swal.fire("Error!", "Failed to fetch session categories.", "error");
//     }
//   };

//   // Initial fetch
//   useEffect(() => {
//     fetchCategories();
//   }, []);

//   // ----------------------
//   // Formik setup
//   // ----------------------
//   const formik = useFormik({
//     initialValues: {
//       name: "",
//       slug: "",
//       desc: "",
//       type: "",
//       isActive: true,
//     },
//     validationSchema,
//     onSubmit: async (values, { resetForm }) => {
//       setLoading(true);

//       try {
//         if (selectedCategory) {
//           // Update existing category
//           await updateSessionCategory(selectedCategory._id, values);
//           Swal.fire("Success!", "Session category updated successfully!", "success");
//         } else {
//           // Create new category
//           await createSessionCategory(values);
//           Swal.fire("Success!", "Session category created successfully!", "success");
//         }

//         resetForm();
//         setSelectedCategory(null);
//         fetchCategories();
//       } catch (error) {
//         console.error("‚ùå Error saving session category:", error);
//         Swal.fire("Error!", "Failed to save session category.", "error");
//       } finally {
//         setLoading(false);
//       }
//     },
//   });

//   // ----------------------
//   // Edit category
//   // ----------------------
//   const handleEdit = (category) => {
//     setSelectedCategory(category);
//     formik.setValues({
//       name: category.name,
//       slug: category.slug,
//       desc: category.desc,
//       type: category.type,
//       isActive: category.isActive,
//     });
//   };

//   // ----------------------
//   // Delete category using SweetAlert
//   // ----------------------
//   const handleDelete = async (id) => {
//     const result = await Swal.fire({
//       title: "Are you sure?",
//       text: "You won't be able to revert this!",
//       icon: "warning",
//       showCancelButton: true,
//       confirmButtonColor: "#3085d6",
//       cancelButtonColor: "#d33",
//       confirmButtonText: "Yes, delete it!",
//     });

//     if (result.isConfirmed) {
//       try {
//         await deleteSessionCategory(id);
//         Swal.fire("Deleted!", "Category has been deleted.", "success");
//         fetchCategories();
//       } catch (error) {
//         console.error("‚ùå Delete failed:", error);
//         Swal.fire("Error!", "Failed to delete category.", "error");
//       }
//     }
//   };

//   // ----------------------
//   // Open manage modal
//   // ----------------------
//   const handleManage = (category) => {
//     setSelectedCategory(category);
//     setIsTableOpen(true);
//   };

//   // ----------------------
//   // Table columns
//   // ----------------------
//   const columns = [
//     { header: "Name", accessor: "name" },
//     { header: "Type", accessor: "type" },
//     {
//       header: "Status",
//       accessor: (row) => (
//         <span
//           className={`px-2 py-1 rounded text-xs font-semibold ${
//             row.isActive
//               ? "bg-green-100 text-green-700"
//               : "bg-red-100 text-red-700"
//           }`}
//         >
//           {row.isActive ? "Active" : "Inactive"}
//         </span>
//       ),
//     },
//     {
//       header: "Actions",
//       accessor: (row) => (
//         <div className="flex space-x-4">
//           {/* Edit */}
//           <button
//             data-tooltip-id="tooltip"
//             data-tooltip-content="Edit"
//             className="p-2 rounded-lg hover:bg-blue-50 text-blue-600 transition"
//             onClick={() => handleEdit(row)}
//           >
//             <Pencil size={18} />
//           </button>

//           {/* Delete */}
//           <button
//             data-tooltip-id="tooltip"
//             data-tooltip-content="Delete"
//             className="p-2 rounded-lg hover:bg-red-50 text-red-600 transition"
//             onClick={() => handleDelete(row._id)}
//           >
//             <Trash2 size={18} />
//           </button>

//           {/* Manage */}
//           <button
//             data-tooltip-id="tooltip"
//             data-tooltip-content="Manage"
//             className="p-2 rounded-lg hover:bg-indigo-50 text-indigo-600 transition"
//             onClick={() => handleManage(row)}
//           >
//             <Settings size={18} />
//           </button>

//           {/* Create content */}
//           <button
//             data-tooltip-id="tooltip"
//             data-tooltip-content={`Manage ${row.slug}`}
//             className="p-2 rounded-lg hover:bg-green-50 text-green-600 transition"
//             onClick={() =>
//               navigate(`/admin/session-category/${row._id}/manage`)
//             }
//           >
//             <Plus size={18} />
//           </button>
//         </div>
//       ),
//     },
//   ];

//   // ----------------------
//   // Render
//   // ----------------------
//   return (
//     <div className="relative h-[550px] w-full flex items-center justify-center p-2">
//       <div className="relative z-10 w-full max-w-7xl flex flex-col lg:flex-row gap-6 h-[75vh]">
//         {/* ========== FORM SECTION ========== */}
//         <div className="w-full lg:w-1/2 backdrop-blur-lg bg-white/60 border-3 border-blue-700 border-opacity-80 rounded-xl shadow-2xl flex flex-col overflow-hidden">
//           {/* Header */}
//           <div className="p-6 border-b border-white/30">
//             <h2 className="text-2xl font-extrabold text-indigo-600 tracking-tight">
//               {selectedCategory
//                 ? "‚úèÔ∏è Edit Session Category"
//                 : "‚ûï Create Session Category"}
//             </h2>
//           </div>

//           {/* Scrollable Form */}
//           <div className="flex-1 overflow-y-auto px-6 py-4 custom-scrollbar">
//             <form onSubmit={formik.handleSubmit} className="space-y-4">
//               <div className="grid grid-cols-2 gap-4">
//                 <InputField label="Name" name="name" formik={formik} />
//                 <InputField label="Slug" name="slug" formik={formik} />
//                 <InputField label="Type" name="type" formik={formik} />

//                 {/* Active Toggle */}
//                 <div className="flex items-center gap-4 mt-4">
//                   <span className="text-sm font-medium text-gray-700">Active</span>
//                   <label className="relative inline-flex items-center cursor-pointer">
//                     <input
//                       type="checkbox"
//                       name="isActive"
//                       checked={formik.values.isActive}
//                       onChange={formik.handleChange}
//                       className="sr-only peer"
//                     />
//                     <div className="w-12 h-7 bg-gray-300 peer-checked:bg-blue-600 rounded-full transition-colors duration-300"></div>
//                     <div className="absolute left-1 top-1 w-5 h-5 bg-white rounded-full shadow-md transition-transform duration-300 peer-checked:translate-x-5"></div>
//                   </label>
//                 </div>
//               </div>

//               <TextAreaField label="Description" name="desc" formik={formik} />

//               {/* Buttons */}
//               <div className="pt-4 space-y-1 flex flex-col lg:flex-row gap-4">
//                 <button
//                   type="submit"
//                   disabled={loading}
//                   className="w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-semibold py-3 rounded-lg shadow-md hover:shadow-lg hover:from-blue-700 hover:to-indigo-700 transition-all duration-300 disabled:opacity-70"
//                 >
//                   {loading
//                     ? "‚è≥ Submitting..."
//                     : selectedCategory
//                     ? "üíæ Update Category"
//                     : "üöÄ Create Category"}
//                 </button>

//                 {selectedCategory && (
//                   <button
//                     type="button"
//                     onClick={() => {
//                       setSelectedCategory(null);
//                       formik.resetForm();
//                     }}
//                     className="w-full bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-all"
//                   >
//                     ‚ùå Cancel Edit
//                   </button>
//                 )}
//               </div>
//             </form>
//           </div>
//         </div>

//         {/* ========== TABLE SECTION ========== */}
//         <div className="w-full lg:w-1/2 backdrop-blur-lg bg-white/60 border-3 border-blue-700 border-opacity-80 rounded-xl shadow-2xl flex flex-col overflow-hidden">
//           {/* Header */}
//           <div className="p-6 border-b border-white/30 flex items-center justify-between">
//             <h2 className="text-2xl font-extrabold text-indigo-600 tracking-tight">
//               üìö Session Categories
//             </h2>
//           </div>

//           {/* Scrollable Table */}
//           <div className="flex-1 overflow-y-auto p-2 custom-scrollbar">
//             <div className="rounded-lg border border-gray-200 dark:border-gray-700 shadow-sm">
//               <ScrollableTable
//                 columns={columns}
//                 data={sessionCategories}
//                 maxHeight="100%"
//               />
//             </div>
//           </div>

//           {/* Modal */}
//           <EventTableModal
//             isOpen={isTableOpen}
//             onClose={() => setIsTableOpen(false)}
//             categoryId={selectedCategory?._id}
//             categorySlug={selectedCategory?.slug}
//           />

//           {/* Tooltip */}
//           <Tooltip id="tooltip" place="top" />
//         </div>
//       </div>
//     </div>
//   );
// };



      // try {
      //   if (selectedCategory) {
      //     // Update existing category
      //     await updateSessionCategory(selectedCategory._id, values);
      //     Swal.fire(
      //       "Success!",
      //       "Session category updated successfully!",
      //       "success"
      //     );
      //   } else {
      //     // Create new category
      //     await createSessionCategory(values);
      //     Swal.fire(
      //       "Success!",
      //       "Session category created successfully!",
      //       "success"
      //     );
      //   }

      //   resetForm();
      //   setSelectedCategory(null);
      //   setIsFormOpen(false);
      //   fetchCategories();
      // } catch (error) {
      //   console.error("‚ùå Error saving session category:", error);

      //   // Try to extract backend message
      //   const backendMessage =
      //     error.response?.data?.message || "Failed to save session category.";

      //   Swal.fire("Error!", backendMessage, "warning");
      // } finally {
      //   setLoading(false);
      // }

// export default SessionCategoryForm;
//  working session booking table and form just its ui is one peside other  

// import { FieldArray, FormikProvider, useFormik } from 'formik';
// import { useEffect, useState } from 'react';
// import { useSearchParams } from 'react-router-dom';
// import * as Yup from 'yup';
// import apiClient from '../../../api/axiosConfig';
// import { createPhase, fetchPhases, fetchWeeks } from '../../../api/curriculum';

// export default function AddCurriculum() {
//    const [searchParams] = useSearchParams();
//   const courseId = searchParams.get('courseId');
//   const phaseId = searchParams.get('phaseId');
//   const weekId = searchParams.get('weekId');
//   const [step, setStep] = useState(1);
//   const [availableCourses, setAvailableCourses] = useState([]);
//   const [availablePhases, setAvailablePhases] = useState([]);
//   const [availableWeeks, setAvailableWeeks] = useState([]);
//   const [loading, setLoading] = useState(false);
//   const [toast, setToast] = useState(null);

//   const showToast = (message, type = 'success') => {
//     setToast({ message, type });
//     setTimeout(() => setToast(null), 3000);
//   };


//   useEffect(() => {
//     if (courseId) {
//       console.log("Adding Phase for Course ID:", courseId);
//     } else if (phaseId) {
//       console.log("Adding Week for Phase ID:", phaseId);
//     } else if (weekId) {
//       console.log("Adding Chapter for Week ID:", weekId);
//     }
//   }, [courseId, phaseId, weekId]);

//   useEffect(() => {
//   if (courseId) setStep(1);
//   else if (phaseId) setStep(2);
//   else if (weekId) setStep(3);
// }, [courseId, phaseId, weekId]);



//   // Fetch all data
//   useEffect(() => {
//     const fetchData = async () => {
//       setLoading(true);
//       try {
//         const [coursesResp, phasesResp, weeksResp] = await Promise.all([
//           apiClient.get('/api/courses/all'),
//           apiClient.get('/api/phases'),
//           apiClient.get('/api/weeks'),
//         ]);
//         setAvailableCourses(coursesResp.data?.data || []);
//         setAvailablePhases(phasesResp.data?.data || []);
//         setAvailableWeeks(weeksResp.data?.data || []);
//       } catch (err) {
//         showToast('Error fetching data', 'error');
//       } finally {
//         setLoading(false);
//       }
//     };
//     fetchData();
//   }, []);

//   // Refresh data after successful operations

//   const refreshData = async () => {
//     try {
//       const [phases, weeks] = await Promise.all([fetchPhases(), fetchWeeks()]);
//       setAvailablePhases(phases);
//       setAvailableWeeks(weeks);
//     } catch (err) {
//       console.error('Error refreshing data:', err);
//     }
//   };


//   // Phase Form
//   // const phaseFormik = useFormik({
//   //   initialValues: {
//   //     course: '',
//   //     title: '',
//   //     description: '',
//   //   },
//   //   validationSchema: Yup.object({
//   //     course: Yup.string().required('Course is required'),
//   //     title: Yup.string().required('Title is required'),
//   //     description: Yup.string().required('Description is required'),
//   //   }),
//   //   onSubmit: async (values, { resetForm }) => {
//   //     setLoading(true);
//   //     try {
//   //       await apiClient.post('/api/phases', [values]);
//   //       showToast('üéâ Phase created successfully!', 'success');
//   //       resetForm();
//   //       await refreshData();
//   //     } catch (err) {
//   //       showToast('‚ùå Error creating phase: ' + (err.response?.data?.message || err.message), 'error');
//   //     } finally {
//   //       setLoading(false);
//   //     }
//   //   },
//   // });

//   const phaseFormik = useFormik({
//   enableReinitialize: true, // ‚úÖ important
//   initialValues: {
//     course: courseId || '',
//     title: '',
//     description: '',
//   },
//   validationSchema: Yup.object({
//     course: Yup.string().required('Course is required'),
//     title: Yup.string().required('Title is required'),
//     // description: Yup.string().required('Description is required'),
//   }),
//   onSubmit: async (values, { resetForm }) => {
//     setLoading(true);
//     try {
//  await createPhase(values);
//       showToast('üéâ Phase created successfully!', 'success');
//       resetForm();
//       await refreshData();
//     } catch (err) {
//       showToast('‚ùå Error creating phase: ' + (err.response?.data?.message || err.message), 'error');
//     } finally {
//       setLoading(false);
//     }
//   },
// });

// // // ‚úÖ Define this helper before using
// // const getNextWeekNumber = (phaseId) => {
// //   const phaseWeeks = availableWeeks.filter(w => w.phase === phaseId);
// //   if (phaseWeeks.length === 0) return 1;
// //   return Math.max(...phaseWeeks.map(w => w.weekNumber)) + 1;
// // };

//   // Weeks Form
// const weeksFormik = useFormik({
//   enableReinitialize: true,
//   initialValues: {
//     phaseId: phaseId || '',
//     weeks: [{ weekNumber: 1, title: '' }],
//   },
//     validationSchema: Yup.object({
//       phaseId: Yup.string().required('Phase is required'),
//       weeks: Yup.array()
//         .of(
//           Yup.object({
//             weekNumber: Yup.number().min(1).required('Week number is required'),
//             // title: Yup.string().required('Week title is required'),
//           })
//         )
//         .min(1, 'At least one week is required'),
//     }),
//     onSubmit: async (values, { resetForm }) => {
//       setLoading(true);
//       try {
//         const weekPromises = values.weeks.map(week =>
//           apiClient.post('/api/weeks', [{ ...week, phase: values.phaseId }])
//         );
//         await Promise.all(weekPromises);
//         showToast('üéâ Weeks created successfully!', 'success');
//         resetForm();
//         await refreshData();
//       } catch (err) {
//         showToast('‚ùå Error creating weeks: ' + (err.response?.data?.message || err.message), 'error');
//       } finally {
//         setLoading(false);
//       }
//     },
//   });
// // useEffect(() => {
// //   if (weeksFormik.values.phaseId && availableWeeks.length > 0) {
// //     const nextWeek = getNextWeekNumber(weeksFormik.values.phaseId);

// //     const currentWeekNumber = weeksFormik.values.weeks[0]?.weekNumber;

// //     // Only set nextWeek if the field is empty
// //     if (currentWeekNumber === '' || currentWeekNumber === null || currentWeekNumber === undefined) {
// //       weeksFormik.setFieldValue('weeks[0].weekNumber', nextWeek);
// //     }
// //   }
// // }, [weeksFormik.values.phaseId, availableWeeks]);


//   // Chapter Form
//   const chapterFormik = useFormik({
//   enableReinitialize: true,
//   initialValues: {
//     week: weekId || '',
//     title: '',
//     points: [{ title: '', description: '' }],
//   },
//     validationSchema: Yup.object({
//       week: Yup.string().required('Week is required'),
//       title: Yup.string().required('Title is required'),
//       points: Yup.array()
//         .of(
//           Yup.object({
//             title: Yup.string().required('Point title is required'),
//             // description: Yup.string().required('Description is required'),
//           })
//         )
//         .min(1, 'At least one learning point is required'),
//     }),
//     onSubmit: async (values, { resetForm }) => {
//       setLoading(true);
//       try {
//         await apiClient.post('/api/chapters', [values]);
//         showToast('üéâ Chapter created successfully!', 'success');
//         resetForm();
//         await refreshData();
//       } catch (err) {
//         showToast('‚ùå Error creating chapter: ' + (err.response?.data?.message || err.message), 'error');
//       } finally {
//         setLoading(false);
//       }
//     },
//   });

//   // Toast Component
//   const Toast = ({ message, type, onClose }) => (
//     <div className={`fixed top-6 right-6 px-6 py-3 rounded-xl shadow-2xl text-white font-semibold z-50 flex items-center gap-3 animate-slide-in ${
//       type === 'success' ? 'bg-green-500' : 'bg-red-500'
//     }`}>
//       <span>{message}</span>
//       <button onClick={onClose} className="text-white hover:text-gray-200 font-bold">‚úï</button>
//     </div>
//   );

//   return (
//     <div className="min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 py-2">
//       <div className="max-w-4xl mx-auto p-6">
//         {/* Header */}
//         <div className="text-center mb-8">
//           <h1 className="text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent mb-4">
//             üéØ Curriculum Builder
//           </h1>
//           <p className="text-gray-600 text-lg">
//             Build your course curriculum step by step
//           </p>
//         </div>

//         {/* Progress Steps */}
//         <div className="bg-white rounded-2xl shadow-lg p-6 mb-8">
//           <div className="flex justify-between items-center mb-6">
//             {[
//               { label: '1. Create Phase', value: 1, icon: 'üèóÔ∏è' },
//               { label: '2. Add Weeks', value: 2, icon: 'üìÖ' },
//               { label: '3. Build Chapters', value: 3, icon: 'üìö' },
//             ].map(({ label, value, icon }) => (
//               <div key={value} className="flex flex-col items-center flex-1">
//                 <button
//                   onClick={() => setStep(value)}
//                   className={`flex items-center gap-3 px-6 py-3 rounded-xl font-semibold transition-all duration-300 ${
//                     step === value
//                       ? 'bg-gradient-to-r from-blue-500 to-purple-500 text-white shadow-lg scale-105'
//                       : 'bg-gray-100 text-gray-600 hover:bg-gray-200'
//                   }`}
//                 >
//                   <span className="text-xl">{icon}</span>
//                   <span className="hidden sm:block">{label}</span>
//                 </button>
//                 <div className={`w-full h-1 mt-3 rounded-full ${
//                   step >= value ? 'bg-gradient-to-r from-blue-500 to-purple-500' : 'bg-gray-200'
//                 }`}></div>
//               </div>
//             ))}
//           </div>
//         </div>

//         {/* Loading Overlay */}
//         {loading && (
//           <div className="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50">
//             <div className="bg-white rounded-2xl p-8 text-center shadow-2xl">
//               <div className="w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"></div>
//               <p className="text-gray-700 font-semibold">Processing...</p>
//             </div>
//           </div>
//         )}

//         {/* Phase Form */}
//         {step === 1 && (
//           <div className="bg-white rounded-2xl shadow-lg p-8">
//             <h2 className="text-2xl font-bold text-gray-800 mb-6 flex items-center gap-3">
//               <span className="text-3xl">üèóÔ∏è</span>
//               Create New Phase
//             </h2>
//             <form onSubmit={phaseFormik.handleSubmit} className="space-y-6">
//               <div>
//                 <label className="block text-sm font-semibold text-gray-700 mb-2">
//                   Select Course
//                 </label>
//                 <select
//                   name="course"
//                   value={phaseFormik.values.course}
//                   onChange={phaseFormik.handleChange}
//                   onBlur={phaseFormik.handleBlur}
//                   className="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all"
//                 >
//                   <option value="">Choose a Course</option>
//                   {availableCourses.map((course) => (
//                     <option key={course._id} value={course._id}>
//                       {course.title}
//                     </option>
//                   ))}
//                 </select>
//                 {phaseFormik.touched.course && phaseFormik.errors.course && (
//                   <p className="text-red-500 text-sm mt-1">{phaseFormik.errors.course}</p>
//                 )}
//               </div>

//               <div>
//                 <label className="block text-sm font-semibold text-gray-700 mb-2">
//                   Phase Title
//                 </label>
//                 <input
//                   type="text"
//                   name="title"
//                   value={phaseFormik.values.title}
//                   onChange={phaseFormik.handleChange}
//                   onBlur={phaseFormik.handleBlur}
//                   placeholder="e.g., Foundations, Advanced Concepts, etc."
//                   className="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all"
//                 />
//                 {phaseFormik.touched.title && phaseFormik.errors.title && (
//                   <p className="text-red-500 text-sm mt-1">{phaseFormik.errors.title}</p>
//                 )}
//               </div>

//               <div>
//                 <label className="block text-sm font-semibold text-gray-700 mb-2">
//                   Description
//                 </label>
//                 <textarea
//                   name="description"
//                   rows="4"
//                   value={phaseFormik.values.description}
//                   onChange={phaseFormik.handleChange}
//                   onBlur={phaseFormik.handleBlur}
//                   placeholder="Describe what students will learn in this phase..."
//                   className="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all resize-none"
//                 />
//                 {phaseFormik.touched.description && phaseFormik.errors.description && (
//                   <p className="text-red-500 text-sm mt-1">{phaseFormik.errors.description}</p>
//                 )}
//               </div>

//               <div className="flex gap-4 pt-4">
//                 <button
//                   type="submit"
//                   disabled={loading}
//                   className="flex-1 bg-gradient-to-r from-blue-500 to-purple-500 text-white py-4 rounded-xl font-bold hover:shadow-xl transition-all duration-300 disabled:opacity-50"
//                 >
//                   {loading ? 'Creating...' : 'üöÄ Create Phase'}
//                 </button>
//                 <button
//                   type="button"
//                   onClick={() => setStep(2)}
//                   className="px-6 bg-gray-100 text-gray-700 py-4 rounded-xl font-bold hover:bg-gray-200 transition-all"
//                 >
//                   Next: Add Weeks ‚Üí
//                 </button>
//               </div>
//             </form>
//           </div>
//         )}

//         {/* Weeks Form */}
//         {step === 2 && (
//           <FormikProvider value={weeksFormik}>
//             <div className="bg-white rounded-2xl shadow-lg p-8">
//               <h2 className="text-2xl font-bold text-gray-800 mb-6 flex items-center gap-3">
//                 <span className="text-3xl">üìÖ</span>
//                 Add Weeks to Phase
//               </h2>
//               <form onSubmit={weeksFormik.handleSubmit} className="space-y-6">
//                 <div>
//                   <label className="block text-sm font-semibold text-gray-700 mb-2">
//                     Select Phase
//                   </label>
//                   <select
//                     name="phaseId"
//                     value={weeksFormik.values.phaseId}
//                     onChange={weeksFormik.handleChange}
//                     onBlur={weeksFormik.handleBlur}
//                     className="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all"
//                   >
//                     <option value="">Choose a Phase</option>
//                     {availablePhases.map((phase) => (
//                       <option key={phase._id} value={phase._id}>
//                         {phase.title}
//                       </option>
//                     ))}
//                   </select>
//                   {weeksFormik.touched.phaseId && weeksFormik.errors.phaseId && (
//                     <p className="text-red-500 text-sm mt-1">{weeksFormik.errors.phaseId}</p>
//                   )}
//                 </div>

//                 <FieldArray name="weeks">
//                   {({ push, remove }) => (
//                     <div className="space-y-4">
//                       <div className="flex justify-between items-center">
//                         <label className="block text-sm font-semibold text-gray-700">
//                           Week Details
//                         </label>
//                         <button
//                           type="button"
//                           onClick={() => push({ weekNumber: weeksFormik.values.weeks.length + 1, title: '' })}
//                           className="bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition-all"
//                         >
//                           ‚ûï Add Week
//                         </button>
//                       </div>

//                       {weeksFormik.values.weeks.map((week, index) => (
//                         <div key={index} className="border-2 border-gray-200 rounded-xl p-4 bg-gray-50">
//                           <div className="flex gap-4 items-start">
//                             <div className="flex-1">
//                               <label className="block text-sm font-medium text-gray-700 mb-1">
//                                 Week Number
//                               </label>
//                               <input
//                                 type="number"
//                                 name={`weeks.${index}.weekNumber`}
//                                 value={week.weekNumber}
//                                 onChange={weeksFormik.handleChange}
//                                 className="w-full px-3 py-2 border border-gray-300 rounded-lg"
//                                 min="1"
//                               />
//                             </div>
//                             <div className="flex-1">
//                               <label className="block text-sm font-medium text-gray-700 mb-1">
//                                 Week Title
//                               </label>
//                               <input
//                                 type="text"
//                                 name={`weeks.${index}.title`}
//                                 value={week.title}
//                                 onChange={weeksFormik.handleChange}
//                                 placeholder="e.g., JavaScript Fundamentals"
//                                 className="w-full px-3 py-2 border border-gray-300 rounded-lg"
//                               />
//                             </div>
//                             <button
//                               type="button"
//                               onClick={() => remove(index)}
//                               disabled={weeksFormik.values.weeks.length === 1}
//                               className="text-red-500 hover:text-red-700 disabled:text-gray-400 mt-6"
//                             >
//                               üóëÔ∏è
//                             </button>
//                           </div>
//                           {weeksFormik.errors.weeks?.[index] && (
//                             <p className="text-red-500 text-sm mt-2">
//                               {Object.values(weeksFormik.errors.weeks[index]).join(', ')}
//                             </p>
//                           )}
//                         </div>
//                       ))}
//                     </div>
//                   )}
//                 </FieldArray>

//                 <div className="flex gap-4 pt-4">
//                   <button
//                     type="button"
//                     onClick={() => setStep(1)}
//                     className="px-6 bg-gray-100 text-gray-700 py-4 rounded-xl font-bold hover:bg-gray-200 transition-all"
//                   >
//                     ‚Üê Back to Phases
//                   </button>
//                   <button
//                     type="submit"
//                     disabled={loading}
//                     className="flex-1 bg-gradient-to-r from-blue-500 to-purple-500 text-white py-4 rounded-xl font-bold hover:shadow-xl transition-all duration-300 disabled:opacity-50"
//                   >
//                     {loading ? 'Creating...' : 'üöÄ Create Weeks'}
//                   </button>
//                   <button
//                     type="button"
//                     onClick={() => setStep(3)}
//                     className="px-6 bg-gray-100 text-gray-700 py-4 rounded-xl font-bold hover:bg-gray-200 transition-all"
//                   >
//                     Next: Add Chapters ‚Üí
//                   </button>
//                 </div>
//               </form>
//             </div>
//           </FormikProvider>
//         )}

//         {/* Chapter Form */}
//         {step === 3 && (
//           <FormikProvider value={chapterFormik}>
//             <div className="bg-white rounded-2xl shadow-lg p-8">
//               <h2 className="text-2xl font-bold text-gray-800 mb-6 flex items-center gap-3">
//                 <span className="text-3xl">üìö</span>
//                 Build Chapter Content
//               </h2>
//               <form onSubmit={chapterFormik.handleSubmit} className="space-y-6">
//                 <div>
//                   <label className="block text-sm font-semibold text-gray-700 mb-2">
//                     Select Week
//                   </label>
//                   <select
//                     name="week"
//                     value={chapterFormik.values.week}
//                     onChange={chapterFormik.handleChange}
//                     onBlur={chapterFormik.handleBlur}
//                     className="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all"
//                   >
//                     <option value="">Choose a Week</option>
//                     {availableWeeks.map((week) => (
//                       <option key={week._id} value={week._id}>
//                         Week {week.weekNumber}: {week.title}
//                       </option>
//                     ))}
//                   </select>
//                   {chapterFormik.touched.week && chapterFormik.errors.week && (
//                     <p className="text-red-500 text-sm mt-1">{chapterFormik.errors.week}</p>
//                   )}
//                 </div>

//                 <div>
//                   <label className="block text-sm font-semibold text-gray-700 mb-2">
//                     Chapter Title
//                   </label>
//                   <input
//                     type="text"
//                     name="title"
//                     value={chapterFormik.values.title}
//                     onChange={chapterFormik.handleChange}
//                     onBlur={chapterFormik.handleBlur}
//                     placeholder="e.g., Introduction to React Components"
//                     className="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all"
//                   />
//                   {chapterFormik.touched.title && chapterFormik.errors.title && (
//                     <p className="text-red-500 text-sm mt-1">{chapterFormik.errors.title}</p>
//                   )}
//                 </div>

//                 <FieldArray name="points">
//                   {({ push, remove }) => (
//                     <div className="space-y-4">
//                       <div className="flex justify-between items-center">
//                         <label className="block text-sm font-semibold text-gray-700">
//                           Learning Points
//                         </label>
//                         <button
//                           type="button"
//                           onClick={() => push({ title: '', description: '' })}
//                           className="bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition-all"
//                         >
//                           ‚ûï Add Point
//                         </button>
//                       </div>

//                       {chapterFormik.values.points.map((point, index) => (
//                         <div key={index} className="border-2 border-gray-200 rounded-xl p-4 bg-gray-50">
//                           <div className="flex gap-4">
//                             <div className="flex-1 space-y-3">
//                               <div>
//                                 <label className="block text-sm font-medium text-gray-700 mb-1">
//                                   Point Title
//                                 </label>
//                                 <input
//                                   type="text"
//                                   name={`points.${index}.title`}
//                                   value={point.title}
//                                   onChange={chapterFormik.handleChange}
//                                   placeholder="e.g., Understanding JSX"
//                                   className="w-full px-3 py-2 border border-gray-300 rounded-lg"
//                                 />
//                               </div>
//                               <div>
//                                 <label className="block text-sm font-medium text-gray-700 mb-1">
//                                   Description
//                                 </label>
//                                 <textarea
//                                   name={`points.${index}.description`}
//                                   value={point.description}
//                                   onChange={chapterFormik.handleChange}
//                                   placeholder="Detailed explanation..."
//                                   rows="3"
//                                   className="w-full px-3 py-2 border border-gray-300 rounded-lg resize-none"
//                                 />
//                               </div>
//                             </div>
//                             <button
//                               type="button"
//                               onClick={() => remove(index)}
//                               disabled={chapterFormik.values.points.length === 1}
//                               className="text-red-500 hover:text-red-700 disabled:text-gray-400"
//                             >
//                               üóëÔ∏è
//                             </button>
//                           </div>
//                           {chapterFormik.errors.points?.[index] && (
//                             <p className="text-red-500 text-sm mt-2">
//                               {Object.values(chapterFormik.errors.points[index]).join(', ')}
//                             </p>
//                           )}
//                         </div>
//                       ))}
//                     </div>
//                   )}
//                 </FieldArray>

//                 <div className="flex gap-4 pt-4">
//                   <button
//                     type="button"
//                     onClick={() => setStep(2)}
//                     className="px-6 bg-gray-100 text-gray-700 py-4 rounded-xl font-bold hover:bg-gray-200 transition-all"
//                   >
//                     ‚Üê Back to Weeks
//                   </button>
//                   <button
//                     type="submit"
//                     disabled={loading}
//                     className="flex-1 bg-gradient-to-r from-blue-500 to-purple-500 text-white py-4 rounded-xl font-bold hover:shadow-xl transition-all duration-300 disabled:opacity-50"
//                   >
//                     {loading ? 'Creating...' : 'üöÄ Create Chapter'}
//                   </button>
//                 </div>
//               </form>
//             </div>
//           </FormikProvider>
//         )}

//         {/* Toast */}
//         {toast && (
//           <Toast
//             message={toast.message}
//             type={toast.type}
//             onClose={() => setToast(null)}
//           />
//         )}
//       </div>
//     </div>
//   );
// }

// this is the add curriculum working section with old ui without automatically switching sections 

// import { useEffect, useState } from "react";
// import { useNavigate } from "react-router-dom";
// import apiClient from "../../../api/axiosConfig";
// import { fetchCourseById, getAllCourses } from "../../../api/courses";

// // Enhanced Modal Component
// const Modal = ({ title, values, onSave, onClose, type = "edit" }) => {
//   const [formData, setFormData] = useState(values);

//   const handleChange = (key, val) => setFormData({ ...formData, [key]: val });

//   const handlePointChange = (index, key, val) => {
//     const updatedPoints = [...(formData.points || [])];
//     updatedPoints[index][key] = val;
//     setFormData({ ...formData, points: updatedPoints });
//   };

//   const handleAddPoint = () => {
//     setFormData({
//       ...formData,
//       points: [...(formData.points || []), { title: "", description: "" }],
//     });
//   };

//   const handleRemovePoint = (index) => {
//     const updatedPoints = formData.points.filter((_, i) => i !== index);
//     setFormData({ ...formData, points: updatedPoints });
//   };

//   return (
//     <div className="fixed inset-0 flex items-center justify-center bg-black/40 backdrop-blur-sm z-50">
//       <div className="bg-white rounded-2xl w-[600px] shadow-2xl p-6 relative max-h-[85vh] overflow-y-auto">
//         <h2 className="text-2xl font-bold text-gray-800 mb-6 flex items-center gap-2">
//           {type === "delete" ? "üóëÔ∏è" : "‚úèÔ∏è"} {title}
//         </h2>

//         {type === "delete" ? (
//           <div className="text-center py-8">
//             <div className="text-6xl mb-4">‚ö†Ô∏è</div>
//             <p className="text-gray-700 text-lg mb-2">
//               Are you sure you want to delete this?
//             </p>
//             <p className="text-gray-500">This action cannot be undone.</p>
//           </div>
//         ) : (
//           <>
//             {/* Title field */}
//             <div className="mb-6">
//               <label className="text-gray-700 text-sm font-semibold mb-2 block">
//                 Title
//               </label>
//               <input
//                 type="text"
//                 value={formData.title || ""}
//                 onChange={(e) => handleChange("title", e.target.value)}
//                 className="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all"
//                 placeholder="Enter title..."
//               />
//             </div>

//             {/* Description field for phases */}
//             {formData.description !== undefined && (
//               <div className="mb-6">
//                 <label className="text-gray-700 text-sm font-semibold mb-2 block">
//                   Description
//                 </label>
//                 <textarea
//                   value={formData.description || ""}
//                   onChange={(e) => handleChange("description", e.target.value)}
//                   rows="3"
//                   className="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all resize-none"
//                   placeholder="Enter description..."
//                 />
//               </div>
//             )}

//             {/* Week number field for weeks */}
//             {formData.weekNumber !== undefined && (
//               <div className="mb-6">
//                 <label className="text-gray-700 text-sm font-semibold mb-2 block">
//                   Week Number
//                 </label>
//                 <input
//                   type="number"
//                   value={formData.weekNumber || ""}
//                   onChange={(e) =>
//                     handleChange("weekNumber", parseInt(e.target.value))
//                   }
//                   className="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all"
//                   min="1"
//                 />
//               </div>
//             )}

//             {/* Points for chapters */}
//             {formData.points !== undefined && (
//               <div className="mb-6">
//                 <div className="flex justify-between items-center mb-4">
//                   <label className="text-gray-700 text-sm font-semibold">
//                     Learning Points
//                   </label>
//                   <button
//                     type="button"
//                     onClick={handleAddPoint}
//                     className="bg-green-500 text-white px-3 py-1 rounded-lg text-sm hover:bg-green-600 transition-all"
//                   >
//                     ‚ûï Add Point
//                   </button>
//                 </div>
//                 <div className="space-y-4 max-h-60 overflow-y-auto">
//                   {(formData.points || []).map((point, index) => (
//                     <div
//                       key={index}
//                       className="border-2 border-gray-200 rounded-xl p-4 bg-gray-50"
//                     >
//                       <div className="flex justify-between items-center mb-3">
//                         <h4 className="text-sm font-semibold text-gray-700">
//                           Point {index + 1}
//                         </h4>
//                         <button
//                           onClick={() => handleRemovePoint(index)}
//                           className="text-red-500 hover:text-red-700 text-sm font-medium"
//                         >
//                           üóëÔ∏è Remove
//                         </button>
//                       </div>
//                       <input
//                         type="text"
//                         placeholder="Point Title"
//                         value={point.title}
//                         onChange={(e) =>
//                           handlePointChange(index, "title", e.target.value)
//                         }
//                         className="w-full px-3 py-2 border border-gray-300 rounded-lg mb-2 focus:ring-2 focus:ring-blue-200"
//                       />
//                       <textarea
//                         placeholder="Description"
//                         value={point.description}
//                         onChange={(e) =>
//                           handlePointChange(
//                             index,
//                             "description",
//                             e.target.value
//                           )
//                         }
//                         rows="2"
//                         className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-200 resize-none"
//                       />
//                     </div>
//                   ))}
//                 </div>
//               </div>
//             )}
//           </>
//         )}

//         {/* Action Buttons */}
//         <div className="flex justify-end gap-3 mt-8 pt-6 border-t border-gray-200">
//           <button
//             onClick={onClose}
//             className="px-6 py-3 bg-gray-200 text-gray-700 rounded-xl font-semibold hover:bg-gray-300 transition-all"
//           >
//             Cancel
//           </button>
//           <button
//             onClick={() => onSave(formData)}
//             className={`px-6 py-3 rounded-xl font-semibold text-white flex items-center gap-2 transition-all ${
//               type === "delete"
//                 ? "bg-red-500 hover:bg-red-600"
//                 : "bg-blue-500 hover:bg-blue-600"
//             }`}
//           >
//             {type === "delete" ? "üóëÔ∏è Delete" : "üíæ Save Changes"}
//           </button>
//         </div>
//       </div>
//     </div>
//   );
// };

// // Toast Component
// const Toast = ({ message, type, onClose }) => (
//   <div
//     className={`fixed top-6 right-6 px-6 py-3 rounded-xl shadow-2xl text-white font-semibold z-50 flex items-center gap-3 animate-slide-in ${
//       type === "success" ? "bg-green-500" : "bg-red-500"
//     }`}
//   >
//     <span>{message}</span>
//     <button
//       onClick={onClose}
//       className="text-white hover:text-gray-200 font-bold"
//     >
//       ‚úï
//     </button>
//   </div>
// );

// const ManageCurriculum = () => {
//   const [courses, setCourses] = useState([]);
//   const [selectedCourse, setSelectedCourse] = useState("");
//   const [phases, setPhases] = useState([]);
//   const [openPhase, setOpenPhase] = useState(null);
//   const [openWeek, setOpenWeek] = useState(null);
//   const [loading, setLoading] = useState(false);
//   const [toast, setToast] = useState(null);
//   const [modal, setModal] = useState(null);
//   const navigate = useNavigate();

//   const showToast = (msg, type = "success") => {
//     setToast({ message: msg, type });
//     setTimeout(() => setToast(null), 3000);
//   };

//   // Fetch Courses
//   useEffect(() => {
//     const fetchCourses = async () => {
//       try {
//         const coursesData = await getAllCourses();
//         setCourses(coursesData || []);
//       } catch (error) {
//         showToast("‚ùå Failed to load courses", "error");
//       }
//     };

//     fetchCourses();
//   }, []);

//   // Fetch Phases for selected course
//   const fetchPhases = async (courseId) => {
//     if (!courseId) return;

//     setLoading(true);
//     try {
//       const course = await fetchCourseById(courseId);
//       setPhases(course?.phases || []);
//     } catch (error) {
//       showToast("‚ùå Failed to load curriculum", "error");
//     } finally {
//       setLoading(false);
//     }
//   };
//   const handleCourseChange = (e) => {
//     const id = e.target.value;
//     setSelectedCourse(id);
//     setOpenPhase(null);
//     setOpenWeek(null);
//     if (id) fetchPhases(id);
//   };

//   // CRUD Operations
//   const updateEntity = async (url, payload, successMsg) => {
//     setLoading(true);
//     try {
//       await apiClient.put(url, payload);
//       showToast(`‚úÖ ${successMsg}`, "success");
//       fetchPhases(selectedCourse);
//     } catch (err) {
//       showToast(
//         `‚ùå Failed to update: ${err.response?.data?.message || err.message}`,
//         "error"
//       );
//     } finally {
//       setLoading(false);
//     }
//   };

//   const deleteEntity = async (url, successMsg) => {
//     setLoading(true);
//     try {
//       await apiClient.delete(url);
//       showToast(`‚úÖ ${successMsg}`, "success");
//       fetchPhases(selectedCourse);
//     } catch (err) {
//       showToast(
//         `‚ùå Failed to delete: ${err.response?.data?.message || err.message}`,
//         "error"
//       );
//     } finally {
//       setLoading(false);
//     }
//   };

//   // Phase Operations
//   const handleEditPhase = (phase) => {
//     setModal({
//       title: "Edit Phase",
//       values: {
//         title: phase.title,
//         description: phase.description,
//         course: selectedCourse,
//       },
//       onSave: (data) => {
//         setModal(null);
//         updateEntity(
//           `/api/phases/${phase._id}`,
//           data,
//           "Phase updated successfully!"
//         );
//       },
//     });
//   };

//   const handleDeletePhase = (phase) => {
//     setModal({
//       title: "Delete Phase",
//       values: {},
//       onSave: () => {
//         setModal(null);
//         deleteEntity(`/api/phases/${phase._id}`, "Phase deleted successfully!");
//       },
//       type: "delete",
//     });
//   };

//   // Week Operations
//   const handleEditWeek = (week) => {
//     setModal({
//       title: "Edit Week",
//       values: {
//         title: week.title,
//         weekNumber: week.weekNumber,
//         phase: week.phase,
//       },
//       onSave: (data) => {
//         setModal(null);
//         updateEntity(
//           `/api/weeks/${week._id}`,
//           data,
//           "Week updated successfully!"
//         );
//       },
//     });
//   };

//   const handleDeleteWeek = (week) => {
//     setModal({
//       title: "Delete Week",
//       values: {},
//       onSave: () => {
//         setModal(null);
//         deleteEntity(`/api/weeks/${week._id}`, "Week deleted successfully!");
//       },
//       type: "delete",
//     });
//   };

//   // Chapter Operations
//   const handleEditChapter = (chapter) => {
//     setModal({
//       title: "Edit Chapter",
//       values: {
//         title: chapter.title || "",
//         points: chapter.points || [],
//         week: chapter.week,
//       },
//       onSave: (data) => {
//         setModal(null);
//         updateEntity(
//           `/api/chapters/${chapter._id}`,
//           data,
//           "Chapter updated successfully!"
//         );
//       },
//     });
//   };

//   const handleDeleteChapter = (chapter) => {
//     setModal({
//       title: "Delete Chapter",
//       values: {},
//       onSave: () => {
//         setModal(null);
//         deleteEntity(
//           `/api/chapters/${chapter._id}`,
//           "Chapter deleted successfully!"
//         );
//       },
//       type: "delete",
//     });
//   };

//   return (
//     <div className="min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 py-8">
//       <div className="max-w-6xl mx-auto p-6">
//         {/* Header */}
//         <div className="text-center mb-8">
//           <h1 className="text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent mb-4">
//             üìö Manage Curriculum
//           </h1>
//           <p className="text-gray-600 text-lg">
//             View, edit, and manage your course curriculum structure
//           </p>
//         </div>

//         {/* Course Selector */}
//         <div className="bg-white rounded-2xl shadow-lg p-6 mb-8">
//           <label className="block text-lg font-semibold text-gray-700 mb-3">
//             üéØ Select Course
//           </label>
//           <select
//             value={selectedCourse}
//             onChange={handleCourseChange}
//             className="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all"
//           >
//             <option value="">-- Choose a Course --</option>
//             {courses.map((course) => (
//               <option key={course._id} value={course._id}>
//                 {course.title}
//               </option>
//             ))}
//           </select>
//         </div>

//         {/* Loading State */}
//         {loading && (
//           <div className="text-center py-12">
//             <div className="w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"></div>
//             <p className="text-gray-600 font-semibold">Loading...</p>
//           </div>
//         )}

//         {/* Curriculum Structure */}
//         {!loading && phases.length > 0 && (
//           <div className="space-y-6">
//             {phases.map((phase, index) => (
//               <div
//                 key={phase._id}
//                 className="bg-white rounded-2xl shadow-lg overflow-hidden border-2 border-gray-100 hover:border-blue-200 transition-all duration-300"
//               >
//                 {/* Phase Header */}
//                 <div
//                   onClick={() =>
//                     setOpenPhase(openPhase === phase._id ? null : phase._id)
//                   }
//                   className="flex justify-between items-center p-6 cursor-pointer bg-gradient-to-r from-blue-50 to-purple-50 hover:from-blue-100 hover:to-purple-100 transition-all"
//                 >
//                   <div className="flex items-center gap-4">
//                     {/* Render phase number only if this phase is open */}
//                     {/* {openPhase === phase._id && ( */}
//                     <div className="w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-500 rounded-xl flex items-center justify-center text-white text-xl">
//                       {index + 1}
//                     </div>
//                     {/* )} */}
//                     <div>
//                       <h3 className="text-xl font-bold text-gray-800">
//                         {phase.title}
//                       </h3>
//                       <p className="text-gray-600">{phase.description}</p>
//                     </div>
//                   </div>
//                   <div className="flex items-center gap-3">
//                     <button
//                       onClick={(e) => {
//                         e.stopPropagation();
//                         handleEditPhase(phase);
//                       }}
//                       className="w-10 h-10 bg-blue-500 text-white rounded-lg flex items-center justify-center hover:bg-blue-600 transition-all"
//                     >
//                       ‚úèÔ∏è
//                     </button>
//                     <button
//                       onClick={(e) => {
//                         e.stopPropagation();
//                         handleDeletePhase(phase);
//                       }}
//                       className="w-10 h-10 bg-red-500 text-white rounded-lg flex items-center justify-center hover:bg-red-600 transition-all"
//                     >
//                       üóëÔ∏è
//                     </button>
//                     {selectedCourse && (
//                       <div className="flex justify-end">
//                         <button
//                           onClick={() =>
//                             navigate(
//                               `/admin/add-curriculum?courseId=${selectedCourse}`
//                             )
//                           }
//                           className="bg-green-500 text-white px-2 py-2 rounded-lg font-semibold hover:bg-green-600 transition-all"
//                         >
//                           ‚ûï
//                         </button>
//                       </div>
//                     )}
//                     <span className="text-2xl text-blue-600">
//                       {openPhase === phase._id ? "üîΩ" : "‚ñ∂Ô∏è"}
//                     </span>
//                   </div>
//                 </div>

//                 {/* Weeks Section */}
//                 {openPhase === phase._id &&
//                   phase.weeks &&
//                   phase.weeks.length > 0 && (
//                     <div className="p-6 bg-gray-50 space-y-4">
//                       {phase.weeks.map((week) => (
//                         <div
//                           key={week._id}
//                           className="bg-white rounded-xl border-2 border-gray-200 overflow-hidden"
//                         >
//                           {/* Week Header */}
//                           <div
//                             onClick={() =>
//                               setOpenWeek(
//                                 openWeek === week._id ? null : week._id
//                               )
//                             }
//                             className="flex justify-between items-center p-4 cursor-pointer bg-gradient-to-r from-gray-50 to-blue-50 hover:from-gray-100 hover:to-blue-100 transition-all"
//                           >
//                             <div className="flex items-center gap-3">
//                               <div className="w-10 h-10 bg-gradient-to-br from-green-500 to-blue-500 rounded-lg flex items-center justify-center text-white">
//                                 üìÖ
//                               </div>
//                               <div>
//                                 <h4 className="font-semibold text-gray-800">
//                                   Week {week.weekNumber}: {week.title}
//                                 </h4>
//                                 <p className="text-sm text-gray-600">
//                                   {week.chapters?.length || 0} chapters
//                                 </p>
//                               </div>
//                             </div>
//                             <div className="flex items-center gap-2">
//                               <button
//                                 onClick={(e) => {
//                                   e.stopPropagation();
//                                   handleEditWeek(week);
//                                 }}
//                                 className="w-8 h-8 bg-blue-500 text-white rounded-lg flex items-center justify-center hover:bg-blue-600 transition-all text-sm"
//                               >
//                                 ‚úèÔ∏è
//                               </button>
//                               <button
//                                 onClick={(e) => {
//                                   e.stopPropagation();
//                                   handleDeleteWeek(week);
//                                 }}
//                                 className="w-8 h-8 bg-red-500 text-white rounded-lg flex items-center justify-center hover:bg-red-600 transition-all text-sm"
//                               >
//                                 üóëÔ∏è
//                               </button>
//                               <button
//                                 onClick={(e) => {
//                                   e.stopPropagation();
//                                   navigate(
//                                     `/admin/add-curriculum?weekId=${week._id}`
//                                   );
//                                 }}
//                                 className="w-8 h-8 bg-green-500 text-white rounded-lg flex items-center justify-center hover:bg-green-600 transition-all text-sm"
//                                 title="Add Chapter"
//                               >
//                                 ‚ûï
//                               </button>
//                               <span className="text-2xl text-blue-600">
//                                 {openWeek === week._id ? "üîΩ" : "‚ñ∂Ô∏è"}
//                               </span>
//                             </div>
//                           </div>

//                           {/* Chapters Section */}
//                           {openWeek === week._id &&
//                             week.chapters &&
//                             week.chapters.length > 0 && (
//                               <div className="p-4 bg-white space-y-3">
//                                 {week.chapters.map((chapter, index) => (
//                                   <div
//                                     key={chapter._id}
//                                     className="border-2 border-gray-200 rounded-lg p-4 bg-gradient-to-r from-gray-50 to-white hover:from-blue-50 transition-all"
//                                   >
//                                     <div className="flex justify-between items-start">
//                                       <div className="flex items-start gap-3 flex-1">
//                                         <div className="w-8 h-8 bg-gradient-to-br from-orange-500 to-red-500 rounded-lg flex items-center justify-center text-white text-sm mt-1">
//                                           üìö
//                                         </div>
//                                         <div className="flex-1">
//                                           <h5 className="font-semibold text-gray-800 mb-2">
//                                             {chapter.title ||
//                                               `Chapter ${index + 1}`}
//                                           </h5>
//                                           <div className="space-y-2">
//                                             {chapter.points?.map(
//                                               (point, pointIndex) => (
//                                                 <div
//                                                   key={point._id || pointIndex}
//                                                   className="flex items-start gap-2 text-sm"
//                                                 >
//                                                   <span className="text-green-500 mt-1">
//                                                     ‚úÖ
//                                                   </span>
//                                                   <div>
//                                                     <span className="font-medium text-gray-700">
//                                                       {point.title}
//                                                     </span>
//                                                     {point.description && (
//                                                       <p className="text-gray-600 text-xs mt-1">
//                                                         {point.description}
//                                                       </p>
//                                                     )}
//                                                   </div>
//                                                 </div>
//                                               )
//                                             )}
//                                           </div>
//                                         </div>
//                                       </div>
//                                       <div className="flex gap-2">
//                                         <button
//                                           onClick={() =>
//                                             handleEditChapter(chapter)
//                                           }
//                                           className="w-8 h-8 bg-blue-500 text-white rounded-lg flex items-center justify-center hover:bg-blue-600 transition-all text-sm"
//                                         >
//                                           ‚úèÔ∏è
//                                         </button>
//                                         <button
//                                           onClick={() =>
//                                             handleDeleteChapter(chapter)
//                                           }
//                                           className="w-8 h-8 bg-red-500 text-white rounded-lg flex items-center justify-center hover:bg-red-600 transition-all text-sm"
//                                         >
//                                           üóëÔ∏è
//                                         </button>
//                                         <button
//                                           onClick={(e) => {
//                                             e.stopPropagation();
//                                             navigate(
//                                               `/admin/add-curriculum?weekId=${week._id}`
//                                             );
//                                           }}
//                                           className="w-8 h-8 bg-green-500 text-white rounded-lg flex items-center justify-center hover:bg-green-600 transition-all text-sm"
//                                           title="Add Chapter"
//                                         >
//                                           ‚ûï
//                                         </button>
//                                       </div>
//                                     </div>
//                                   </div>
//                                 ))}
//                               </div>
//                             )}
//                         </div>
//                       ))}
//                     </div>
//                   )}
//               </div>
//             ))}
//           </div>
//         )}

//         {/* Empty State */}
//         {!loading && selectedCourse && phases.length === 0 && (
//           <div className="text-center py-16 bg-white rounded-2xl shadow-lg">
//             <div className="text-6xl mb-4">üìù</div>
//             <h3 className="text-xl font-semibold text-gray-700 mb-2">
//               No Curriculum Found
//             </h3>
//             <p className="text-gray-500 mb-6">
//               This course doesn't have any curriculum yet.
//             </p>
//             <button
//               onClick={() => (window.location.href = "/admin/add-curriculum")}
//               className="bg-gradient-to-r from-blue-500 to-purple-500 text-white px-8 py-3 rounded-xl font-semibold hover:shadow-xl transition-all"
//             >
//               üöÄ Create Curriculum
//             </button>
//           </div>
//         )}

//         {/* Initial State */}
//         {!loading && !selectedCourse && (
//           <div className="text-center py-20 bg-white rounded-2xl shadow-lg">
//             <div className="text-6xl mb-4">üéØ</div>
//             <h3 className="text-xl font-semibold text-gray-700 mb-2">
//               Select a Course
//             </h3>
//             <p className="text-gray-500">
//               Choose a course from the dropdown above to manage its curriculum.
//             </p>
//           </div>
//         )}

//         {/* Toast */}
//         {toast && (
//           <Toast
//             message={toast.message}
//             type={toast.type}
//             onClose={() => setToast(null)}
//           />
//         )}

//         {/* Modal */}
//         {modal && (
//           <Modal
//             title={modal.title}
//             values={modal.values}
//             onSave={modal.onSave}
//             onClose={() => setModal(null)}
//             type={modal.type}
//           />
//         )}
//       </div>
//     </div>
//   );
// };

// export default ManageCurriculum;
//  this is the working manage curriculum section with its old ui 


// import { FormikProvider, useFormik } from "formik";
// import { useEffect, useState } from "react";
// import { useNavigate, useParams } from "react-router-dom";
// import * as Yup from "yup";
// import apiClient from "../../../api/axiosConfig";

// export default function AddLectures() {
//   const { lectureId } = useParams(); // Get lectureId from route
//   const navigate = useNavigate();

//   const [availableChapters, setAvailableChapters] = useState([]);
//   const [loading, setLoading] = useState(false);

//   // ‚úÖ Fetch chapters
//   useEffect(() => {
//     const fetchChapters = async () => {
//       try {
//         const res = await apiClient.get("/api/chapters");
//         setAvailableChapters(res.data?.data || []);
//       } catch (err) {
//         console.error("Error fetching chapters:", err);
//       }
//     };

//     fetchChapters();
//   }, []);

//   // ‚úÖ Formik setup
//   const formik = useFormik({
//     initialValues: {
//       chapter: "",
//       title: "",
//       contentUrl: null,
//       duration: "",
//       description: "",
//     },
//     validationSchema: Yup.object({
//       chapter: Yup.string().required("Chapter is required"),
//       title: Yup.string().required("Title is required"),
//       duration: Yup.string().required("Duration is required"),
//       description: Yup.string().required("Description is required"),
//     }),
//     onSubmit: async (values, { resetForm }) => {
//       try {
//         const formData = new FormData();
//         formData.append("chapter", values.chapter);
//         formData.append("title", values.title);
//         formData.append("duration", values.duration);
//         formData.append("description", values.description);
//         if (values.contentUrl) formData.append("contentUrl", values.contentUrl);

//         if (lectureId) {
//           // ‚úÖ Update lecture
//           await apiClient.put(`/api/lectures/${lectureId}`, formData, {
//             headers: { "Content-Type": "multipart/form-data" },
//           });
//           alert("Lecture updated successfully!");
//         } else {
//           // ‚úÖ Add new lecture
//           await apiClient.post("/api/lectures", formData, {
//             headers: { "Content-Type": "multipart/form-data" },
//           });
//           alert("Lecture created successfully!");
//         }

//         resetForm();
//         navigate("/admin/manage-course-videos");
//       } catch (error) {
//         console.error(error);
//         alert(
//           "Failed to submit lecture: " +
//             (error.response?.data?.message || error.message)
//         );
//       }
//     },
//   });

//   // ‚úÖ Fetch lecture data if editing
//   useEffect(() => {
//     if (!lectureId) return;

//     const fetchLecture = async () => {
//       setLoading(true);
//       try {
//         const res = await apiClient.get(`/api/lectures/${lectureId}`);
//         if (res.data.success && res.data.data) {
//           const lecture = res.data.data;
//           formik.setValues({
//             chapter: lecture.chapter?._id || "",
//             title: lecture.title || "",
//             contentUrl: null, // user can re-upload
//             duration: lecture.duration || "",
//             description: lecture.description || "",
//           });
//         } else {
//           alert("Lecture not found");
//           navigate("/admin/manage-course-videos");
//         }
//       } catch (err) {
//         console.error(err);
//         alert("Failed to fetch lecture");
//         navigate("/admin/manage-course-videos");
//       } finally {
//         setLoading(false);
//       }
//     };

//     fetchLecture();
//   }, [lectureId]);

//   if (loading) return <p className="text-center mt-10">Loading lecture...</p>;

//   // ‚úÖ Form UI
//   return (
//     <FormikProvider value={formik}>
//       <form
//         onSubmit={formik.handleSubmit}
//         className="space-y-6 p-6 bg-white rounded-xl shadow-md max-w-xl mx-auto"
//       >
//         <h2 className="text-2xl font-bold mb-4 text-blue-700">
//           {lectureId ? "Edit Lecture" : "Add Lecture"}
//         </h2>

//         {/* Chapter Dropdown */}
//         <div>
//           <label className="block font-medium mb-1">Chapter</label>
//           <select
//             name="chapter"
//             value={formik.values.chapter}
//             onChange={formik.handleChange}
//             onBlur={formik.handleBlur}
//             className="w-full border rounded-lg px-4 py-2"
//           >
//             <option value="">Select Chapter</option>
//             {availableChapters.map((ch) => (
//               <option key={ch._id} value={ch._id}>
//                 {ch.title}
//               </option>
//             ))}
//           </select>
//           {formik.touched.chapter && formik.errors.chapter && (
//             <p className="text-red-500 text-sm">{formik.errors.chapter}</p>
//           )}
//         </div>

//         {/* Title */}
//         <div>
//           <label className="block font-medium mb-1">Title</label>
//           <input
//             type="text"
//             name="title"
//             value={formik.values.title}
//             onChange={formik.handleChange}
//             onBlur={formik.handleBlur}
//             className="w-full border rounded-lg px-4 py-2"
//           />
//           {formik.touched.title && formik.errors.title && (
//             <p className="text-red-500 text-sm">{formik.errors.title}</p>
//           )}
//         </div>

//         {/* Duration */}
//         <div>
//           <label className="block font-medium mb-1">
//             Duration (e.g., 30 min)
//           </label>
//           <input
//             type="text"
//             name="duration"
//             value={formik.values.duration}
//             onChange={formik.handleChange}
//             onBlur={formik.handleBlur}
//             className="w-full border rounded-lg px-4 py-2"
//           />
//           {formik.touched.duration && formik.errors.duration && (
//             <p className="text-red-500 text-sm">{formik.errors.duration}</p>
//           )}
//         </div>

//         {/* Description */}
//         <div>
//           <label className="block font-medium mb-1">Description</label>
//           <textarea
//             name="description"
//             value={formik.values.description}
//             onChange={formik.handleChange}
//             onBlur={formik.handleBlur}
//             rows={4}
//             className="w-full border rounded-lg px-4 py-2"
//           />
//           {formik.touched.description && formik.errors.description && (
//             <p className="text-red-500 text-sm">{formik.errors.description}</p>
//           )}
//         </div>

//         {/* MP4 File Upload */}
//         <div>
//           <label className="block font-medium mb-1">Lecture Video (.mp4)</label>
//           <input
//             type="file"
//             accept="video/mp4"
//             onChange={(e) =>
//               formik.setFieldValue("contentUrl", e.currentTarget.files[0])
//             }
//             className="w-full"
//           />
//         </div>

//         {/* Submit Button */}
//         <button
//           type="submit"
//           className="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition"
//         >
//           {lectureId ? "Update Lecture" : "Submit Lecture"}
//         </button>
//       </form>
//     </FormikProvider>
//   );
// }

// working add lecture form only on base of chapyer 


// import { FormikProvider, useFormik } from "formik";
// import { useEffect, useState } from "react";
// import { useNavigate, useParams } from "react-router-dom";
// import * as Yup from "yup";

// import { fetchAllChapters } from "../../../api/curriculum";
// import { createNote, fetchNoteById, updateNote } from "../../../api/notes";
// import { DIR } from "../../../utils/constants";

// import Swal from "sweetalert2";
// import Dropdown from "../../form/Dropdown";
// import InputField from "../../form/InputField";
// import PDFUploadField from "../../form/PDFUploadField";
// import TextAreaField from "../../form/TextAreaField";
// import { getAllCourses } from "../../../api/courses";

// export default function AddNotes() {
//   const { noteId } = useParams();
//   const navigate = useNavigate();
//   const [availableCourses, setAvailableCourses] = useState([]);


//   const [availableChapters, setAvailableChapters] = useState([]);
//   const [loading, setLoading] = useState(false);
//   const [existingFile, setExistingFile] = useState(null);

//   useEffect(() => {
//   const fetchCourses = async () => {
//     try {
//       const courses = await getAllCourses();
//       setAvailableCourses(courses);
//     } catch (err) {
//       console.error("Failed to load courses:", err);
//     }
//   };
//   fetchCourses();
// }, []);


// // Fetch all chapters on mount
// useEffect(() => {
//   const fetchChapters = async () => {
//     try {
//       const chapters = await fetchAllChapters();
//       setAvailableChapters(chapters);
//     } catch (err) {
//       console.error("Failed to load chapters:", err);
//     }
//   };
//   fetchChapters();
// }, []);

// // Formik configuration
// const formik = useFormik({
//   initialValues: {
//      course: "", // new field
//     chapter: "",
//     title: "",
//     content: "",
//     type: "",
//     duration: "",
//     file: null,
//   },
//   validationSchema: Yup.object({
//     chapter: Yup.string().required("Chapter is required"),
//     title: Yup.string().required("Title is required"),
//     content: Yup.string().required("Content is required"),
//     // type: Yup.string().required("Type is required"),
//     duration: Yup.string().required("Duration is required"),
//   }),
//   onSubmit: async (values, { resetForm }) => {
//     try {
//       const formData = new FormData();
//       Object.entries(values).forEach(([key, value]) => {
//         if (value) formData.append(key, value);
//       });

//       if (noteId) {
//         await updateNote(noteId, formData);
//         Swal.fire("Success", "Note updated successfully!", "success");
//       } else {
//         await createNote(formData);
//         Swal.fire("Success", "Note created successfully!", "success");
//       }

//       resetForm();
//       navigate("/admin/manage-notes");
//     } catch (error) {
//       console.error(error);
//       Swal.fire(
//         "Error",
//         "Failed to submit note: " +
//           (error.response?.data?.message || error.message),
//         "error"
//       );
//     }
//   },
// });

// // Fetch existing note for edit
// useEffect(() => {
//   const fetchNote = async () => {
//     if (!noteId || availableChapters.length === 0) return;

//     setLoading(true);
//     try {
//       const note = await fetchNoteById(noteId);

//       if (note) {
//         formik.setValues({
//            course: note.course?._id || "", // new field
//           chapter: note.chapter?._id || "",
//           title: note.title || "",
//           content: note.content || "",
//           type: note.type || "",
//           duration: note.duration || "",
//           file: null,
//         });

//         if (note.file) setExistingFile(note.file);
//       } else {
//         Swal.fire("Not Found", "Note not found.", "warning");
//         navigate("/admin/manage-notes");
//       }
//     } catch (err) {
//       console.error(err);
//       Swal.fire("Error", "Failed to fetch note details.", "error");
//       navigate("/admin/manage-notes");
//     } finally {
//       setLoading(false);
//     }
//   };

//   fetchNote();
// }, [noteId, availableChapters]);

// if (loading)
//   return (
//     <p className="text-center mt-10 text-blue-700 font-medium">
//       Loading note details...
//     </p>
//   );

//   return (
//     <FormikProvider value={formik}>
//       <form
//         onSubmit={formik.handleSubmit}
//        className="p-10 bg-white rounded-lg shadow-2xl max-w-5xl mx-auto space-y-6 overflow-hidden border-4 border-[rgba(14,85,200,0.83)]"

//       >
//         {/* Form Heading */}
//         <h2 className="text-4xl font-bold text-[rgba(14,85,200,0.83)] text-center">
//           {noteId ? "Edit Note" : "Add New Note"}
//         </h2>

//         {/* Form Fields Grid */}
//         <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
//           <Dropdown
//   label="Course"
//   name="course"
//   options={availableCourses}
//   formik={formik}
// />


//           {/* Chapter Dropdown */}
//           <Dropdown
//             label="Chapter"
//             name="chapter"
//             options={availableChapters}
//             formik={formik}
//           />

//           {/* Type Input */}
//           {/* <InputField
//             label="Type"
//             name="type"
//             placeholder="e.g., Article, PDF, PPT"
//             formik={formik}
//           /> */}

//           {/* Title Input */}
//           <InputField label="Title" name="title" formik={formik} />

//           {/* Duration Input */}
//           <InputField
//             label="Duration"
//             name="duration"
//             placeholder="e.g., 15:30"
//             formik={formik}
//           />

//           {/* File Upload */}
//           <div className="md:col-span-2">
//             <PDFUploadField name="file" label="Upload File" formik={formik} />

//             {/* Existing file preview */}
//             {existingFile && !formik.values.file && (
//               <p className="mt-2 text-sm text-blue-700">
//                 Existing file:{" "}
//                 <a
//                   href={`${DIR.COURSE_NOTES}${existingFile}`}
//                   target="_blank"
//                   rel="noopener noreferrer"
//                   className="underline font-medium"
//                 >
//                   {existingFile}
//                 </a>
//               </p>
//             )}
//           </div>

//           {/* Content TextArea */}
//           <div className="md:col-span-2">
//             <TextAreaField
//               label="Content"
//               name="content"
//               formik={formik}
//               rows={4}
//             />
//           </div>
//         </div>

//         {/* Submit Button */}
//         <div className="text-center">
//           <button
//             type="submit"
//             className="bg-blue-600 text-white font-semibold px-8 py-3 rounded-xl shadow-lg hover:bg-blue-700 transition duration-300"
//           >
//             {noteId ? "Update Note" : "Submit Note"}
//           </button>
//         </div>
//       </form>
//     </FormikProvider>
//   );
// }
//  working code for add notes form section without course id only chapter id 

// import { FormikProvider, useFormik } from 'formik';
// import { useEffect, useState } from 'react';
// import { useNavigate, useParams } from 'react-router-dom';
// import * as Yup from 'yup';
// import apiClient from '../../../api/axiosConfig';

// export default function AddAssignment() {
//   const { assignmentId } = useParams(); // For edit
//   const navigate = useNavigate();
//   const [availableChapters, setAvailableChapters] = useState([]);
//   const [loading, setLoading] = useState(false);

//   // Fetch chapters for dropdown
//   useEffect(() => {
//     const fetchChapters = async () => {
//       try {
//         const res = await apiClient.get('/api/chapters');
//         setAvailableChapters(res.data?.data || []);
//       } catch (err) {
//         console.error('Error fetching chapters:', err);
//       }
//     };
//     fetchChapters();
//   }, []);

//   // Formik setup
//   const formik = useFormik({
//     initialValues: {
//       chapter: '',
//       title: '',
//       description: '',
//       deadline: '',
//       fileUrl: null,
//     },
//     validationSchema: Yup.object({
//       chapter: Yup.string().required('Chapter is required'),
//       title: Yup.string().required('Title is required'),
//       description: Yup.string().required('Description is required'),
//       deadline: Yup.string().required('Deadline is required'),
//     }),
//     onSubmit: async (values, { resetForm }) => {
//       try {
//         const formData = new FormData();
//         formData.append('chapter', values.chapter);
//         formData.append('title', values.title);
//         formData.append('description', values.description);
//         formData.append('deadline', values.deadline);
//         if (values.fileUrl) formData.append('fileUrl', values.fileUrl);

//         if (assignmentId) {
//           // Update
//           await apiClient.put(`/api/assignments/${assignmentId}`, formData, {
//             headers: { 'Content-Type': 'multipart/form-data' },
//           });
//           alert('Assignment updated successfully!');
//         } else {
//           // Add
//           await apiClient.post('/api/assignments', formData, {
//             headers: { 'Content-Type': 'multipart/form-data' },
//           });
//           alert('Assignment created successfully!');
//         }

//         resetForm();
//         navigate('/admin/manage-assignments');
//       } catch (err) {
//         console.error(err);
//         alert('Failed to submit assignment: ' + (err.response?.data?.message || err.message));
//       }
//     },
//   });

//   // Fetch assignment by ID for editing
//   useEffect(() => {
//     if (!assignmentId) return;

//     const fetchAssignment = async () => {
//       setLoading(true);
//       try {
//         const res = await apiClient.get(`/api/assignments/${assignmentId}`);
//         if (res.data.success && res.data.data) {
//           const assignment = res.data.data;
//           formik.setValues({
//             chapter: assignment.chapter?._id || '',
//             title: assignment.title || '',
//             description: assignment.description || '',
//             deadline: assignment.deadline?.split('T')[0] || '', // format YYYY-MM-DD
//             fileUrl: null,
//           });
//         } else {
//           alert('Assignment not found');
//           navigate('/admin/manage-assignments');
//         }
//       } catch (err) {
//         console.error(err);
//         alert('Failed to fetch assignment');
//         navigate('/admin/manage-assignments');
//       } finally {
//         setLoading(false);
//       }
//     };

//     fetchAssignment();
//   }, [assignmentId]);

//   if (loading) return <p className="text-center mt-10">Loading assignment...</p>;

//   return (
//     <FormikProvider value={formik}>
//   <form
//     onSubmit={formik.handleSubmit}
//     className="p-8 bg-white rounded-lg shadow-lg max-w-3xl mx-auto space-y-6 border-4 border-[rgba(14,85,200,0.83)]"
//   >
//     <h2 className="text-3xl font-bold mb-6 text-blue-700 text-center">
//       {assignmentId ? 'Edit Assignment' : 'Add Assignment'}
//     </h2>

//     {/* Grid Container */}
//     <div className="grid grid-cols-1 md:grid-cols-2 gap-6">

//       {/* Chapter */}
//       <div className="flex flex-col">
//         <label className="font-medium mb-2">Chapter</label>
//         <select
//           name="chapter"
//           value={formik.values.chapter}
//           onChange={formik.handleChange}
//           onBlur={formik.handleBlur}
//           className="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400"
//         >
//           <option value="">Select Chapter</option>
//           {availableChapters.map((ch) => (
//             <option key={ch._id} value={ch._id}>{ch.title}</option>
//           ))}
//         </select>
//         {formik.touched.chapter && formik.errors.chapter && (
//           <p className="text-red-500 text-sm mt-1">{formik.errors.chapter}</p>
//         )}
//       </div>

//       {/* Title */}
//       <div className="flex flex-col">
//         <label className="font-medium mb-2">Title</label>
//         <input
//           type="text"
//           name="title"
//           value={formik.values.title}
//           onChange={formik.handleChange}
//           onBlur={formik.handleBlur}
//           className="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400"
//         />
//         {formik.touched.title && formik.errors.title && (
//           <p className="text-red-500 text-sm mt-1">{formik.errors.title}</p>
//         )}
//       </div>

//       {/* Deadline */}
//       <div className="flex flex-col">
//         <label className="font-medium mb-2">Deadline</label>
//         <input
//           type="date"
//           name="deadline"
//           value={formik.values.deadline}
//           onChange={formik.handleChange}
//           onBlur={formik.handleBlur}
//           className="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400"
//         />
//         {formik.touched.deadline && formik.errors.deadline && (
//           <p className="text-red-500 text-sm mt-1">{formik.errors.deadline}</p>
//         )}
//       </div>

//       {/* File Upload */}
//       <div className="flex flex-col">
//         <label className="font-medium mb-2">File (PDF, DOC, PPT, ZIP)</label>
//         <input
//           type="file"
//           accept=".pdf,.doc,.docx,.ppt,.pptx,.zip"
//           onChange={(e) => formik.setFieldValue('fileUrl', e.currentTarget.files[0])}
//           className="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400"
//         />
//       </div>

//       {/* Description (Full width) */}
//       <div className="flex flex-col md:col-span-2">
//         <label className="font-medium mb-2">Description</label>
//         <textarea
//           name="description"
//           value={formik.values.description}
//           onChange={formik.handleChange}
//           onBlur={formik.handleBlur}
//           rows={5}
//           className="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400"
//         />
//         {formik.touched.description && formik.errors.description && (
//           <p className="text-red-500 text-sm mt-1">{formik.errors.description}</p>
//         )}
//       </div>
//     </div>

//     {/* Submit Button */}
//     <div className="text-center mt-4">
//       <button
//         type="submit"
//         className="bg-blue-600 text-white px-8 py-3 rounded-lg hover:bg-blue-700 transition font-semibold"
//       >
//         {assignmentId ? 'Update Assignment' : 'Submit Assignment'}
//       </button>
//     </div>
//   </form>
// </FormikProvider>
//   );
// }

//  add assignment working for based on chapter id 


// import { useEffect, useState } from "react";
// import { useNavigate, useParams } from "react-router-dom";
// import Swal from "sweetalert2";
// import { createBatch, fetchBatchById, updateBatch } from "../../../api/batch";
// import { getAllCourses } from "../../../api/courses";
// import { fetchAllTrainers } from "../../../pages/admin/trainer-management/trainerApi";
// import InputField from "../../form/InputField"; // <-- import InputField
// import MultiSelectDropdown from "../../form/MultiSelectDropdown";
// import TextAreaField from "../../form/TextAreaField";
// import Dropdown from "../../form/Dropdown";

// const AddBatch = ({ onBatchSaved }) => {
//   const { id } = useParams();
//   const navigate = useNavigate();

//   const [selectedBatchId, setSelectedBatchId] = useState(id || null);
//   const [courses, setCourses] = useState([]);
//   const [trainers, setTrainers] = useState([]);
//   const [loading, setLoading] = useState(false);

//   const [formData, setFormData] = useState({
//     batchName: "",
//     startTime: "",
//     endTime: "",
//     days: [],
//     mode: "Online",
//     coursesAssigned: [],
//     trainersAssigned: [],
//     additionalNotes: "",
//   });

//   const daysOfWeek = [
//     "Monday",
//     "Tuesday",
//     "Wednesday",
//     "Thursday",
//     "Friday",
//     "Saturday",
//     "Sunday",
//   ];

//   const modeOptions = [
//     { _id: "Online", title: "Online" },
//     { _id: "Offline", title: "Offline" },
//     { _id: "Hybrid", title: "Hybrid" },
//   ];

//   // -------------------- Fetch Courses & Trainers --------------------
//   const fetchCoursesAndTrainers = async () => {
//     try {
//       const [coursesData, trainersData] = await Promise.all([
//         getAllCourses(),
//         fetchAllTrainers(),
//       ]);
//       setCourses(coursesData || []);
//       setTrainers(trainersData || []);
//     } catch (err) {
//       console.error("Error fetching courses/trainers:", err);
//       Swal.fire("Error", "Failed to fetch courses or trainers.", "error");
//     }
//   };

//   // -------------------- Fetch Batch by ID (for editing) --------------------
//   // useEffect(() => {
//   //   const fetchBatchById = async () => {
//   //     if (!id) return;
//   //     try {
//   //       setLoading(true);
//   //       const res = await apiClient.get(`/api/batches/batches/${id}`);
//   //       const batch = Array.isArray(res.data.data)
//   //         ? res.data.data[0]
//   //         : res.data.data;

//   //       if (batch) {
//   //         setFormData({
//   //           batchName: batch.batchName || "",
//   //           startTime: batch.time?.start || "",
//   //           endTime: batch.time?.end || "",
//   //           days: batch.days || [],
//   //           mode: batch.mode || "Online",
//   //           coursesAssigned: batch.coursesAssigned?.map((c) => c._id) || [],
//   //           trainersAssigned: batch.trainersAssigned?.map((t) => t._id) || [],
//   //           additionalNotes: batch.additionalNotes || "",
//   //         });
//   //         setSelectedBatchId(id);
//   //       } else {
//   //         Swal.fire("Not Found", "Batch not found", "warning");
//   //         navigate("/admin/manage-batches");
//   //       }
//   //     } catch (err) {
//   //       console.error("Error fetching batch by ID:", err);
//   //       const message = err.response?.data?.message || "Failed to fetch batch.";
//   //       Swal.fire("Error", message, "error");
//   //       navigate("/admin/manage-batches");
//   //     } finally {
//   //       setLoading(false);
//   //     }
//   //   };

//   //   fetchCoursesAndTrainers();
//   //   fetchBatchById();
//   // }, [id]);

//   useEffect(() => {
//     const loadBatch = async () => {
//       if (!id) return;
//       try {
//         setLoading(true);
//         const batch = await fetchBatchById(id);

//         if (batch) {
//           setFormData({
//             batchName: batch.batchName || "",
//             startTime: batch.time?.start || "",
//             endTime: batch.time?.end || "",
//             days: batch.days || [],
//             mode: batch.mode || "Online",
//             coursesAssigned: batch.coursesAssigned?.map((c) => c._id) || [],
//             trainersAssigned: batch.trainersAssigned?.map((t) => t._id) || [],
//             additionalNotes: batch.additionalNotes || "",
//           });
//           setSelectedBatchId(id);
//         } else {
//           Swal.fire("Not Found", "Batch not found", "warning");
//           navigate("/admin/manage-batches");
//         }
//       } catch (err) {
//         console.error(err);
//         const message = err.message || "Failed to fetch batch.";
//         Swal.fire("Error", message, "error");
//         navigate("/admin/manage-batches");
//       } finally {
//         setLoading(false);
//       }
//     };

//     fetchCoursesAndTrainers();
//     loadBatch();
//   }, [id]);

//   // -------------------- Handle Form Change --------------------
//   const handleChange = (e) => {
//     const { name, value, type, checked } = e.target;

//     if (type === "checkbox" && daysOfWeek.includes(value)) {
//       setFormData((prev) => ({
//         ...prev,
//         days: checked
//           ? [...prev.days, value]
//           : prev.days.filter((day) => day !== value),
//       }));
//     } else {
//       setFormData((prev) => ({ ...prev, [name]: value }));
//     }
//   };

//   // -------------------- Handle MultiSelect --------------------
//   const handleMultiSelectChange = (name, selectedIds) => {
//     setFormData((prev) => ({ ...prev, [name]: selectedIds }));
//   };

//   // -------------------- Handle Submit --------------------
//   // const handleSubmit = async (e) => {
//   //   e.preventDefault();
//   //   setLoading(true);

//   //   const payload = {
//   //     batchName: formData.batchName,
//   //     time: { start: formData.startTime, end: formData.endTime },
//   //     days: formData.days,
//   //     mode: formData.mode,
//   //     coursesAssigned: formData.coursesAssigned,
//   //     trainersAssigned: formData.trainersAssigned,
//   //     additionalNotes: formData.additionalNotes,
//   //   };

//   //   try {
//   //     if (selectedBatchId) {
//   //       await apiClient.put(`/api/batches/${selectedBatchId}`, payload, {
//   //         headers: { "Content-Type": "application/json" },
//   //       });

//   //       Swal.fire({
//   //         title: "Updated!",
//   //         text: "Batch updated successfully.",
//   //         icon: "success",
//   //         confirmButtonColor: "#0E55C8",
//   //       });
//   //     } else {
//   //       await apiClient.post("/api/batches", payload, {
//   //         headers: { "Content-Type": "application/json" },
//   //       });

//   //       Swal.fire({
//   //         title: "Added!",
//   //         text: "Batch added successfully.",
//   //         icon: "success",
//   //         confirmButtonColor: "#0E55C8",
//   //       });
//   //     }

//   //     setFormData({
//   //       batchName: "",
//   //       startTime: "",
//   //       endTime: "",
//   //       days: [],
//   //       mode: "Online",
//   //       coursesAssigned: [],
//   //       trainersAssigned: [],
//   //       additionalNotes: "",
//   //     });
//   //     setSelectedBatchId(null);

//   //     if (onBatchSaved) onBatchSaved();
//   //     navigate("/admin/manage-batches");
//   //   } catch (err) {
//   //     console.error(
//   //       "Error submitting batch:",
//   //       err.response?.data || err.message
//   //     );
//   //     const message =
//   //       err.response?.data?.message ||
//   //       "Failed to save batch. Please try again.";
//   //     Swal.fire("Error", message, "error");
//   //   } finally {
//   //     setLoading(false);
//   //   }
//   // };

//   const handleSubmit = async (e) => {
//     e.preventDefault();
//     setLoading(true);

//     const payload = {
//       batchName: formData.batchName,
//       time: { start: formData.startTime, end: formData.endTime },
//       days: formData.days,
//       mode: formData.mode,
//       coursesAssigned: formData.coursesAssigned,
//       trainersAssigned: formData.trainersAssigned,
//       additionalNotes: formData.additionalNotes,
//     };

//     try {
//       if (selectedBatchId) {
//         await updateBatch(selectedBatchId, payload);

//         Swal.fire({
//           title: "Updated!",
//           text: "Batch updated successfully.",
//           icon: "success",
//           confirmButtonColor: "#0E55C8",
//         });
//       } else {
//         await createBatch(payload);

//         Swal.fire({
//           title: "Added!",
//           text: "Batch added successfully.",
//           icon: "success",
//           confirmButtonColor: "#0E55C8",
//         });
//       }

//       setFormData({
//         batchName: "",
//         startTime: "",
//         endTime: "",
//         days: [],
//         mode: "Online",
//         coursesAssigned: [],
//         trainersAssigned: [],
//         additionalNotes: "",
//       });
//       setSelectedBatchId(null);

//       if (onBatchSaved) onBatchSaved();
//       navigate("/admin/manage-batches");
//     } catch (err) {
//       console.error(
//         "Error submitting batch:",
//         err.response?.data || err.message
//       );
//       const message =
//         err.response?.data?.message ||
//         "Failed to save batch. Please try again.";
//       Swal.fire("Error", message, "error");
//     } finally {
//       setLoading(false);
//     }
//   };

//   // -------------------- JSX --------------------
//   return (
//     <div className="p-10 font-sans bg-blue-50 max-h-fit">
//       <div className="bg-white p-10 rounded-lg shadow-2xl max-w-5xl mx-auto border-4 border-[rgba(14,85,200,0.83)]">
//         <div className="flex justify-between items-center mb-8">
//           <h3 className="text-3xl font-bold text-[rgba(14,85,200,0.83)]">
//             {selectedBatchId ? "Update Batch" : "Add Batch"}
//           </h3>
//           <button
//             onClick={() => navigate("/admin/manage-batches")}
//             className="text-sm bg-gray-200 hover:bg-gray-300 px-3 py-1 rounded-md font-semibold text-gray-700 transition"
//           >
//             ‚Üê Manage Batches
//           </button>
//         </div>

//         <form onSubmit={handleSubmit} className="space-y-8">
//           {/* Basic Info */}
//           <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
//             <InputField
//               label="Batch Name"
//               name="batchName"
//               type="text"
//               formik={{
//                 values: formData,
//                 setFieldValue: (name, value) =>
//                   setFormData((prev) => ({ ...prev, [name]: value })),
//                 touched: {},
//                 errors: {},
//                 handleBlur: () => {},
//               }}
//             />
//             <InputField
//               label="Start Time"
//               name="startTime"
//               type="time"
//               formik={{
//                 values: formData,
//                 setFieldValue: (name, value) =>
//                   setFormData((prev) => ({ ...prev, [name]: value })),
//                 touched: {},
//                 errors: {},
//                 handleBlur: () => {},
//               }}
//             />
//             <InputField
//               label="End Time"
//               name="endTime"
//               type="time"
//               formik={{
//                 values: formData,
//                 setFieldValue: (name, value) =>
//                   setFormData((prev) => ({ ...prev, [name]: value })),
//                 touched: {},
//                 errors: {},
//                 handleBlur: () => {},
//               }}
//             />
//           </div>

//           {/* Days */}
//           <div>
//             <label className="font-semibold text-gray-700">Days:</label>
//             <div className="flex flex-wrap gap-3 mt-2">
//               {daysOfWeek.map((day) => (
//                 <label
//                   key={day}
//                   className="flex items-center gap-2 cursor-pointer bg-blue-50 px-4 py-2 rounded-lg hover:bg-blue-100 transition"
//                 >
//                   <input
//                     type="checkbox"
//                     value={day}
//                     checked={formData.days.includes(day)}
//                     onChange={handleChange}
//                     className="accent-blue-600"
//                   />
//                   {day}
//                 </label>
//               ))}
//             </div>
//           </div>

//           {/* Mode */}
//           {/* <div>
//             <label className="block font-semibold mb-1 text-gray-700">
//               Mode
//             </label>
//             <select
//               name="mode"
//               value={formData.mode}
//               onChange={handleChange}
//               className="w-full border rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-400"
//             >
//               <option value="Online">Online</option>
//               <option value="Offline">Offline</option>
//               <option value="hybrid">Hybrid</option>
//             </select>
//           </div> */}

//           <Dropdown
//             label="Mode"
//             name="mode"
//             options={modeOptions}
//             formik={formik}
//           />

//           {/* Courses & Trainers */}
//           <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
//             <MultiSelectDropdown
//               label="Assign Course(s)"
//               name="coursesAssigned"
//               options={courses}
//               formik={{
//                 values: formData,
//                 setFieldValue: (name, value) =>
//                   handleMultiSelectChange(name, value),
//               }}
//               getOptionValue={(c) => c._id}
//               getOptionLabel={(c) => c.title}
//             />

//             <MultiSelectDropdown
//               label="Assign Trainer(s)"
//               name="trainersAssigned"
//               options={trainers}
//               formik={{
//                 values: formData,
//                 setFieldValue: (name, value) =>
//                   handleMultiSelectChange(name, value),
//               }}
//               getOptionValue={(t) => t._id}
//               getOptionLabel={(t) => t.fullName}
//             />
//           </div>

//           {/* Notes */}
//           <TextAreaField
//             label="Additional Notes"
//             name="additionalNotes"
//             formik={{
//               values: formData,
//               handleChange: handleChange,
//               handleBlur: () => {},
//               touched: {},
//               errors: {},
//             }}
//             rows={4} // optional, default is 4
//           />

//           {/* Submit */}
//           <div className="text-center">
//             <button
//               type="submit"
//               disabled={loading}
//               className="bg-[rgba(14,85,200,0.83)] text-white font-semibold px-10 py-3 rounded-xl shadow-lg hover:bg-blue-700 transition duration-300 disabled:opacity-60"
//             >
//               {loading
//                 ? "Saving..."
//                 : selectedBatchId
//                 ? "Update Batch"
//                 : "Add Batch"}
//             </button>
//           </div>
//         </form>
//       </div>
//     </div>
//   );
// };

// export default AddBatch;
//  working add batch form 

// import { FormikProvider, useFormik } from "formik";
// import { useEffect, useState } from "react";
// import Swal from "sweetalert2";
// import * as Yup from "yup";
// import apiClient from "../../../api/axiosConfig";
// import { getAllCourses } from "../../../api/courses";
// import InputField from "../../form/InputField";
// import MultiSelectDropdown from "../../form/MultiSelectDropdown";

// const EnrollStudentForm = () => {
//   const [courses, setCourses] = useState([]);
//   const [filteredBatches, setFilteredBatches] = useState([]);
//   const [loading, setLoading] = useState(false);

//   // ‚úÖ Fetch Courses
//   useEffect(() => {
//     const fetchCourses = async () => {
//       try {
//         const data = await getAllCourses();
//         setCourses(data);
//       } catch (error) {
//         console.error("Error fetching courses:", error);
//       }
//     };
//     fetchCourses();
//   }, []);

//   // ‚úÖ Formik Setup
//   const formik = useFormik({
//     initialValues: {
//       fullName: "",
//       mobileNo: "",
//       email: "",
//       coursesInterested: [],
//       enrolledBatches: [],
//     },
//     validationSchema: Yup.object({
//       fullName: Yup.string().required("Full name is required"),
//       mobileNo: Yup.string()
//         .matches(/^[0-9]{10}$/, "Enter a valid 10-digit number")
//         .required("Mobile number is required"),
//       email: Yup.string().email("Invalid email").required("Email is required"),
//     //   coursesInterested: Yup.array().min(1, "Select at least one course"),
//     //   enrolledBatches: Yup.array().min(1, "Select at least one batch"),
//     }),
//     onSubmit: async (values, { resetForm }) => {
//       try {
//         setLoading(true);
//         const res = await apiClient.post(
//           `/api/enrollments/admin/enroll`,
//           values
//         );

//         if (res.data.success) {
//           Swal.fire("‚úÖ Success", res.data.message, "success");
//           resetForm();
//           setFilteredBatches([]);
//         } else {
//           Swal.fire(
//             "‚ö†Ô∏è Warning",
//             res.data.message || "Failed to enroll",
//             "warning"
//           );
//         }
//       } catch (err) {
//         console.error(err);
//         Swal.fire(
//           "Warning",
//           err.response?.data?.message || "Please Try Again!",
//           "warning"
//         );
//       } finally {
//         setLoading(false);
//       }
//     },
//   });

//   // ‚úÖ Filter batches based on selected courses
//   useEffect(() => {
//     const selectedCourses = formik.values.coursesInterested;
//     if (selectedCourses.length > 0) {
//       const batches = selectedCourses.flatMap((id) => {
//         const course = courses.find((c) => c._id === id);
//         return course?.batches || [];
//       });
//       setFilteredBatches(batches);
//     } else {
//       setFilteredBatches([]);
//     }
//   }, [formik.values.coursesInterested, courses]);

//   return (
//     <FormikProvider value={formik}>
//       <form
//         onSubmit={formik.handleSubmit}
//         className="p-10 bg-white rounded-lg shadow-2xl max-w-5xl mx-auto space-y-10 overflow-hidden border-4 border-[rgba(14,85,200,0.83)]"
//       >
//         {/* Header */}
//         <h2 className="text-4xl font-bold text-[rgba(14,85,200,0.83)] text-center">
//           Enroll Student
//         </h2>

//         {/* Grid Layout */}
//         <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
//           {/* Full Name */}
//           <InputField label="Full Name" name="fullName" formik={formik} />

//           {/* Mobile */}
//           <InputField
//             label="Mobile Number"
//             name="mobileNo"
//             type="tel"
//             formik={formik}
//           />

//           {/* Email */}
//           <InputField label="Email" name="email" type="email" formik={formik} />

//           {/* Courses Dropdown */}
//           {/* <div className="md:col-span-2"> */}
//           <MultiSelectDropdown
//             label="Courses Interested"
//             name="coursesInterested"
//             options={courses}
//             formik={formik}
//             getOptionValue={(option) => option._id}
//             getOptionLabel={(option) => option.title}
//           />
//           {/* </div> */}

//           {/* Batches Dropdown (Dynamic) */}
//           {/* <div className="md:col-span-2"> */}
//           <MultiSelectDropdown
//             label="Select Batches"
//             name="enrolledBatches"
//             options={filteredBatches}
//             formik={formik}
//             getOptionValue={(batch) => batch._id}
//             getOptionLabel={(batch) =>
//               `${batch.batchName} (${batch.mode} - ${batch.status})`
//             }
//           />
//           {/* </div> */}
//         </div>

//         {/* Submit Button */}
//         <div className="text-center pt-4">
//           <button
//             type="submit"
//             disabled={loading}
//             className={`px-10 py-3 rounded-xl shadow-lg text-white font-semibold transition duration-300 ${
//               loading
//                 ? "bg-gray-400 cursor-not-allowed"
//                 : "bg-[rgba(14,85,200,0.83)] hover:bg-[rgba(14,85,200,1)]"
//             }`}
//           >
//             {loading ? "Enrolling..." : "Enroll Student"}
//           </button>
//         </div>
//       </form>
//     </FormikProvider>
//   );
// };

// export default EnrollStudentForm;


// import { ErrorMessage, Field, FieldArray, Form, Formik } from "formik";
// import { useEffect, useState } from "react";
// import { useNavigate, useParams } from "react-router-dom";
// import Swal from "sweetalert2";
// import * as Yup from "yup";
// import apiClient from "../../../api/axiosConfig.js";
// import { useAuth } from "../../../contexts/AuthContext.jsx";
// import { fetchAllTrainers } from "../../../pages/admin/trainer-management/trainerApi.js";

// const CourseForm = () => {
//   const [editCourseData, setEditCourseData] = useState(null);
//   const [isLoading, setIsLoading] = useState(false);
//   const [error, setError] = useState("");
//   const [success, setSuccess] = useState("");
//   const [trainers, setTrainers] = useState([]);
//   const { token } = useAuth();
//   const navigate = useNavigate();
//   const { id } = useParams(); // üü° If present, we're editing

//   const initialValues = {
//     title: "",
//     description: "",
//     duration: "",
//     rating: 0,
//     enrolledCount: 0,
//     overview: "",
//     learningOutcomes: [""],
//     benefits: [""],
//     features: {
//       certificate: false,
//       codingExercises: false,
//       recordedLectures: false,
//     },
//     isActive: true,
//     keyFeatures: [
//       {
//         title: "",
//         description: "",
//         subPoints: [""],
//       },
//     ],
//     fees: "", // üü¢ Added fees field

//     durationValue: "", // number part
//     durationUnit: "days", // default unit
//     // instructor: "",
//     //    features: {

//     //   certificate: false,

//     //   codingExercises: false,

//     //   recordedLectures: false,

//     // },

//     // fees: "",

//     // trainer: [], // store trainer IDs

//     // isActive: true,
//   };

//   const getInitialValues = () => {
//     if (!editCourseData) return initialValues;

//     // Extract number and unit from backend duration (e.g., "20 months" or "20days")
//     const match = editCourseData.duration?.match(
//       /^(\d+)\s*(days|months|years)$/i
//     );
//     const durationValue = match ? match[1] : "";
//     const durationUnit = match ? match[2].toLowerCase() : "days";

//     return {
//       ...initialValues,
//       ...editCourseData,
//       durationValue, // prefill number part
//       durationUnit, // prefill unit part
//       rating: editCourseData.rating || 0,
//       enrolledCount: editCourseData.enrolledCount || 0,
//       overview: editCourseData.overview || "",
//       learningOutcomes: editCourseData.learningOutcomes?.length
//         ? editCourseData.learningOutcomes
//         : [""],
//       benefits: editCourseData.benefits?.length
//         ? editCourseData.benefits
//         : [""],
//       features: editCourseData.features || {
//         certificate: false,
//         codingExercises: false,
//         recordedLectures: false,
//       },
//       isActive: editCourseData.isActive ?? true,
//       keyFeatures: editCourseData.keyFeatures?.length
//         ? editCourseData.keyFeatures
//         : [
//             {
//               title: "",
//               description: "",
//               subPoints: [""],
//             },
//           ],
//       instructor: editCourseData.instructor || "",
//       fees: editCourseData.fees || "",
//     };
//   };

//   const CourseSchema = Yup.object().shape({
//     title: Yup.string().required("Title is required"),
//     description: Yup.string().required("Description is required"),
//     // duration: Yup.string().required("Duration is required"),
//     rating: Yup.number().min(0).max(5).required("Rating is required"),
//     enrolledCount: Yup.number().min(0).required("Enrolled count is required"),
//     overview: Yup.string().required("Overview is required"),
//     learningOutcomes: Yup.array().of(Yup.string().required("Required")),
//     benefits: Yup.array().of(Yup.string().required("Required")),
//     features: Yup.object({
//       certificate: Yup.boolean(),
//       codingExercises: Yup.boolean(),
//       recordedLectures: Yup.boolean(),
//     }),
//     keyFeatures: Yup.array().of(
//       Yup.object({
//         title: Yup.string().required("Title is required"),
//         description: Yup.string(),
//         subPoints: Yup.array().of(Yup.string().required("Sub-point required")),
//       })
//     ),
//     isActive: Yup.boolean(),
//     instructor: Yup.string(),
//     // fees: Yup.string().required("Fees are required"),
//     // trainer: Yup.array().min(1, "Please select at least one trainer"),
//   });

//   // üü¢ Fetch Trainers
//   useEffect(() => {
//     const getTrainers = async () => {
//       try {
//         const data = await fetchAllTrainers();
//         setTrainers(data);
//       } catch (err) {
//         console.error("Failed to fetch trainers:", err);
//       }
//     };
//     getTrainers();
//   }, []);

//   // üü¢ Fetch course if editing
//   const handleSubmit = async (values, { setSubmitting, resetForm }) => {
//     setError("");
//     setSuccess("");
//     setIsLoading(true);

//     try {
//       // Combine duration for backend
//       const payload = {
//         ...values,
//         duration: `${values.durationValue} ${values.durationUnit}`,
//       };

//       if (id && editCourseData) {
//         await apiClient.put(`/api/courses/${id}`, payload, {
//           headers: { Authorization: `Bearer ${token}` },
//         });
//         Swal.fire({
//           icon: "success",
//           title: "Updated!",
//           text: "Course updated successfully!",
//         });
//         // setSuccess("Course updated successfully!");
//       } else {
//         await apiClient.post("/api/courses", payload, {
//           headers: { Authorization: `Bearer ${token}` },
//         });

//         Swal.fire({
//           icon: "success",
//           title: "Created!",
//           text: "Course created successfully!",
//         });
//         // setSuccess("Course created successfully!");
//       }

//       resetForm();
//       navigate("/admin/manage-courses");
//     } catch (err) {
//       setError(
//         err.response?.data?.message || err.message || "Operation failed."
//       );

//       Swal.fire({
//         icon: "error",
//         title: "Oops...",
//         text: err.response?.data?.message || err.message || "Operation failed.",
//       });
//       // setError(err.response?.data?.message || err.message || "Operation failed.");
//     }

//     setIsLoading(false);
//     setSubmitting(false);
//   };

//   useEffect(() => {
//     const fetchCourse = async () => {
//       if (!id) return;
//       try {
//         const res = await apiClient.get(`/api/courses/${id}`, {
//           headers: { Authorization: `Bearer ${token}` },
//         });
//         setEditCourseData(res.data.data);
//       } catch (err) {
//         setError("Failed to load course for editing.");
//         console.error(err);
//       }
//     };

//     fetchCourse();
//   }, [id, token]);

//   return (
//     <div className="max-w-6xl mx-auto p-8 bg-white shadow-xl rounded-xl border-2 border-blue-700 border-opacity-80">
//       <div className="flex justify-between items-center mb-8 border-b border-gray-200 pb-4">
//         <h2 className="text-2xl font-bold text-gray-900">
//           {id ? "Edit Course" : "Create New Course"}
//         </h2>
//         {/* <button
//         type="button"
//         onClick={() => navigate("/admin/courses")}
//         className="px-5 py-2 bg-gray-400 text-white font-medium rounded-lg hover:bg-gray-500 transition"
//       >
//         Cancel
//       </button> */}
//       </div>

//       {error && (
//         <div className="mb-6 p-4 bg-red-100 text-red-700 border border-red-400 rounded-lg">
//           {error}
//         </div>
//       )}

//       {success && (
//         <div className="mb-6 p-4 bg-green-100 text-green-700 border border-green-400 rounded-lg">
//           {success}
//         </div>
//       )}

//       <Formik
//         enableReinitialize
//         initialValues={getInitialValues()}
//         validationSchema={CourseSchema}
//         onSubmit={handleSubmit}
//       >
//         {({ values, isSubmitting }) => (
//           <Form className="space-y-10">
//             {/* BASIC INFO */}
//             <section className="space-y-6 bg-blue-50 p-6 rounded-lg">
//               <h3 className="text-lg font-semibold text-gray-800 border-b border-gray-200 pb-2">
//                 Basic Information
//               </h3>

//               <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
//                 <div>
//                   <label className="block text-sm font-medium text-gray-700 mb-1">
//                     Title <span className="text-red-500">*</span>
//                   </label>
//                   <Field
//                     name="title"
//                     className="block w-full px-3 py-2 border border-blue-400 rounded-md focus:ring-2 focus:ring-blue-300 focus:border-blue-400"
//                   />
//                   <ErrorMessage
//                     name="title"
//                     component="div"
//                     className="text-xs text-red-500 mt-1"
//                   />
//                 </div>

//                 {/* <div>
//                 <label className="block text-sm font-medium text-gray-700 mb-1">
//                   Duration <span className="text-red-500">*</span>
//                 </label>
//                 <Field
//                   name="duration"
//                   className="block w-full px-3 py-2 border border-blue-400 rounded-md focus:ring-2 focus:ring-blue-300 focus:border-blue-400"
//                 />
//                 <ErrorMessage
//                   name="duration"
//                   component="div"
//                   className="text-xs text-red-500 mt-1"
//                 />
//               </div> */}

//                 <div className="grid grid-cols-2 gap-2">
//                   <div>
//                     <label className="block text-sm font-medium text-gray-700 mb-1">
//                       Duration Value <span className="text-red-500">*</span>
//                     </label>
//                     <Field
//                       type="number"
//                       name="durationValue"
//                       className="block w-full px-3 py-2 border border-blue-400 rounded-md focus:ring-2 focus:ring-blue-300 focus:border-blue-400"
//                       min={1}
//                     />
//                     <ErrorMessage
//                       name="durationValue"
//                       component="div"
//                       className="text-xs text-red-500 mt-1"
//                     />
//                   </div>

//                   <div>
//                     <label className="block text-sm font-medium text-gray-700 mb-1">
//                       Duration Unit <span className="text-red-500">*</span>
//                     </label>
//                     <Field
//                       as="select"
//                       name="durationUnit"
//                       className="block w-full px-3 py-2 border border-blue-400 rounded-md focus:ring-2 focus:ring-blue-300 focus:border-blue-400"
//                     >
//                       <option value="days">Days</option>
//                       <option value="months">Months</option>
//                       <option value="years">Years</option>
//                     </Field>
//                     <ErrorMessage
//                       name="durationUnit"
//                       component="div"
//                       className="text-xs text-red-500 mt-1"
//                     />
//                   </div>
//                 </div>
//               </div>

//               <div>
//                 <label className="block text-sm font-medium text-gray-700 mb-1">
//                   Description <span className="text-red-500">*</span>
//                 </label>
//                 <Field
//                   as="textarea"
//                   name="description"
//                   rows="4"
//                   className="w-full px-3 py-2 border border-blue-400 rounded-md focus:ring-2 focus:ring-blue-300 focus:border-blue-400"
//                 />
//                 <ErrorMessage
//                   name="description"
//                   component="div"
//                   className="text-xs text-red-500 mt-1"
//                 />
//               </div>
//             </section>

//             {/* DETAILS */}
//             <section className="space-y-6">
//               <h3 className="text-lg font-semibold text-gray-800 border-b border-gray-200 pb-2">
//                 Course Details
//               </h3>

//               <div className="grid grid-cols-1 sm:grid-cols-3 gap-6">
//                 <div>
//                   <label className="block text-sm font-medium text-gray-700 mb-1">
//                     Rating <span className="text-red-500">*</span>
//                   </label>
//                   <Field
//                     type="number"
//                     name="rating"
//                     className="w-full px-3 py-2 border border-blue-400 rounded-md focus:ring-2 focus:ring-blue-300"
//                   />
//                   <ErrorMessage
//                     name="rating"
//                     component="div"
//                     className="text-xs text-red-500 mt-1"
//                   />
//                 </div>

//                 <div>
//                   <label className="block text-sm font-medium text-gray-700 mb-1">
//                     Enrolled Count <span className="text-red-500">*</span>
//                   </label>
//                   <Field
//                     type="number"
//                     name="enrolledCount"
//                     className="w-full px-3 py-2 border border-blue-400 rounded-md focus:ring-2 focus:ring-blue-300"
//                   />
//                   <ErrorMessage
//                     name="enrolledCount"
//                     component="div"
//                     className="text-xs text-red-500 mt-1"
//                   />
//                 </div>

//                 <div>
//                   <label className="block text-sm font-medium text-gray-700 mb-1">
//                     Fees ($) <span className="text-red-500">*</span>
//                   </label>
//                   <Field
//                     type="number"
//                     name="fees"
//                     className="w-full px-3 py-2 border border-blue-400 rounded-md focus:ring-2 focus:ring-blue-300"
//                   />
//                   <ErrorMessage
//                     name="fees"
//                     component="div"
//                     className="text-xs text-red-500 mt-1"
//                   />
//                 </div>

//                 <div className="flex items-center mt-6">
//                   <Field
//                     type="checkbox"
//                     name="isActive"
//                     className="h-4 w-4 text-blue-600 border-gray-300 rounded"
//                   />
//                   <span className="ml-2 text-sm text-gray-700 font-medium">
//                     Is Course Active
//                   </span>
//                 </div>
//               </div>

//               <div>
//                 <label className="block text-sm font-medium text-gray-700 mb-1">
//                   Overview <span className="text-red-500">*</span>
//                 </label>
//                 <Field
//                   as="textarea"
//                   name="overview"
//                   rows="4"
//                   className="w-full px-3 py-2 border border-blue-400 rounded-md focus:ring-2 focus:ring-blue-300"
//                 />
//                 <ErrorMessage
//                   name="overview"
//                   component="div"
//                   className="text-xs text-red-500 mt-1"
//                 />
//               </div>
//             </section>

//             {/* LEARNING OUTCOMES */}
//             <section className="space-y-6 bg-blue-50 p-6 rounded-lg">
//               <h3 className="text-lg font-semibold text-gray-800 border-b border-gray-200 pb-2">
//                 Learning Outcomes
//               </h3>
//               <FieldArray name="learningOutcomes">
//                 {({ push, remove }) => (
//                   <div className="space-y-2">
//                     {values.learningOutcomes.map((_, idx) => (
//                       <div key={idx} className="flex gap-2">
//                         <Field
//                           name={`learningOutcomes[${idx}]`}
//                           className="flex-1 px-3 py-2 border border-blue-400 rounded-md"
//                         />
//                         <button
//                           type="button"
//                           className="px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600"
//                           onClick={() => remove(idx)}
//                           disabled={values.learningOutcomes.length === 1}
//                         >
//                           -
//                         </button>
//                         {idx === values.learningOutcomes.length - 1 && (
//                           <button
//                             type="button"
//                             className="px-3 py-1 bg-green-500 text-white rounded hover:bg-green-600"
//                             onClick={() => push("")}
//                           >
//                             +
//                           </button>
//                         )}
//                       </div>
//                     ))}
//                   </div>
//                 )}
//               </FieldArray>
//             </section>

//             {/* BENEFITS */}
//             <section className="space-y-6">
//               <h3 className="text-lg font-semibold text-gray-800 border-b border-gray-200 pb-2">
//                 Benefits
//               </h3>
//               <FieldArray name="benefits">
//                 {({ push, remove }) => (
//                   <div className="space-y-2">
//                     {values.benefits.map((_, idx) => (
//                       <div key={idx} className="flex gap-2">
//                         <Field
//                           name={`benefits[${idx}]`}
//                           className="flex-1 px-3 py-2 border border-blue-400 rounded-md"
//                         />
//                         <button
//                           type="button"
//                           className="px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600"
//                           onClick={() => remove(idx)}
//                           disabled={values.benefits.length === 1}
//                         >
//                           -
//                         </button>
//                         {idx === values.benefits.length - 1 && (
//                           <button
//                             type="button"
//                             className="px-3 py-1 bg-green-500 text-white rounded hover:bg-green-600"
//                             onClick={() => push("")}
//                           >
//                             +
//                           </button>
//                         )}
//                       </div>
//                     ))}
//                   </div>
//                 )}
//               </FieldArray>
//             </section>

//             {/* FEATURES */}
//             <section className="space-y-6 bg-blue-50 p-6 rounded-lg">
//               <h3 className="text-lg font-semibold text-gray-800 border-b border-gray-200 pb-2">
//                 Features
//               </h3>
//               <div className="flex flex-wrap gap-6">
//                 <label className="inline-flex items-center">
//                   <Field type="checkbox" name="features.certificate" />
//                   <span className="ml-2 text-gray-700">Certificate</span>
//                 </label>
//                 <label className="inline-flex items-center">
//                   <Field type="checkbox" name="features.codingExercises" />
//                   <span className="ml-2 text-gray-700">Coding Exercises</span>
//                 </label>
//                 <label className="inline-flex items-center">
//                   <Field type="checkbox" name="features.recordedLectures" />
//                   <span className="ml-2 text-gray-700">Recorded Lectures</span>
//                 </label>
//               </div>
//             </section>

//             {/* KEY FEATURES */}
//             <section className="space-y-6">
//               <h3 className="text-lg font-semibold text-gray-800 border-b border-gray-200 pb-2">
//                 Key Features
//               </h3>
//               <FieldArray name="keyFeatures">
//                 {({ push, remove }) => (
//                   <div className="space-y-6">
//                     {values.keyFeatures.map((feature, idx) => (
//                       <div
//                         key={idx}
//                         className="p-5 border border-blue-400 rounded-lg bg-white shadow-sm"
//                       >
//                         <div className="flex justify-between items-center mb-3">
//                           <h4 className="font-semibold text-blue-700">
//                             Feature {idx + 1}
//                           </h4>
//                           <button
//                             type="button"
//                             className="px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600"
//                             onClick={() => remove(idx)}
//                             disabled={values.keyFeatures.length === 1}
//                           >
//                             Remove
//                           </button>
//                         </div>

//                         <div className="mb-3">
//                           <label className="block text-sm font-medium text-gray-700 mb-1">
//                             Title
//                           </label>
//                           <Field
//                             name={`keyFeatures[${idx}].title`}
//                             className="w-full px-3 py-2 border border-blue-400 rounded-md"
//                           />
//                           <ErrorMessage
//                             name={`keyFeatures[${idx}].title`}
//                             component="div"
//                             className="text-xs text-red-500 mt-1"
//                           />
//                         </div>

//                         <div className="mb-3">
//                           <label className="block text-sm font-medium text-gray-700 mb-1">
//                             Description
//                           </label>
//                           <Field
//                             as="textarea"
//                             name={`keyFeatures[${idx}].description`}
//                             rows="2"
//                             className="w-full px-3 py-2 border border-blue-400 rounded-md"
//                           />
//                         </div>

//                         <div>
//                           <label className="block mb-1 font-medium text-gray-700">
//                             Sub Points
//                           </label>
//                           <FieldArray name={`keyFeatures[${idx}].subPoints`}>
//                             {({ push: pushSP, remove: removeSP }) => (
//                               <div className="space-y-2">
//                                 {feature.subPoints?.map((_, spIdx) => (
//                                   <div key={spIdx} className="flex gap-2">
//                                     <Field
//                                       name={`keyFeatures[${idx}].subPoints[${spIdx}]`}
//                                       className="flex-1 px-3 py-2 border border-blue-400 rounded-md"
//                                     />
//                                     <button
//                                       type="button"
//                                       className="px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600"
//                                       onClick={() => removeSP(spIdx)}
//                                       disabled={feature.subPoints.length === 1}
//                                     >
//                                       -
//                                     </button>
//                                     {spIdx === feature.subPoints.length - 1 && (
//                                       <button
//                                         type="button"
//                                         className="px-3 py-1 bg-green-500 text-white rounded hover:bg-green-600"
//                                         onClick={() => pushSP("")}
//                                       >
//                                         +
//                                       </button>
//                                     )}
//                                   </div>
//                                 ))}
//                               </div>
//                             )}
//                           </FieldArray>
//                         </div>
//                       </div>
//                     ))}
//                     <button
//                       type="button"
//                       className="px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700"
//                       onClick={() =>
//                         push({
//                           title: "",
//                           description: "",
//                           subPoints: [""],
//                         })
//                       }
//                     >
//                       Add Key Feature
//                     </button>
//                   </div>
//                 )}
//               </FieldArray>
//             </section>

//             {/* SUBMIT BUTTONS */}
//             <div className="flex justify-end gap-4 pt-6 border-t border-gray-200">
//               {/* <button
//               type="button"
//               onClick={() => navigate("/admin/courses")}
//               className="px-6 py-3 bg-gray-400 hover:bg-gray-500 text-white rounded-lg"
//             >
//               Cancel
//             </button> */}
//               <button
//                 type="submit"
//                 disabled={isSubmitting || isLoading}
//                 className="px-8 py-3 bg-green-600 hover:bg-green-700 text-white font-semibold rounded-lg shadow-lg transition disabled:opacity-50"
//               >
//                 {editCourseData ? "Update Course" : "Create Course"}
//               </button>
//             </div>
//           </Form>
//         )}
//       </Formik>
//     </div>
//   );
// };

// export default CourseForm;
// working course form with field 

// import {
//   FaBook,
//   FaChalkboardTeacher,
//   FaClipboardList,
//   FaUsers,
// } from "react-icons/fa";
// import { HiOutlineUserGroup } from "react-icons/hi";
// import { Link } from "react-router-dom";

// /**
//  * Dashboard card configurations
//  * Each card contains:
//  * - title: Label shown on the card
//  * - desc: Short description of the feature
//  * - link: Route to navigate on button click
//  * - icon: Visual icon for the card
//  * - iconBg: Tailwind classes for icon container styling
//  */
// const dashboardCards = [
//   {
//     title: " Training Program Management",
//     desc: "Add new courses, update existing ones.",
//     link: "/admin/manage-courses",
//     icon: <FaBook />,
//     iconBg: "bg-purple-100 text-purple-600",
//   },
//   {
//     title: "Participant Management",
//     desc: "View all student enrollments.",
//     link: "/admin/enrolled-student-list",
//     icon: <FaClipboardList />,
//     iconBg: "bg-yellow-100 text-yellow-600",
//   },
//   {
//     title: "Trainer Management",
//     desc: "View all trainer enrollments.",
//     link: "/admin/trainer-management",
//     icon: <HiOutlineUserGroup />,
//     iconBg: "bg-pink-100 text-pink-600",
//   },
//   {
//     title: "Assessment Tests",
//     desc: "View all trainer enrollments.",
//     link: "/admin/manage-test",
//     icon: <HiOutlineUserGroup />,
//     iconBg: "bg-pink-100 text-pink-600",
//   },
//   {
//     title: "Attendance Tracker",
//     desc: "View all trainer enrollments.",
//     link: "/admin/manage-meeting",
//     icon: <HiOutlineUserGroup />,
//     iconBg: "bg-pink-100 text-pink-600",
//   },
//    {
//     title: "Assignment Management",
//     desc: "View all trainer enrollments.",
//     link: "/admin/manage-assignments",
//     icon: <HiOutlineUserGroup />,
//     iconBg: "bg-pink-100 text-pink-600",
//   },
//   {
//     title: "Book Session - Upskilling",
//     desc: "Schedule and manage upskilling sessions for students or staff.",
//     link: "/admin/book-session",
//     icon: <FaChalkboardTeacher />,
//     iconBg: "bg-green-100 text-green-600",
//   },
//   {
//     title: "User Management",
//     desc: "View, edit, and manage all users.",
//     link: "/admin/users",
//     icon: <FaUsers />,
//     iconBg: "bg-blue-100 text-blue-600",
//   },  
// ];

// //  AdminDashboardPage component
// const AdminDashboardPage = () => {
//   return (
//     <div className="min-h-screen bg-gradient-to-r from-blue-100 via-blue-200 to-pink-100 p-8">
//       <div className="max-w-7xl mx-auto">
//         {/* Page Header */}
//         <header className="mb-12 text-center">
//           <h1 className="text-4xl font-extrabold text-gray-900 tracking-tight mb-2">
//             Admin Dashboard
//           </h1>
//           <p className="text-gray-600 max-w-xl mx-auto text-lg">
//             Manage users, trainer, courses, and view platform activity.
//           </p>
//         </header>

//         {/* Dashboard Cards Grid */}
//         <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">
//           {dashboardCards.map((card, idx) => (
//             <div
//               key={idx}
//               className="bg-white rounded-3xl p-8 shadow-lg hover:shadow-2xl transition-shadow duration-500 transform hover:scale-[1.03] ease-in-out cursor-pointer group"
//               style={{ animationDelay: `${idx * 100}ms` }}
//               data-aos="fade-up"
//             >
//               {/* Icon and Title Section */}
//               <div className="flex items-center gap-5 mb-6">
//                 <div
//                   className={`${card.iconBg} rounded-xl p-4 shadow-md text-4xl flex items-center justify-center transition-transform duration-300 group-hover:scale-110`}
//                 >
//                   {card.icon}
//                 </div>
//                 <h3 className="text-2xl font-semibold text-gray-900 group-hover:text-indigo-600 transition-colors duration-300">
//                   {card.title}
//                 </h3>
//               </div>

//               {/* Description */}
//               <p className="text-gray-600 mb-8 leading-relaxed">{card.desc}</p>

//               {/* Navigation Button */}
//               <Link
//                 to={card.link}
//                 className="inline-block px-6 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white font-semibold rounded-full shadow-lg transition duration-300 ease-in-out"
//               >
//                 Go to {card.title}
//               </Link>
//             </div>
//           ))}
//         </div>
//       </div>
//     </div>
//   );
// };

// export default AdminDashboardPage;

// admin dashboard 