import{a1 as o,r as n,u as x,j as e,aJ as j}from"./index-BlaCQYdb.js";const u=async s=>{const r={headers:{Authorization:`Bearer ${s}`}};return(await o.get("/api/tests/all-results",r)).data},f=()=>{const[s,r]=n.useState([]),[l,d]=n.useState(!0),[c,h]=n.useState(""),{token:i}=x();return n.useEffect(()=>{(async()=>{if(i)try{const a=await u(i);r(Array.isArray(a.results)?a.results:[])}catch(a){h("Failed to fetch results. "+(a.response?.data?.message||a.message))}finally{d(!1)}else d(!1)})()},[i]),l?e.jsx("div",{className:"container",children:e.jsx("h2",{children:"Loading All Student Results..."})}):c?e.jsx("div",{className:"container",children:e.jsx("div",{className:"alert alert-danger",children:c})}):e.jsxs("div",{className:"container",children:[e.jsx("h1",{style:{marginBottom:"1.5rem",textAlign:"center"},children:"All Student Test Results"}),Array.isArray(s)&&s.length===0?e.jsx("p",{children:"No results found."}):e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Student Name"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Test Title"}),e.jsx("th",{children:"Score"}),e.jsx("th",{children:"Percentage"}),e.jsx("th",{children:"Date"}),e.jsx("th",{children:"Details"})]})}),e.jsx("tbody",{children:s.map(t=>e.jsxs("tr",{children:[e.jsx("td",{children:t.student?`${t.student.firstName} ${t.student.lastName}`:"N/A"}),e.jsx("td",{children:t.student?t.student.email:"N/A"}),e.jsx("td",{children:t.test?t.test.title:"Test Deleted"}),e.jsxs("td",{children:[t.score," / ",t.totalMarks]}),e.jsxs("td",{children:[(t.score/t.totalMarks*100).toFixed(2),"%"]}),e.jsx("td",{children:new Date(t.submittedAt).toLocaleDateString()}),e.jsx("td",{children:e.jsx(j,{to:`/results/${t._id}`,className:"btn btn-sm",children:"View"})})]},t._id))})]})]})};export{f as default};
