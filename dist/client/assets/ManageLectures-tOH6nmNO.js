import{a as C,r as s,q as L,j as e,w as i,t as S,M as E,a1 as g,S as l}from"./index-BlaCQYdb.js";const B=()=>{const o=C(),[d,u]=s.useState([]),[f,x]=s.useState(!0),[h,m]=s.useState(null),{rolePermissions:a}=L(t=>t.permissions),[r,j]=s.useState(null),[b,p]=s.useState(!1);s.useEffect(()=>{(async()=>{try{x(!0);const{data:n}=await g.get("/api/lectures");n.success?u(n.data):m("Failed to fetch recordings")}catch(n){console.error(n),m("Failed to fetch recordings")}finally{x(!1)}})()},[]);const y=t=>{j(t),p(!0)},N=t=>{o(`/edit-lecture/${t}`)},w=async t=>{if((await l.fire({title:"Are you sure?",text:"This lecture will be deleted permanently!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"})).isConfirmed)try{await g.delete(`/api/lectures/${t}`),l.fire("Deleted!","Lecture has been deleted.","success"),u(d.filter(c=>c._id!==t))}catch(c){console.error(c),l.fire("Error!","Failed to delete lecture.","error")}};if(f)return e.jsx("p",{className:"text-center mt-10",children:"Loading recordings..."});if(h)return e.jsx("p",{className:"text-center mt-10 text-red-500",children:h});const v=[{header:"Title",accessor:t=>t.title},{header:"Actions",accessor:t=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>y(t),className:"px-3 py-1 bg-green-500 text-white rounded hover:bg-green-600 transition",children:"View"}),i(a,"lecture","update")&&e.jsx("button",{onClick:()=>N(t._id),className:"px-3 py-1 bg-blue-500 text-white rounded hover:bg-blue-600 transition",children:"Edit"}),i(a,"lecture","delete")&&e.jsx("button",{onClick:()=>w(t._id),className:"px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600 transition",children:"Delete"})]})}];return e.jsxs("div",{className:"p-8 min-h-screen bg-blue-50 font-sans",children:[e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-700",children:"Manage Recordings"}),i(a,"lecture","create")&&e.jsx("button",{onClick:()=>o("/add-course-videos"),className:"px-4 py-2 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600 transition",children:"+ Add Recording"})]}),e.jsx(S,{columns:v,data:d,maxHeight:"600px"})]}),e.jsx(E,{isOpen:b,onClose:()=>p(!1),header:"Lecture Details",children:r&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Title:"})," ",r.title]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Description:"})," ",r.description||"-"]}),r.batches?.length>0&&e.jsxs("div",{children:[e.jsx("strong",{children:"Batches:"}),e.jsx("ul",{className:"list-disc ml-5 mt-1",children:r.batches.map(t=>e.jsxs("li",{children:[t.batchName," - ",t.mode," - ",t.status," -"," ",t.studentCount," participates"]},t._id))})]})]})})]})};export{B as default};
