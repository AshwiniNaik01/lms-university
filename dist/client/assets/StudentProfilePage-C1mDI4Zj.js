import{a7 as x,b as w,r as n,j as e,b7 as P,by as h}from"./index-BlaCQYdb.js";import{g as v,b as S}from"./profile-Ci_nQnci.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],F=x("image",k);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],E=x("mail",C);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],L=x("user",I),_=()=>{const{id:o}=w(),[l,c]=n.useState(null),[i,f]=n.useState(!0),[r,g]=n.useState(!1),[s,m]=n.useState({fullName:"",email:"",collegeName:"",selectedProgram:"",profilePhotoStudent:null});n.useEffect(()=>{(async()=>{try{const t=await v(o);t.success&&(c(t.data),m({fullName:t.data.fullName||"",email:t.data.email||"",collegeName:t.data.collegeName||"",selectedProgram:t.data.selectedProgram||"",profilePhotoStudent:null}))}catch(t){console.error("Failed to fetch Participate",t)}finally{f(!1)}})()},[o]);const N=a=>{const{files:t}=a.target;t.length>0&&m(d=>({...d,profilePhotoStudent:t[0]}))},p=a=>{const{name:t,value:d}=a.target;m(j=>({...j,[t]:d}))},y=async()=>{f(!0);const a=new FormData;a.append("fullName",s.fullName),a.append("email",s.email),a.append("collegeName",s.collegeName),a.append("selectedProgram",s.selectedProgram),s.profilePhotoStudent&&a.append("profilePhotoStudent",s.profilePhotoStudent);try{const t=await S(o,a);t.success?(c(t.data),h.success("Profile updated successfully!"),g(!1),m(d=>({...d,profilePhotoStudent:null}))):h.error(t.message||"Failed to update profile.")}catch(t){console.error("Update failed",t),h.error("Update failed. Please try again.")}finally{f(!1)}};return i?e.jsx("div",{className:"text-center mt-20",children:"Loading..."}):l?e.jsxs("div",{className:"max-w-3xl mx-auto my-10 p-6 rounded-xl space-y-8 bg-gradient-to-r from-[#9cc4d7] via-[#8f9fd6] to-[#d997a4] shadow-2xl",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-4 flex justify-between items-center",children:[e.jsxs("h2",{className:"text-3xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(L,{className:"w-6 h-6 text-blue-600"})," Participate Profile"]}),e.jsx("button",{onClick:()=>g(!r),className:`px-4 py-2 rounded text-white shadow-md font-semibold ${r?"bg-red-500 hover:bg-red-600":"bg-blue-600 hover:bg-blue-700"} transition`,children:r?"Cancel":"Edit"})]}),e.jsxs("section",{className:"bg-white p-6 rounded-xl border shadow-sm flex flex-col md:flex-row gap-6 items-center",children:[e.jsxs("div",{className:"flex-shrink-0 flex flex-col items-center w-full md:w-1/3",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2 mb-4 text-gray-800",children:[e.jsx(F,{className:"w-5 h-5 text-blue-500"})," Profile Photo"]}),e.jsx("img",{src:s.profilePhotoStudent?URL.createObjectURL(s.profilePhotoStudent):l.profilePhotoStudent?`${P}/uploads/student/student-profilephoto/${l.profilePhotoStudent}`:"https://tse4.mm.bing.net/th/id/OIP.s-AC9m7YziZg9lee5VvI-wHaF1?pid=Api&P=0&h=180",alt:"Profile",className:"w-32 h-32 rounded-full object-cover border-4 border-gray-200 shadow-md mb-4"}),r&&e.jsx("input",{type:"file",name:"profilePhotoStudent",accept:"image/*",onChange:N,className:"file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:bg-blue-600 file:text-white hover:file:bg-blue-700 transition cursor-pointer"})]}),e.jsxs("div",{className:"w-full md:w-2/3",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2 text-blue-800 mb-4",children:[e.jsx(E,{className:"w-5 h-5"})," Contact & Education Info"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r?e.jsxs(e.Fragment,{children:[e.jsx(b,{label:"Full Name",name:"fullName",value:s.fullName,onChange:p}),e.jsx(b,{label:"Email",name:"email",value:s.email,onChange:p}),e.jsx(u,{label:"Mobile Number",value:l.mobileNo||"N/A"})]}):e.jsxs(e.Fragment,{children:[e.jsx(u,{label:"Full Name",value:l.fullName||"N/A"}),e.jsx(u,{label:"Email",value:l.email||"N/A"}),e.jsx(u,{label:"Mobile Number",value:l.mobileNo||"N/A"})]})})]})]}),r&&e.jsx("div",{className:"text-end pt-4",children:e.jsx("button",{onClick:y,disabled:i,className:"px-8 py-3 bg-green-600 hover:bg-green-700 border-2 border-black text-white rounded-lg font-semibold shadow-lg disabled:opacity-50 disabled:cursor-not-allowed transition",children:i?"Saving...":"Save Changes"})})]}):e.jsx("div",{className:"text-center mt-20",children:"Participate not found."})},u=({label:o,value:l})=>e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600",children:o}),e.jsx("div",{className:"mt-1 px-3 py-2 bg-white border border-gray-200 rounded-md shadow-sm text-gray-700 select-none",children:l})]}),b=({label:o,name:l,value:c,onChange:i})=>e.jsxs("div",{children:[e.jsx("label",{htmlFor:l,className:"block text-sm font-medium text-gray-600",children:o}),e.jsx("input",{id:l,name:l,value:c,onChange:i,className:"mt-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 w-full",type:"text"})]});export{_ as default};
