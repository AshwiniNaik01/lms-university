import{b as I,a as L,a8 as U,q as $,r as n,c2 as O,al as q,c as G,d as c,c3 as _,j as e,bi as u,I as t,bx as z,bC as V,T as Q,bZ as W,br as H,bW as J,bY as Y,g as h,C as P,bT as T,bM as Z,bL as K,c4 as X,b2 as m,f as g,p as j,aG as F,x as k,S as N}from"./index-BlaCQYdb.js";import{C as ee}from"./CustomDaysSelector-DE48oZZ4.js";import{R as C}from"./RadioButtonGroup-Dg51B77y.js";import{a as se,u as ae,r as re}from"./trainerApi-C8uD07iT.js";const ce=()=>{const{id:l}=I(),E=L(),v=U(),{data:le,loading:te}=$(r=>r.allCourses),[a,S]=n.useState(null),[b,A]=n.useState(!1),[p,R]=n.useState(!1),[D,w]=n.useState(!1),[y,B]=n.useState("");n.useEffect(()=>{v(O())},[v]),n.useEffect(()=>{if(!l)return;(async()=>{w(!0);try{const x=await se(l);S(x)}catch{B("Error fetching trainer data")}finally{w(!1)}})()},[l]);const s=q({enableReinitialize:!0,initialValues:{fullName:a?.fullName||"",email:a?.email||"",mobileNo:a?.mobileNo||"",dob:a?.dob?a.dob.split("T")[0]:"",gender:a?.gender||"",title:a?.title||"",summary:a?.summary||"",certifications:a?.certifications||[],achievements:a?.achievements||[],highestQualification:a?.highestQualification||"",collegeName:a?.collegeName||"",totalExperience:a?.totalExperience||"",courses:a?.courses?Array.isArray(a.courses)?a.courses.map(r=>r.title||r):[a.courses]:[""],password:l?void 0:"",availableTiming:a?.availableTiming?.includes(",")?"custom":a?.availableTiming||"",customBatchDays:a?.availableTiming?.includes(",")?a.availableTiming.split(","):[],linkedinProfile:a?.linkedinProfile||"",resume:a?.resume&&a.resume!=="null"?a.resume:null,idProofTrainer:a?.idProofTrainer&&a.idProofTrainer!=="null"?a.idProofTrainer:null,profilePhotoTrainer:a?.profilePhotoTrainer&&a.profilePhotoTrainer!=="null"?a.profilePhotoTrainer:null,skills:a?.skills||[""],address:{add1:a?.address?.add1||"",add2:a?.address?.add2||"",taluka:a?.address?.taluka||"",dist:a?.address?.dist||"",state:a?.address?.state||"",pincode:a?.address?.pincode||""}},validationSchema:G({fullName:c().required("Full name is required"),email:c().email("Invalid email").required("Email is required"),password:l?c():c().required("Password is required").min(4,"Password must be at least 4 characters"),confirmPassword:l?c():c().oneOf([_("password"),null],"Passwords must match").required("Confirm Password is required")}),onSubmit:async(r,{setSubmitting:x})=>{const d=new FormData;r.availableTiming==="custom"?r.customBatchDays:r.availableTiming;for(let i in r){let o=r[i];i==="availableTiming"&&r.availableTiming==="custom"&&(o=r.customBatchDays.join(",")),i==="address"?Object.entries(o).forEach(([f,M])=>d.append(`address[${f}]`,M)):Array.isArray(o)&&i!=="availableTiming"?o.forEach(f=>d.append(`${i}[]`,f)):o instanceof File?d.append(i,o):i==="password"&&l||d.append(i,o)}try{l?(await ae(l,d),N.fire({icon:"success",title:"Updated!",text:"Trainer updated successfully",timer:2e3,showConfirmButton:!1})):(await re(d),N.fire({icon:"success",title:"Registered!",text:"Trainer registered successfully",timer:2e3,showConfirmButton:!1})),E(-1)}catch(i){N.fire({icon:"error",title:"Error",text:i.response?.data?.message||"Error saving trainer"})}finally{x(!1)}}});return D?e.jsx("div",{children:"Loading trainer data..."}):y?e.jsx("div",{className:"text-red-500",children:y}):e.jsxs("div",{className:"max-w-7xl mx-auto my-8",children:[e.jsxs("div",{className:"text-center mb-10",children:[e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent mb-3",children:l?"Update Trainer Profile":"Register New Trainer"}),e.jsx("div",{className:"w-32 h-1 bg-gradient-to-r from-blue-500 to-purple-500 mx-auto mt-4 rounded-full"})]}),e.jsx("div",{className:"bg-gradient-to-br from-white to-blue-50 rounded-lg  border-4 border-sky-800 shadow-2xl  overflow-hidden",children:e.jsxs("form",{onSubmit:s.handleSubmit,className:"space-y-0",children:[e.jsxs("div",{className:"p-8 border-b border-blue-100 bg-gradient-to-r from-blue-50 to-white",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx(u,{className:"text-white text-xl"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Personal Information"}),e.jsx("p",{className:"text-gray-600",children:"Basic details about the trainer"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsx(t,{name:"fullName",label:"Full Name*",formik:s,icon:e.jsx(u,{className:"text-blue-500"}),placeholder:"Enter full name"}),e.jsx(t,{name:"title",label:"Professional Title*",type:"text",formik:s,placeholder:"e.g., Senior Developer, Data Scientist"}),e.jsx(t,{name:"email",label:"Email Address*",type:"email",formik:s,placeholder:"trainer@example.com"}),e.jsx(t,{name:"mobileNo",label:"Mobile Number*",formik:s,icon:e.jsx(z,{className:"text-blue-500"}),placeholder:"+91 9876543210"}),e.jsx(t,{name:"dob",label:"Date of Birth (optional)",type:"date",formik:s}),e.jsx("div",{className:"md:col-span-2 lg:col-span-1",children:e.jsx(C,{name:"gender",label:"Gender*",formik:s,options:[{value:"Male",label:"Male"},{value:"Female",label:"Female"},{value:"Other",label:"Other"}],icon:e.jsx(V,{className:"text-blue-500"})})})]}),e.jsx("div",{className:"mt-6",children:e.jsx(Q,{name:"summary",label:"Professional Summary (optional)",formik:s,rows:4,placeholder:"Brief summary about teaching experience and expertise..."})})]}),e.jsxs("div",{className:"p-8 border-b border-blue-100",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-green-600 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx(W,{className:"text-white text-xl"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Address Information"}),e.jsx("p",{className:"text-gray-600",children:"Current residential address"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsx(t,{name:"address.add1",label:"Address Line 1*",formik:s,placeholder:"Street address, P.O. Box"}),e.jsx(t,{name:"address.add2",label:"Address Line 2*",formik:s,placeholder:"Apartment, suite, unit, building, floor"}),e.jsx(t,{name:"address.taluka",label:"Taluka*",formik:s}),e.jsx(t,{name:"address.dist",label:"District*",formik:s}),e.jsx(t,{name:"address.state",label:"State*",formik:s}),e.jsx(t,{name:"address.pincode",label:"Pincode*",formik:s})]})]}),e.jsxs("div",{className:"p-8 border-b border-blue-100 bg-gradient-to-r from-purple-50 to-white",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx(H,{className:"text-white text-xl"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Education"}),e.jsx("p",{className:"text-gray-600",children:"Academic qualifications"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.jsx(t,{name:"highestQualification",label:"Highest Qualification*",formik:s,placeholder:"e.g., M.Tech, B.E., Ph.D."})})]}),e.jsxs("div",{className:"p-8 border-b border-blue-100",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-amber-500 to-amber-600 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx(J,{className:"text-white text-xl"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Professional Experience"}),e.jsx("p",{className:"text-gray-600",children:"Training and industry experience"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-4",children:[e.jsx(t,{name:"totalExperience",label:"Total Experience (Years)*",formik:s,type:"number",min:"0",max:"50",step:"0.5",placeholder:"e.g., 5.5"}),e.jsx(t,{name:"linkedinProfile",label:"LinkedIn Profile Link (optional)",formik:s,icon:e.jsx(Y,{className:"text-blue-600"}),placeholder:"https://linkedin.com/in/username"})]}),e.jsx(h,{formik:s,name:"courses",label:`${P}s*`,placeholder:`Add ${P} (e.g., React.js)`})]}),e.jsxs("div",{className:"p-8 border-b border-blue-100 bg-gradient-to-r from-emerald-50 to-white",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx(T,{className:"text-white text-xl"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Skills & Achievements"}),e.jsx("p",{className:"text-gray-600",children:"Professional certifications and skills"})]})]}),e.jsxs("div",{className:"flex flex-col gap-6 mt-6",children:[e.jsx(h,{formik:s,name:"certifications",label:"Certifications (optional)",icon:e.jsx(T,{className:"text-emerald-500"}),placeholder:"Add certification (e.g., AWS Certified)"}),e.jsx(h,{formik:s,name:"achievements",label:"Achievements (optional)",icon:e.jsx(Z,{className:"text-amber-500"}),placeholder:"Add achievement (e.g., Best Trainer Award 2023)"}),e.jsx(h,{formik:s,name:"skills",label:"Technical Skills (optional)",icon:e.jsx(K,{className:"text-blue-500"}),placeholder:"Add skill (e.g., React, Python, ML)"}),e.jsx("div",{className:"md:col-span-2 lg:col-span-3",children:e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-white p-6 rounded-xl border border-blue-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(X,{className:"text-blue-500 text-xl"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Availability Schedule"})]}),e.jsx(C,{name:"availableTiming",label:"Preferred Training Days*",options:[{label:"Weekdays (Mon-Fri)",value:"weekdays(mon-fri)"},{label:"Weekends (Sat-Sun)",value:"weekends(sat-sun)"},{label:"Custom Schedule",value:"custom"}],formik:s}),s.values.availableTiming==="custom"&&e.jsx("div",{className:"mt-4 p-4 bg-white rounded-lg border border-blue-100",children:e.jsx(ee,{name:"customBatchDays",formik:s})})]})})]})]}),e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-red-500 to-red-600 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx(m,{className:"text-white text-xl"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Document Upload"}),e.jsx("p",{className:"text-gray-600",children:"Upload required documents (Max 5MB each)"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"bg-gradient-to-b from-white to-red-50 rounded-xl border border-red-200 p-6 shadow-sm hover:shadow-lg transition-shadow duration-300",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center",children:e.jsx(m,{className:"text-red-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-800",children:"ID Proof*"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Aadhar, PAN, Passport, etc."})]})]}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx("input",{type:"file",name:"idProofTrainer",accept:"application/pdf,image/*",onChange:r=>s.setFieldValue("idProofTrainer",r.currentTarget.files[0]),className:"absolute inset-0 opacity-0 cursor-pointer z-20"}),e.jsxs("div",{className:"border-2 border-dashed border-red-300 bg-white px-4 py-6 rounded-lg hover:border-red-400 transition-all duration-300 text-center",children:[e.jsx(g,{className:"text-red-500 text-2xl mx-auto mb-3"}),e.jsx("p",{className:"text-gray-700 font-medium mb-1",children:s.values.idProofTrainer?s.values.idProofTrainer.name:"Click to upload"}),e.jsx("p",{className:"text-sm text-gray-500",children:"PDF, JPG, PNG (Max 5MB)"})]})]}),a?.idProofTrainer&&!(s.values.idProofTrainer instanceof File)&&e.jsxs("a",{href:`${j.ID_PROOF_TRAINER}${a.idProofTrainer}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 text-red-600 hover:text-red-700 font-medium text-sm",children:[e.jsx(m,{})," View Existing ID Proof"]})]}),e.jsxs("div",{className:"bg-gradient-to-b from-white to-blue-50 rounded-xl border border-blue-200 p-6 shadow-sm hover:shadow-lg transition-shadow duration-300",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(m,{className:"text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-800",children:"Resume (PDF)*"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Professional resume"})]})]}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx("input",{type:"file",name:"resume",accept:"application/pdf",onChange:r=>s.setFieldValue("resume",r.currentTarget.files[0]),className:"absolute inset-0 opacity-0 cursor-pointer z-20"}),e.jsxs("div",{className:"border-2 border-dashed border-blue-300 bg-white px-4 py-6 rounded-lg hover:border-blue-400 transition-all duration-300 text-center",children:[e.jsx(g,{className:"text-blue-500 text-2xl mx-auto mb-3"}),e.jsx("p",{className:"text-gray-700 font-medium mb-1",children:s.values.resume?s.values.resume.name:"Click to upload"}),e.jsx("p",{className:"text-sm text-gray-500",children:"PDF only (Max 5MB)"})]})]}),a?.resume&&!(s.values.resume instanceof File)&&e.jsxs("a",{href:`${j.TRAINER_RESUME}${a.resume}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 text-blue-600 hover:text-blue-700 font-medium text-sm",children:[e.jsx(m,{})," View Existing Resume"]})]}),e.jsxs("div",{className:"bg-gradient-to-b from-white to-purple-50 rounded-xl border border-purple-200 p-6 shadow-sm hover:shadow-lg transition-shadow duration-300",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx(u,{className:"text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-800",children:"Profile Photo (optional)"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Professional headshot"})]})]}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx("input",{type:"file",name:"profilePhotoTrainer",accept:"image/*",onChange:r=>s.setFieldValue("profilePhotoTrainer",r.currentTarget.files[0]),className:"absolute inset-0 opacity-0 cursor-pointer z-20"}),e.jsxs("div",{className:"border-2 border-dashed border-purple-300 bg-white px-4 py-6 rounded-lg hover:border-purple-400 transition-all duration-300 text-center",children:[e.jsx(g,{className:"text-purple-500 text-2xl mx-auto mb-3"}),e.jsx("p",{className:"text-gray-700 font-medium mb-1",children:s.values.profilePhotoTrainer?s.values.profilePhotoTrainer.name:"Click to upload"}),e.jsx("p",{className:"text-sm text-gray-500",children:"JPG, PNG (Max 5MB)"})]})]}),e.jsx("div",{className:"flex justify-center mt-4",children:s.values.profilePhotoTrainer instanceof File?e.jsx("img",{src:URL.createObjectURL(s.values.profilePhotoTrainer),alt:"Preview",className:"w-24 h-24 object-cover rounded-full border-4 border-white shadow-lg"}):a?.profilePhotoTrainer&&a.profilePhotoTrainer!=="null"?e.jsx("img",{src:`${j.TRAINER_PROFILE_PHOTO}${a.profilePhotoTrainer}`,alt:"Profile",className:"w-24 h-24 object-cover rounded-full border-4 border-white shadow-lg"}):e.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-purple-100 to-purple-200 rounded-full flex items-center justify-center border-4 border-white shadow-lg",children:e.jsx(u,{className:"text-purple-400 text-3xl"})})})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mx-5",children:!l&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative w-full",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password*"}),e.jsx("input",{type:b?"text":"password",name:"password",placeholder:"Create a secure password",value:s.values.password,onChange:s.handleChange,onBlur:s.handleBlur,className:"w-full border border-blue-300 rounded-lg px-4 py-2 pr-10 focus:outline-none focus:ring-2 focus:ring-blue-400"}),e.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 cursor-pointer text-gray-500 mt-2",onClick:()=>A(!b),children:b?e.jsx(F,{}):e.jsx(k,{})}),s.touched.password&&s.errors.password&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.errors.password})]}),e.jsxs("div",{className:"relative w-full",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm Password*"}),e.jsx("input",{type:p?"text":"password",name:"confirmPassword",placeholder:"Re-enter your password",value:s.values.confirmPassword,onChange:s.handleChange,onBlur:s.handleBlur,className:"w-full border border-blue-300 rounded-lg px-4 py-2 pr-10 focus:outline-none focus:ring-2 focus:ring-blue-400"}),e.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 cursor-pointer text-gray-500 mt-2",onClick:()=>R(!p),children:p?e.jsx(F,{}):e.jsx(k,{})}),s.touched.confirmPassword&&s.errors.confirmPassword&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.errors.confirmPassword})]})]})}),e.jsx("div",{className:"p-8 border-t border-blue-100 bg-gradient-to-r from-blue-50 to-white",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-6",children:[e.jsxs("div",{className:"text-center md:text-left",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:l?"Update Trainer Profile":"Register Trainer"}),e.jsx("p",{className:"text-gray-600",children:l?"Review and update the trainer information":"Complete the registration to add new trainer"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{type:"button",onClick:()=>window.history.back(),className:"px-8 py-3 border-2 border-gray-300 text-gray-700 font-semibold rounded-lg hover:bg-gray-50 transition-all duration-300",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:s.isSubmitting,className:"px-10 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-bold rounded-lg shadow-lg hover:shadow-xl hover:from-blue-700 hover:to-indigo-700 transform hover:-translate-y-0.5 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:s.isSubmitting?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),l?"Updating...":"Registering..."]}):l?"Update Trainer":"Register Trainer"})]})]})})]})}),e.jsx("div",{className:"absolute top-0 left-0 w-72 h-72 bg-blue-100 rounded-full mix-blend-multiply filter blur-3xl opacity-20 -z-10"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-72 h-72 bg-purple-100 rounded-full mix-blend-multiply filter blur-3xl opacity-20 -z-10"})]})};export{ce as default};
