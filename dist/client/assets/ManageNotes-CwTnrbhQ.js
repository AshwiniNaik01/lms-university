import{r as a,q as w,a as S,j as e,w as n,t as C,M,p as E,S as r}from"./index-BlaCQYdb.js";import{a as D,d as R}from"./notes-DU565Ure.js";const T=()=>{const[m,u]=a.useState([]),[h,o]=a.useState(!0),[i,f]=a.useState(null),[s,p]=a.useState(null),[g,c]=a.useState(!1),{rolePermissions:l}=w(t=>t.permissions),d=S(),x=async()=>{o(!0);try{const t=await D();u(t)}catch(t){f(t.message)}finally{o(!1)}};a.useEffect(()=>{x()},[]);const N=t=>{d(`/edit-note/${t}`)},j=async t=>{if((await r.fire({title:"Are you sure?",text:"You wonâ€™t be able to recover this Study Material!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#0e55c8",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"})).isConfirmed)try{await R(t),await r.fire({icon:"success",title:"Deleted!",text:"Study Material deleted successfully!"}),x()}catch(v){console.error(v),r.fire({icon:"error",title:"Error!",text:"Failed to delete note."})}},y=t=>{p(t),c(!0)},b=[{header:"Title",accessor:"title"},{header:"Actions",accessor:t=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>y(t),className:"px-3 py-1 bg-green-500 text-white rounded hover:bg-green-600 transition",children:"View"}),n(l,"note","update")&&e.jsx("button",{onClick:()=>N(t._id),className:"px-3 py-1 bg-blue-500 text-white rounded hover:bg-blue-600 transition",children:"Edit"}),n(l,"note","delete")&&e.jsx("button",{onClick:()=>j(t._id),className:"px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600 transition",children:"Delete"})]})}];return h?e.jsx("p",{className:"text-center mt-10",children:"Loading notes..."}):i?e.jsx("p",{className:"text-center mt-10 text-red-500",children:i}):e.jsxs("div",{className:"flex flex-col max-h-screen bg-white font-sans",children:[e.jsxs("div",{className:"flex justify-between items-center px-8 py-2 bg-white shadow-md z-10",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-700",children:"Manage Reference Material Repository"}),n(l,"note","create")&&e.jsx("button",{onClick:()=>d("/add-notes"),className:"px-4 py-2 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600 transition",children:"+ Add Reference Material"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx(C,{columns:b,data:m,maxHeight:"440px"})})}),e.jsx(M,{isOpen:g,onClose:()=>c(!1),header:s?.title||"Note Details",children:s&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-500 font-medium",children:"Title"}),e.jsx("span",{className:"text-gray-800",children:s.title})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-500 font-medium",children:"Content"}),e.jsx("span",{className:"text-gray-800",children:s.content||"No description available."})]})]}),s.file&&e.jsxs("div",{className:"flex flex-col mt-4",children:[e.jsx("span",{className:"text-gray-500 font-medium",children:"File"}),e.jsx("a",{href:E.COURSE_NOTES+s.file,target:"_blank",rel:"noopener noreferrer",className:"mt-2 text-blue-600 hover:underline font-medium",children:"View File"})]})]})})]})};export{T as default};
