import{a8 as N,q as T,r as m,bz as D,al as q,c as E,d as t,bB as P,c0 as w,c1 as F,j as e,I as s,bx as S,T as k,bC as I,g as f,bg as A}from"./index-BlaCQYdb.js";import{R as p}from"./RadioButtonGroup-Dg51B77y.js";import{M as B}from"./MultiSelectDropdown-C1q29ZzD.js";import{C}from"./CustomDaysSelector-DE48oZZ4.js";import{F as h}from"./FileInput-D8QhQwhz.js";import{P as L}from"./PDFUploadField-CVPV1usj.js";import{a as M,u as $}from"./trainerApi-C8uD07iT.js";const W=()=>{const u=N(),g=T(n=>n.courses.data),[j,b]=m.useState(!0),[x,v]=m.useState(null);m.useEffect(()=>{u(D()),(async()=>{b(!0);try{const d=A.get("trainerId");if(!d)return;const i=await M(d);v({fullName:i.fullName||"",email:i.email||"",mobileNo:i.mobileNo||"",dob:i.dob?.split("T")[0]||"",gender:i.gender||"",title:i.title||"",summary:i.summary||"",certifications:i.certifications||[],achievements:i.achievements||[],highestQualification:i.highestQualification||"",collegeName:i.collegeName||"",totalExperience:i.totalExperience||"",courses:i.courses||[],password:"",availableTiming:i.availableTiming||"",customBatchDays:[],linkedinProfile:i.linkedinProfile||"",resume:null,idProofTrainer:null,profilePhotoTrainer:null,address:{add1:i.address?.add1||"",add2:i.address?.add2||"",taluka:i.address?.taluka||"",dist:i.address?.dist||"",state:i.address?.state||"",pincode:i.address?.pincode||""}})}catch(d){console.error("❌ Error fetching trainer data",d)}finally{b(!1)}})()},[u]);const a=q({enableReinitialize:!0,initialValues:x||{},validationSchema:E({fullName:t().required("Full name is required"),email:t().email("Invalid email").required("Email is required"),mobileNo:t().required("Mobile number is required"),dob:F().required("Date of birth is required"),gender:t().required("Gender is required"),title:t().required("Title is required"),summary:t().required("Trainer summary is required"),highestQualification:t().required("Qualification is required"),totalExperience:w().required("Experience is required"),courses:P().min(1,"Select at least one course"),password:t().min(6).nullable(),availableTiming:t().required("Select availability")}),onSubmit:async(n,{setSubmitting:d})=>{const i=new FormData,o={...n};o.availableTiming==="custom"&&(o.availableTiming=(o.customBatchDays||[]).join("-")),delete o.customBatchDays;for(let r in o){const l=o[r];r==="address"&&typeof l=="object"&&l!==null?Object.entries(l).forEach(([c,y])=>{i.append(`address[${c}]`,y)}):Array.isArray(l)?l.forEach(c=>i.append(`${r}[]`,c)):(l instanceof File||l!=null)&&i.append(r,l)}try{const r=getCookie("trainerId");if(!r)throw new Error("Trainer ID not found");const l=await $(r,i);alert("Trainer updated successfully!")}catch(r){console.error("❌ Error updating trainer",r),alert("Error updating trainer")}finally{d(!1)}}});return j?e.jsx("p",{className:"text-center mt-10",children:"Loading trainer info..."}):x?e.jsx("div",{className:"max-w-5xl mx-auto p-6 rounded-xl bg-gradient-to-r from-[#53b8ec] via-[#485dac] to-[#e9577c] shadow-xl my-6",children:e.jsxs("form",{onSubmit:a.handleSubmit,className:"w-full bg-gradient-to-r from-[#e3eff5] via-[#e5e9f6] to-[#f8e9ec] rounded-xl p-6 space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-800 mb-4",children:"Personal Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(s,{name:"fullName",label:"Full Name",formik:a}),e.jsx(s,{name:"title",label:"Title",type:"text",formik:a}),e.jsx(s,{name:"email",label:"Email",type:"email",formik:a}),e.jsx(s,{name:"mobileNo",label:"Mobile Number",formik:a,icon:e.jsx(S,{})}),e.jsx(s,{name:"dob",label:"Date of Birth",type:"date",formik:a}),e.jsx(k,{name:"summary",label:"Trainer Summary",formik:a}),e.jsx(p,{name:"gender",label:"Gender",formik:a,options:[{value:"Male",label:"Male"},{value:"Female",label:"Female"},{value:"Other",label:"Other"}],icon:e.jsx(I,{})})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-800 mb-4",children:"Address"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(s,{name:"address.add1",label:"Address Line 1",formik:a}),e.jsx(s,{name:"address.add2",label:"Address Line 2",formik:a}),e.jsx(s,{name:"address.taluka",label:"Taluka",formik:a}),e.jsx(s,{name:"address.dist",label:"District",formik:a}),e.jsx(s,{name:"address.state",label:"State",formik:a}),e.jsx(s,{name:"address.pincode",label:"Pincode",formik:a})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-800 mb-4",children:"Education"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(s,{name:"highestQualification",label:"Highest Qualification",formik:a}),e.jsx(s,{name:"collegeName",label:"College Name",formik:a})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-800 mb-4",children:"Experience"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(s,{name:"totalExperience",label:"Total Experience (years)",type:"number",formik:a}),e.jsx(B,{name:"courses",label:"Subject Experience",options:g,formik:a,multiple:!0,getOptionValue:n=>n._id,getOptionLabel:n=>n.title})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-800 mb-4",children:"Other Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(f,{formik:a,name:"certifications",label:"Certification"}),e.jsx(f,{formik:a,name:"achievements",label:"Achievements"}),e.jsx(s,{name:"linkedinProfile",label:"LinkedIn Profile Link",formik:a}),e.jsx(s,{name:"password",label:"Password",type:"password",formik:a}),e.jsxs("div",{className:"mb-4",children:[e.jsx(p,{name:"availableTiming",label:"Available Days",options:[{label:"Weekdays (Mon-Fri)",value:"weekdays(mon-fri)"},{label:"Weekends (Sat-Sun)",value:"weekends(sat-sun)"},{label:"Custom",value:"custom"}],formik:a}),a.values.availableTiming==="custom"&&e.jsx(C,{name:"customBatchDays",formik:a})]})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-800 mb-4",children:"Upload Documents"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(h,{name:"idProofTrainer",label:"ID Proof",formik:a}),e.jsx(h,{name:"profilePhotoTrainer",label:"Profile Photo",formik:a}),e.jsx(L,{name:"resume",label:"Upload Resume (PDF)",formik:a})]})]}),e.jsx("div",{className:"text-end pt-6",children:e.jsx("button",{type:"submit",className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-8 py-3 rounded-md font-semibold shadow-md hover:from-blue-700 hover:to-indigo-700 transition",disabled:a.isSubmitting,children:a.isSubmitting?"Updating...":"Update Trainer"})})]})}):e.jsx("p",{className:"text-center mt-10 text-red-500",children:"Trainer data not found."})};export{W as default};
