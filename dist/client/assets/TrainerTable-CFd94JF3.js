import{r as a,a as R,q as P,j as e,p as n,w as N,x as C,bl as $,t as S,M,S as x}from"./index-BlaCQYdb.js";import{f as _,d as O}from"./trainerApi-C8uD07iT.js";const i=(r,o="N/A")=>r==null||r===""||Array.isArray(r)&&r.length===0?o:r,j=r=>r&&typeof r=="string"&&r.trim()!==""&&r!=="N/A"&&r!=="NA"&&r!=="null"&&r!=="undefined",D=()=>{const[r,o]=a.useState([]),[y,u]=a.useState(!1),[h,m]=a.useState(""),[l,f]=a.useState(null),[T,p]=a.useState(!1),c=R(),{rolePermissions:d}=P(t=>t.permissions),g=async()=>{u(!0),m("");try{const b=(await _()).map(s=>({...s,fullName:s.fullName??null,title:s.title??null,email:s.email??null,mobileNo:s.mobileNo??null,highestQualification:s.highestQualification??null,totalExperience:s.totalExperience??null,resume:s.resume??null,profilePhotoTrainer:s.profilePhotoTrainer??null}));o(b)}catch(t){console.error("Failed to fetch trainers:",t),m("Failed to fetch trainers.")}finally{u(!1)}};a.useEffect(()=>{g()},[]);const E=async t=>{if((await x.fire({title:"Are you sure?",text:"This action will permanently delete the trainer!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc2626",cancelButtonColor:"#6b7280",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel",background:"#fefefe"})).isConfirmed)try{await O(t),await g(),x.fire({title:"Deleted!",text:"Trainer has been removed successfully.",icon:"success",confirmButtonColor:"#2563eb",timer:1500,showConfirmButton:!1})}catch(s){console.error("Error deleting trainer:",s),x.fire({title:"Error!",text:"Failed to delete trainer.",icon:"error",confirmButtonColor:"#d33"})}},A=t=>{f(t),p(!0)},v=()=>{p(!1),f(null)},w=a.useMemo(()=>[{header:"Profile",accessor:t=>t.profilePhotoTrainer?e.jsx("img",{src:`${n.TRAINER_PROFILE_PHOTO}${t.profilePhotoTrainer}`,alt:t.fullName,className:"w-12 h-12 rounded-full object-cover"}):e.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center text-gray-500",children:"N/A"})},{header:"Name",accessor:t=>i(t.fullName)},{header:"Title",accessor:t=>i(t.title)},{header:"Qualification",accessor:t=>i(t.highestQualification)},{header:"Experience",accessor:t=>t.totalExperience?`${t.totalExperience} yrs`:"N/A"},{header:"Email",accessor:t=>t.email?e.jsx("a",{href:`mailto:${t.email}`,className:"text-blue-600 hover:underline",children:t.email}):"N/A"},{header:"Mobile No",accessor:t=>i(t.mobileNo)},{header:"Resume",accessor:t=>j(t.resume)?e.jsx("a",{href:`${n.TRAINER_RESUME}${t.resume}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-700 underline text-sm",download:!0,children:"Download"}):e.jsx("span",{className:"text-gray-400",children:"N/A"})},{header:"Actions",accessor:t=>e.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[e.jsx("button",{onClick:()=>A(t),className:"p-2 rounded-full bg-blue-50 hover:bg-blue-100 text-blue-600",title:"View Trainer Details",children:e.jsx(C,{})}),N(d,"trainer","update")&&e.jsx("button",{onClick:()=>c(`/trainers/update/${t._id}`),className:"p-2 rounded-full bg-yellow-50 hover:bg-yellow-100 text-yellow-600",children:e.jsx($,{})}),N(d,"trainer","delete")&&e.jsx("button",{onClick:()=>E(t._id),className:"p-2 rounded-full bg-red-50 hover:bg-red-100 text-red-600",children:"ðŸ—‘ï¸"})]})}],[c,d]);return e.jsxs("div",{className:"max-h-screen p-2 bg-gray-50",children:[e.jsxs("div",{className:"max-w-7xl mx-auto overflow-hidden",children:[e.jsxs("header",{className:"px-6 py-5 bg-blue-50 border-b border-blue-200 flex items-center justify-between",children:[e.jsx("h1",{className:"text-3xl font-extrabold text-blue-900 tracking-tight",children:"Trainer Management"}),e.jsx("button",{onClick:()=>c("/trainer-register"),className:"px-4 py-2 bg-blue-600 text-white font-semibold rounded-lg shadow hover:bg-blue-700 transition",children:"Register Trainer"})]}),e.jsx("div",{className:"p-2",children:y?e.jsx("p",{className:"text-center text-gray-600 text-lg animate-pulse py-12",children:"Loading trainers..."}):h?e.jsx("p",{className:"text-center text-red-500 text-lg py-12",children:h}):r.length===0?e.jsx("p",{className:"text-center text-gray-500 italic text-lg py-12",children:"No trainers found."}):e.jsx(S,{columns:w,data:r,maxHeight:"500px"})})]}),e.jsx(M,{isOpen:T,onClose:v,header:"Trainer Details",children:l?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-5 pb-4 border-b border-gray-200",children:[e.jsx("img",{src:l.profilePhotoTrainer?`${n.TRAINER_PROFILE_PHOTO}${l.profilePhotoTrainer}`:"https://via.placeholder.com/80",alt:l.fullName,className:"w-24 h-24 rounded-full object-cover border border-gray-300 shadow-sm"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-semibold text-gray-900",children:l.fullName}),e.jsx("p",{className:"text-gray-600 text-sm",children:l.title})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-x-8 gap-y-4 text-sm text-gray-800",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",l.email?e.jsx("a",{href:`mailto:${l.email}`,className:"text-blue-600 hover:underline",children:l.email}):"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Mobile:"})," ",i(l.mobileNo)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Qualification:"})," ",i(l.highestQualification)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Experience:"})," ",l.totalExperience?`${l.totalExperience} years`:"N/A"]})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[e.jsx("strong",{children:"Resume:"})," ",j(l.resume)?e.jsx("a",{href:`${n.TRAINER_RESUME}${l.resume}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline text-sm font-medium",download:!0,children:"Download Resume"}):e.jsx("span",{className:"text-gray-400 ml-2",children:"N/A"})]})]}):e.jsx("p",{className:"text-center text-gray-500 italic py-8",children:"No trainer selected."})})]})};export{D as default};
