import{r as n,u as w,j as e,aK as v,aZ as B,a_ as E,a$ as C}from"./index-BlaCQYdb.js";const D=()=>{const[h,f]=n.useState([]),[l,m]=n.useState(""),[x,g]=n.useState(""),[t,d]=n.useState(null),[p,r]=n.useState(""),[u,b]=n.useState(!0),{token:o}=w(),i=async()=>{b(!0);try{const a=await v();f(a||[])}catch{r("Failed to load branches.")}b(!1)};n.useEffect(()=>{i()},[]);const y=async a=>{if(a.preventDefault(),!l.trim()){alert("Branch name cannot be empty.");return}r("");try{const s=await E({name:l,description:x},o);s.success?(i(),m(""),g(""),alert("Branch created!")):r(s.message||"Failed to create branch.")}catch(s){r(s.response?.data?.message||"Error creating branch.")}},j=async a=>{if(a.preventDefault(),!t||!t.name.trim()){alert("Branch name cannot be empty for update.");return}r("");try{const s=await B(t._id,{name:t.name,description:t.description},o);s.success?(i(),d(null),alert("Branch updated!")):r(s.message||"Failed to update branch.")}catch(s){r(s.response?.data?.message||"Error updating branch.")}},N=async(a,s)=>{if(typeof window<"u"&&window.confirm(`Are you sure you want to delete branch "${s}"? Associated courses might prevent deletion.`)){r("");try{const c=await C(a,o);c.success?(i(),alert("Branch deleted!")):r(c.message||"Failed to delete branch.")}catch(c){r(c.response?.data?.message||"Error deleting branch.")}}};return u?e.jsx("p",{children:"Loading branches..."}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-purple-100 py-12 px-4 sm:px-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("h1",{className:"text-4xl font-bold text-center text-indigo-700 mb-12 drop-shadow-lg",children:"Branch Management"}),p&&e.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg mb-6 shadow-sm",children:p}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-10",children:[e.jsxs("div",{className:"bg-white shadow-xl rounded-2xl p-8 border border-gray-200 hover:shadow-2xl transition",children:[e.jsx("h2",{className:"text-2xl font-semibold text-indigo-600 mb-6 flex items-center gap-2",children:t?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-sm bg-green-100 text-green-700 px-3 py-1 rounded-full shadow-sm",children:"Editing"})," ","Edit Branch: ",t.initialName||t.name]}):"Create New Branch"}),e.jsxs("form",{onSubmit:t?j:y,className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Branch Name"}),e.jsx("input",{type:"text",value:t?t.name:l,onChange:a=>t?d({...t,name:a.target.value}):m(a.target.value),required:!0,placeholder:"Enter branch name",className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-indigo-500 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{rows:3,value:t?t.description:x,onChange:a=>t?d({...t,description:a.target.value}):g(a.target.value),placeholder:"Optional branch description",className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-indigo-500 focus:outline-none"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{type:"submit",className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-5 py-2 rounded-lg hover:from-indigo-700 hover:to-purple-700 transition shadow-md",children:t?"Save Changes":"Create Branch"}),t&&e.jsx("button",{type:"button",onClick:()=>d(null),className:"bg-gray-400 text-white px-5 py-2 rounded-lg hover:bg-gray-500 transition shadow-md",children:"Cancel"})]})]})]}),e.jsxs("div",{className:"bg-white shadow-xl rounded-2xl p-6 border border-gray-200 max-h-[600px]",children:[e.jsx("h2",{className:"text-2xl font-semibold text-indigo-600 mb-4",children:"Existing Branches"}),h.length===0&&!u?e.jsx("p",{className:"text-gray-600 text-center py-4",children:"No branches found."}):e.jsxs("div",{className:"border border-gray-300 rounded-lg overflow-hidden",children:[e.jsx("table",{className:"min-w-full text-sm",children:e.jsx("thead",{className:"bg-indigo-100 text-indigo-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 font-semibold text-left",children:"Name"}),e.jsx("th",{className:"px-4 py-3 font-semibold text-left",children:"Description"}),e.jsx("th",{className:"px-4 py-3 font-semibold text-center",children:"Actions"})]})})}),e.jsx("div",{className:"overflow-auto max-h-[400px]",children:e.jsx("table",{className:"min-w-full text-sm",children:e.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:h.map(a=>e.jsxs("tr",{className:"hover:bg-gray-50 transition",children:[e.jsx("td",{className:"px-4 py-3",children:a.name}),e.jsx("td",{className:"px-4 py-3 text-gray-600",children:a.description||"-"}),e.jsxs("td",{className:"px-4 py-3 flex gap-2 justify-center",children:[e.jsx("button",{onClick:()=>d({...a,initialName:a.name}),className:"bg-yellow-400 hover:bg-yellow-500 text-white px-3 py-1 rounded-md text-xs shadow",children:"Edit"}),e.jsx("button",{onClick:()=>N(a._id,a.name),className:"bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded-md text-xs shadow",children:"Delete"})]})]},a._id))})})})]})]})]})]})})},k=()=>e.jsx("div",{children:e.jsx(D,{})});export{k as default};
