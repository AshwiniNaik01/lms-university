import{r as s,u as y,j as e,L as E,aK as S,aL as k}from"./index-BlaCQYdb.js";import{f as C}from"./enrollments-0PjS8RPB.js";function L(){return new URLSearchParams(E().search)}const A=()=>{const[n,p]=s.useState([]),[I,g]=s.useState([]),[o,l]=s.useState(new Set),[f,i]=s.useState(!0),[d,c]=s.useState(""),b=L(),{isAuthenticated:x,currentUser:m,token:a}=y(),u=b.get("branchId");s.useEffect(()=>{(async()=>{i(!0),c("");try{const r=await S();g(r||[]);const h=await k(u);if(p(h?.data||h||[]),x&&m?.user?.role==="student"&&a){const j=await C(a),v=new Set(j.map(N=>N.course._id));l(v)}}catch(r){c("Failed to load course data. Please try again later."),console.error("Error loading course list data:",r)}i(!1)})()},[u,x,m,a]),console.log("Token from course list page ",a);const w=t=>{l(r=>new Set([...r,t]))};return d?e.jsx("p",{className:"text-center text-red-500 mt-6 text-lg",children:d}):e.jsxs("div",{className:"min-h-screen w-full bg-gradient-to-tr from-indigo-200 via-purple-100 to-blue-200 pt-[100px] px-6 pb-16",children:[e.jsx("div",{className:"fixed top-17 left-0 w-full z-30 bg-white/80 backdrop-blur-md border-b border-indigo-200 shadow-md px-6 py-4 md:px-20",children:e.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 text-center md:text-left",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-indigo-600 to-purple-500",children:"ðŸš€ Available Courses"}),e.jsx("p",{className:"mt-1 text-sm md:text-base text-indigo-600",children:"Explore and enroll in courses from various branches"})]})})}),f?e.jsx("p",{className:"text-center text-indigo-700 text-xl mt-12 animate-pulse",children:"Loading courses..."}):n.length===0?e.jsx("p",{className:"text-center text-indigo-700 text-lg mt-12",children:"No courses available for the selected branch."}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mt-6 px-4 md:px-20 pb-16 overflow-y-auto",children:n.map(t=>e.jsxs("div",{className:"bg-white/70 backdrop-blur-xl border border-indigo-200 rounded-2xl p-6 shadow-xl hover:shadow-2xl hover:scale-[1.02] transition-all duration-300 ease-in-out flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-indigo-800 mb-1 truncate",children:t.title}),e.jsx("p",{className:"text-gray-700 text-sm line-clamp-3",children:t.description||"No description provided."})]}),e.jsx("button",{disabled:o.has(t._id),onClick:()=>w(t._id),className:`mt-4  text-white text-sm font-medium text-center px-4 py-2 rounded-lg transition-all duration-300 ${o.has(t._id)?"bg-green-600 cursor-not-allowed":"bg-gradient-to-r from-indigo-500 to-pink-500 hover:from-indigo-600 hover:to-pink-600"}`,children:o.has(t._id)?"Enrolled":"Enroll Now"})]},t._id))})]})};export{A as default};
