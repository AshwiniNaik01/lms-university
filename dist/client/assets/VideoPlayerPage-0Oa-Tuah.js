import{a7 as L,a8 as V,a as P,b as I,q as M,r as c,a9 as _,j as e,aa as U,ab as $,ac as R,p as B,ad as D,ae as Y,af as O,ag as W,ah as q,ai as J,aj as z,ak as A}from"./index-BlaCQYdb.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],G=L("video",H),se=()=>{const s=V(),t=P(),{courseId:n,videoId:h,batchId:o}=I(),{selectedVideo:i,allLectures:l,courseTitle:u}=M(r=>r.videos);return c.useEffect(()=>{if(h&&l.length>0){const r=l.find(f=>f._id===h);r&&r._id!==i?._id&&s(_(r))}},[h,l,s,i]),i?e.jsxs("div",{className:"max-h-screen bg-gradient-to-br from-gray-900 to-black text-white",children:[e.jsx(Q,{courseTitle:u,chapterTitle:i.title,navigateBack:()=>t(-1)}),e.jsxs("main",{className:"max-w-7xl mx-auto px-4 py-6 grid lg:grid-cols-4 gap-6",children:[e.jsxs("section",{className:"lg:col-span-3",children:[e.jsx(ee,{video:i}),e.jsxs("div",{className:"flex items-center gap-2 mt-4",children:[e.jsx(G,{className:"w-6 h-6"}),e.jsx("span",{children:i.title})]})]}),e.jsx("aside",{className:"lg:col-span-1 space-y-3",children:l.map(r=>e.jsxs("div",{onClick:()=>t(`/batch/${o}/video/${r._id}`),className:`flex items-center gap-3 p-3 rounded-lg cursor-pointer
        ${i._id===r._id?"bg-blue-600":"bg-gray-800"}`,children:[e.jsx(U,{className:"w-5 h-5"}),e.jsx("span",{children:r.title})]},r._id))})]})]}):e.jsx(K,{message:"Loading video content..."})},K=({message:s})=>e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 to-black flex items-center justify-center",children:e.jsxs("div",{className:"text-center text-white",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-blue-500 mx-auto mb-4"}),e.jsx("p",{className:"text-xl",children:s})]})}),Q=({courseTitle:s,chapterTitle:t,navigateBack:n})=>e.jsx("header",{className:"bg-black/80 backdrop-blur-lg border-b border-gray-800 sticky top-0 z-50",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-3 flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{onClick:n,className:"flex items-center gap-2 text-gray-300 hover:text-white transition-colors p-2 rounded-lg hover:bg-gray-800",children:[e.jsx($,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden sm:block",children:"Back"})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-semibold line-clamp-1",children:s}),e.jsx("p",{className:"text-sm text-gray-400",children:t})]})]})})}),X=s=>{if(!s)return null;const t=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/,n=s.match(t);return n&&n[7].length===11?n[7]:null},Z=({embedUrl:s})=>e.jsx("div",{className:"w-full aspect-video rounded-2xl overflow-hidden bg-black",children:e.jsx("iframe",{src:s,className:"w-full h-full",frameBorder:"0",allow:"autoplay; fullscreen",allowFullScreen:!0,sandbox:"allow-scripts allow-same-origin allow-presentation",referrerPolicy:"strict-origin-when-cross-origin",title:"SharePoint Video"})}),ee=({video:s})=>{const t=c.useRef(null),n=c.useRef(null),o=!!X(s.contentUrl),i=s.contentUrl?.includes("sharepoint.com")||s.contentUrl?.includes("embed.aspx"),[l,u]=c.useState(!1),[r,f]=c.useState(0),[N,y]=c.useState(0),[k,F]=c.useState(1),[m,p]=c.useState(!1),[S,g]=c.useState(!1),[E,j]=c.useState(!0);c.useEffect(()=>{if(!o&&t.current){const a=t.current,d=()=>f(a.currentTime),x=()=>y(a.duration),w=()=>u(!1);return a.addEventListener("timeupdate",d),a.addEventListener("loadedmetadata",x),a.addEventListener("ended",w),()=>{a.removeEventListener("timeupdate",d),a.removeEventListener("loadedmetadata",x),a.removeEventListener("ended",w)}}},[s,o]);const b=()=>{if(o){if(!n.current)return;n.current.contentWindow.postMessage(JSON.stringify({event:"command",func:l?"pauseVideo":"playVideo"}),"*"),u(!l)}else t.current&&(l?t.current.pause():t.current.play(),u(!l))},C=()=>{if(o){if(!n.current)return;n.current.contentWindow.postMessage(JSON.stringify({event:"command",func:m?"unMute":"mute"}),"*"),p(!m)}else t.current&&(t.current.muted=!m,p(!m))},T=()=>{const a=o?n.current:t.current;document.fullscreenElement?(document.exitFullscreen(),g(!1)):(a.requestFullscreen().catch(console.error),g(!0))},v=a=>{const d=Math.floor(a/60)||0,x=Math.floor(a%60)||0;return`${d}:${x<10?"0":""}${x}`};return e.jsxs("div",{className:"relative bg-black rounded-2xl overflow-hidden shadow-2xl group",onMouseEnter:()=>j(!0),onMouseLeave:()=>j(!1),children:[o?e.jsxs("div",{className:"w-full aspect-video flex items-center justify-center bg-black rounded-2xl cursor-pointer",onClick:()=>window.open(s.contentUrl,"_blank"),children:[e.jsx(R,{className:"text-red-600 text-4xl mr-2"}),e.jsx("span",{className:"text-white text-lg",children:"Watch on YouTube"})]}):i?e.jsx(Z,{embedUrl:s.contentUrl}):e.jsx("video",{ref:t,className:"w-full aspect-video",src:`${B.LECTURE_CONTENT}${s.contentUrl}`,onClick:b,controls:!1}),E&&!o&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/90 to-transparent p-4 transition-opacity duration-300",children:e.jsxs("div",{className:"flex items-center justify-between text-white",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>t.current.currentTime-=10,children:e.jsx(D,{})}),e.jsx("button",{onClick:b,children:l?e.jsx(Y,{}):e.jsx(O,{})}),e.jsx("button",{onClick:()=>t.current.currentTime+=10,children:e.jsx(W,{})}),e.jsxs("span",{children:[v(r)," / ",v(N)]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:C,children:m?e.jsx(q,{}):e.jsx(J,{})}),e.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:k,onChange:a=>{const d=parseFloat(a.target.value);F(d),t.current&&(t.current.volume=d),p(d===0)}}),e.jsx("button",{onClick:T,children:S?e.jsx(z,{}):e.jsx(A,{})})]})]})})]})};export{se as default};
