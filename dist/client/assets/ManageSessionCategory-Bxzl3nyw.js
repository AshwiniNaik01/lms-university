import{j as e,r as N,f as W,G as O,b as q,a as E,L as I,c as P,d as S,al as L,am as V,S as j,an as U,a5 as k,I as l,D as C,T as D,g as w,ao as M,p as T,ap as $,aq as z,ar as H,as as G,at as K,au as Q,av as Y,aw as J,ax as X,ay as Z}from"./index-BlaCQYdb.js";import{F as B}from"./FileInput-D8QhQwhz.js";import{T as F}from"./ToggleSwitch-gbKbv7D8.js";import{R as ee}from"./RadioButtonGroup-Dg51B77y.js";const A=({formik:o})=>e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Start Date*"}),e.jsx("input",{type:"date",name:"startDate",value:o.values.startDate,onChange:o.handleChange,onBlur:o.handleBlur,required:!0,className:"w-full mt-1 border border-blue-300 rounded-lg p-2 focus:ring-2 focus:ring-blue-400 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"End Date*"}),e.jsx("input",{type:"date",name:"endDate",value:o.values.endDate,onChange:o.handleChange,onBlur:o.handleBlur,required:!0,className:"w-full mt-1 border border-blue-300 rounded-lg p-2 focus:ring-2 focus:ring-blue-400 focus:outline-none"})]})]})}),te=({name:o,formik:u,label:y})=>{if(!u)return console.error("Formik prop is missing in MultiImageUpload!"),null;const h=u.values[o]||[],p=N.useMemo(()=>!h||h.length===0?[]:h.map(a=>a instanceof File?{url:URL.createObjectURL(a),name:a.name}:typeof a=="string"?{url:a,name:a.split("/").pop()}:{url:"",name:"Unknown"}),[h]),i=a=>{const r=Array.from(a.target.files);u.setFieldValue(o,[...h,...r])},m=a=>{const r=h.filter((x,c)=>c!==a);u.setFieldValue(o,r)};return e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:y}),e.jsxs("div",{className:"relative w-full mb-4",children:[e.jsx("input",{type:"file",multiple:!0,accept:"image/*",id:o,name:o,onChange:i,className:"absolute inset-0 opacity-0 cursor-pointer z-20"}),e.jsxs("div",{className:"flex items-center justify-between border-2 border-dashed border-gray-300 bg-white px-4 py-3 rounded-lg shadow-sm hover:border-blue-400 transition-all duration-300 z-10",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(W,{className:"text-blue-600"}),e.jsx("span",{className:"text-gray-700 font-medium",children:"Upload one or multiple images"})]}),e.jsx("span",{className:"text-sm text-gray-500 hidden md:block",children:"Max: 5MB each"})]})]}),p.length>0&&e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:p.map((a,r)=>e.jsxs("div",{className:"relative border rounded-lg overflow-hidden shadow-sm",children:[e.jsx("img",{src:a.url,alt:`preview-${r}`,className:"w-full h-32 object-cover"}),e.jsx("button",{type:"button",onClick:()=>m(r),className:"absolute top-2 right-2 bg-red-600 text-white p-1 rounded-full shadow hover:bg-red-700",children:e.jsx(O,{size:14})})]},r))}),u.touched[o]&&u.errors[o]&&e.jsx("div",{className:"text-red-500 text-sm font-medium mt-2",children:u.errors[o]})]})},_=({formik:o})=>e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Start Time*"}),e.jsx("input",{type:"time",name:"startTime",value:o.values.startTime,onChange:o.handleChange,onBlur:o.handleBlur,required:!0,className:"w-full mt-1 border border-blue-300 rounded-lg p-2 focus:ring-2 focus:ring-blue-400 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"End Time*"}),e.jsx("input",{type:"time",name:"endTime",value:o.values.endTime,onChange:o.handleChange,onBlur:o.handleBlur,required:!0,className:"w-full mt-1 border border-blue-300 rounded-lg p-2 focus:ring-2 focus:ring-blue-400 focus:outline-none"})]})]})}),se=()=>{const{id:o}=q(),u=E(),{search:y}=I(),h=new URLSearchParams(y),p=h.get("type"),i=h.get("id"),[m,a]=N.useState(!1),[r,x]=N.useState({title:"",description:"",category:o||"",startDate:"",endDate:"",startTime:"",endTime:"",duration:"",location:"",mode:"Offline",meetingLink:"",organizer:"",speakers:[""],bannerImage:null,gallery:[],registrationLink:null,isFree:!0,price:0,fees:{amount:"",currency:"INR",refundPolicy:""},tags:[""],priority:"",maxParticipants:"",agenda:[{time:"",activity:""}],resources:[],sponsors:[""],certificateAvailable:!1,feedbackFormLink:"",topics:[""],capacity:"",socialLinks:{facebook:"",instagram:"",twitter:"",linkedin:""},isActive:!0});N.useEffect(()=>{(async()=>{if(p==="edit"&&i){a(!0);try{const t=(await M(i))?.data?.data;if(!t){j.fire("Warning","Event not found","warning");return}x({...r,...t,category:t.category?._id||"",startDate:t.startDate?t.startDate.split("T")[0]:"",endDate:t.endDate?t.endDate.split("T")[0]:"",bannerImage:t.bannerImage?`${T.EVENT_BANNER}${t.bannerImage}`:null,gallery:Array.isArray(t.gallery)?t.gallery.map(g=>`${T.EVENT_GALLERY_IMAGE}${g}`):[],tags:t.tags||[""],priority:t.priority||"",resources:t.resources||[],speakers:t.speakers||[""],sponsors:t.sponsors||[""],topics:t.topics||[""],capacity:t.capacity||"",duration:t.duration||"",fees:t.fees||{amount:"",currency:"INR",refundPolicy:""},socialLinks:{facebook:t.socialLinks?.facebook||"",instagram:t.socialLinks?.instagram||"",twitter:t.socialLinks?.twitter||"",linkedin:t.socialLinks?.linkedin||""},certificateAvailable:t.certificateAvailable??!1})}catch(d){console.error(d),j.fire("Error",k(d)||"Failed to load event data","error")}finally{a(!1)}}})()},[p,i]);const c=P({title:S().required("Title is required")}),s=L({initialValues:r,validationSchema:c,enableReinitialize:!0,onSubmit:async b=>{a(!0);try{const d=new FormData;Object.entries(b).forEach(([t,g])=>{t==="bannerImage"||t==="gallery"||(t==="agenda"?g.forEach((f,v)=>{d.append(`agenda[${v}][time]`,f.time),d.append(`agenda[${v}][activity]`,f.activity)}):Array.isArray(g)?g.forEach(f=>{f!=null&&f!==""&&d.append(`${t}[]`,f)}):typeof g=="object"&&g!==null?Object.entries(g).forEach(([f,v])=>{v!=null&&d.append(`${t}[${f}]`,v)}):d.append(t,g))}),b.bannerImage instanceof File&&d.append("bannerImage",b.bannerImage),Array.isArray(b.gallery)&&b.gallery.forEach(t=>{t instanceof File?d.append("gallery",t):typeof t=="string"&&d.append("gallery",t.split("/").pop())}),p==="edit"&&i?(await V(i,d),j.fire("Success","Event updated successfully","success").then(()=>{u("/book-session")})):(await U(d),j.fire("Success","Event created successfully","success").then(()=>{s.resetForm(),u("/book-session")}))}catch(d){console.error(d),j.fire("Error",k(d)||"Failed to submit event","error")}finally{a(!1)}}}),n=[{_id:"Online",title:"Online"},{_id:"Offline",title:"Offline"},{_id:"Hybrid",title:"Hybrid"}];return e.jsxs("form",{onSubmit:s.handleSubmit,className:"space-y-10 p-8 max-w-6xl mx-auto bg-white shadow-xl rounded-xl border-3 border-blue-700 border-opacity-80",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 border-b border-gray-200 pb-4 mb-4 text-start",children:p==="edit"?"Edit Event":"Create Event"}),e.jsxs("section",{className:"space-y-4 bg-blue-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 border-b border-gray-200 pb-2",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(l,{label:"Title",name:"title",formik:s}),e.jsx(l,{label:"City",name:"location",formik:s}),e.jsx(C,{label:"Project Mode",name:"mode",options:n,formik:s}),["Online","Hybrid"].includes(s.values.mode)&&e.jsx(l,{label:"Meeting Link",name:"meetingLink",formik:s})]}),e.jsx(D,{label:"Description",name:"description",formik:s,rows:4,className:"md:col-span-2"})]}),e.jsxs("section",{className:"space-y-4 ",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 border-b border-gray-200 pb-2",children:"Date & Time"}),e.jsx(A,{formik:s}),e.jsx(_,{formik:s})]}),e.jsxs("section",{className:"space-y-4 bg-blue-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 border-b border-gray-200 pb-2",children:"Organizers & Speakers"}),e.jsx(l,{label:"Organizer",name:"organizer",formik:s}),e.jsx(w,{label:"Speakers",name:"speakers",formik:s})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 border-b border-gray-200 pb-2",children:"Pricing & Participants"}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsx(l,{label:"Max Participants",name:"maxParticipants",type:"number",formik:s}),e.jsx(F,{label:"Is Free Event",name:"isFree",checked:s.values.isFree,onChange:b=>s.setFieldValue("isFree",b.target.checked)}),!s.values.isFree&&e.jsx(l,{label:"Price",name:"price",type:"number",formik:s})]})]}),e.jsxs("section",{className:"space-y-4 bg-blue-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 border-b border-gray-200 pb-2",children:"Agenda"}),s.values.agenda.map((b,d)=>e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-center mb-2",children:[e.jsx("input",{type:"time",value:b.time,onChange:t=>{const g=[...s.values.agenda];g[d].time=t.target.value,s.setFieldValue("agenda",g)},onKeyDown:t=>{if(t.key==="Enter"){t.preventDefault();const g=[...s.values.agenda,{time:"",activity:""}];s.setFieldValue("agenda",g)}},className:"border border-blue-500 p-2 rounded-lg w-full bg-white",required:!0}),e.jsx("input",{type:"text",value:b.activity,onChange:t=>{const g=[...s.values.agenda];g[d].activity=t.target.value,s.setFieldValue("agenda",g)},onKeyDown:t=>{if(t.key==="Enter"){t.preventDefault();const g=[...s.values.agenda,{time:"",activity:""}];s.setFieldValue("agenda",g)}},placeholder:`Activity ${d+1}`,className:"border border-blue-500 p-2 rounded-lg w-full bg-white",required:!0}),e.jsxs("div",{className:"flex gap-2",children:[s.values.agenda.length>1&&e.jsx("button",{type:"button",onClick:()=>{const t=s.values.agenda.filter((g,f)=>f!==d);s.setFieldValue("agenda",t)},className:"bg-red-500 text-white px-2 rounded",children:"‚úï"}),d===s.values.agenda.length-1&&e.jsx("button",{type:"button",onClick:()=>s.setFieldValue("agenda",[...s.values.agenda,{time:"",activity:""}]),className:"bg-blue-500 text-white px-4 rounded",children:"+"})]})]},d))]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 border-b border-gray-200 pb-2",children:"Additional Info"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(B,{label:"Banner Image",name:"bannerImage",formik:s}),e.jsx(w,{label:"Tags",name:"tags",formik:s}),e.jsx(l,{label:"Priority",name:"priority",formik:s}),e.jsx(w,{label:"Resources",name:"resources",formik:s}),e.jsx(te,{label:"Gallery",name:"gallery",formik:s}),e.jsx(w,{label:"Sponsors",name:"sponsors",formik:s}),e.jsx(l,{label:"Feedback Form Link",name:"feedbackFormLink",formik:s}),e.jsx(l,{label:"Registration Link",name:"registrationLink",formik:s}),e.jsx(F,{label:"Certificate Available",name:"certificateAvailable",checked:s.values.certificateAvailable,onChange:b=>s.setFieldValue("certificateAvailable",b.target.checked)})]})]}),e.jsxs("section",{className:"space-y-4 bg-blue-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 border-b border-gray-200 pb-2",children:"Social Media Links"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(l,{label:"Facebook",name:"socialLinks.facebook",formik:s}),e.jsx(l,{label:"Instagram",name:"socialLinks.instagram",formik:s}),e.jsx(l,{label:"Twitter",name:"socialLinks.twitter",formik:s}),e.jsx(l,{label:"LinkedIn",name:"socialLinks.linkedin",formik:s})]})]}),e.jsxs("div",{className:"flex justify-end pt-4 gap-4",children:[e.jsx("button",{type:"button",onClick:()=>u(-1),className:"px-8 py-4 bg-gray-400 hover:bg-gray-500 text-white font-semibold rounded-xl shadow-lg transition duration-300",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:s.isSubmitting||m,className:"px-8 py-4 bg-green-600 hover:bg-green-700 text-white font-semibold rounded-xl shadow-lg transition disabled:opacity-50 disabled:cursor-not-allowed",children:p==="edit"?m?"Updating...":"Update Event":m?"Creating...":"Create Event"})]})]})},ae=()=>{const o=E(),u=I(),y=new URLSearchParams(u.search),h=y.get("id"),p=y.get("type")==="edit",i=L({initialValues:{title:"",description:"",startDate:"",endDate:"",duration:"",mode:"",location:"",topics:[""],capacity:"",fees:{amount:"",refundPolicy:""},certification:!1,status:"",isFree:!1},validationSchema:P({title:S().required("Title is required"),duration:S().required("Duration is required")}),onSubmit:async(m,{resetForm:a,setSubmitting:r})=>{try{const x={...m,capacity:Number(m.capacity),fees:m.isFree?{amount:0,refundPolicy:"No Refund"}:{...m.fees,amount:Number(m.fees.amount)},topics:m.topics.filter(c=>c.trim()!=="")};p&&h?(await $(h,x),await j.fire({icon:"success",title:"Internship session updated successfully!",confirmButtonColor:"#2563eb"})):(await z(x),await j.fire({icon:"success",title:"Internship session created successfully!",confirmButtonColor:"#2563eb"}),a()),o("/book-session")}catch(x){console.error("‚ùå Error submitting internship session:",x),j.fire({icon:"error",title:k(x)||"Submission Failed",confirmButtonColor:"#dc2626"})}finally{r(!1)}}});return N.useEffect(()=>{(async()=>{if(!(!p||!h))try{const a=await H(h);a&&i.setValues({title:a.title||"",description:a.description||"",startDate:a.startDate?.split("T")[0]||"",endDate:a.endDate?.split("T")[0]||"",duration:a.duration||"",mode:a.mode||"",location:a.location||"",topics:Array.isArray(a.topics)?a.topics:[""],capacity:a.capacity?.toString()||"",fees:{amount:a.fees?.amount?.toString()||"",refundPolicy:a.fees?.refundPolicy||""},certification:a.certification??!1,status:a.status||"",isFree:a.isFree??!1})}catch(a){console.error("‚ùå Failed to fetch internship session:",a),j.fire({icon:"error",title:k(a)||"Fetch Error",text:"Unable to load session details."})}})()},[p,h]),e.jsxs("form",{onSubmit:i.handleSubmit,className:"space-y-10 p-8 max-w-6xl mx-auto bg-white shadow-xl rounded-xl border-3 border-blue-700 border-opacity-80",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 border-b border-gray-200 pb-4 mb-4 text-start",children:p?"Edit Internship Session":"Create Internship Session"}),e.jsxs("section",{className:"space-y-4 bg-blue-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 border-b border-gray-200 pb-2",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(l,{label:"Title",name:"title",formik:i}),e.jsx(l,{label:"Duration (in months)",name:"duration",type:"number",formik:i}),e.jsx(l,{label:"City",name:"location",formik:i}),e.jsx(l,{label:"Capacity",name:"capacity",type:"number",formik:i})]})]}),e.jsxs("section",{className:"space-y-4 bg-blue-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 border-b border-gray-200 pb-2",children:"Fees & Payment"}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsx(F,{label:"Is Free?",name:"isFree",checked:i.values.isFree,onChange:()=>{const m=!i.values.isFree;i.setFieldValue("isFree",m),m&&(i.setFieldValue("fees.amount",0),i.setFieldValue("fees.refundPolicy","No Refund"))}})}),!i.values.isFree&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-4",children:[e.jsx(l,{label:"Amount (‚Çπ)",name:"fees.amount",type:"number",formik:i}),e.jsx(C,{label:"Refund Policy",name:"fees.refundPolicy",formik:i,options:[{_id:"no_refund",title:"No Refund"},{_id:"7_days",title:"7 Days"},{_id:"15_days",title:"15 Days"},{_id:"1_month",title:"1 Month"}]})]})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 border-b border-gray-200 pb-2",children:"Session Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(C,{label:"Mode",name:"mode",formik:i,options:[{_id:"Online",title:"Online"},{_id:"Offline",title:"Offline"},{_id:"Hybrid",title:"Hybrid"}]}),e.jsx(A,{formik:i})]}),e.jsx(D,{label:"Description",name:"description",formik:i}),e.jsx(w,{label:"Topics",name:"topics",formik:i})]}),e.jsxs("section",{className:"space-y-4 bg-blue-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 border-b border-gray-200 pb-2",children:"Additional Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(C,{label:"Status",name:"status",formik:i,options:[{_id:"Upcoming",title:"Upcoming"},{_id:"Ongoing",title:"Ongoing"},{_id:"Past",title:"Past"}]}),e.jsx(F,{label:"Certification Available",name:"certification",checked:i.values.certification,onChange:()=>i.setFieldValue("certification",!i.values.certification)})]})]}),e.jsxs("div",{className:"flex justify-end pt-4 border-t border-gray-200 gap-4",children:[e.jsx("button",{type:"button",onClick:()=>o(-1),className:"px-8 py-4 bg-gray-400 hover:bg-gray-500 text-white font-semibold rounded-xl shadow-lg transition duration-300",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:i.isSubmitting,className:"px-8 py-4 bg-green-600 hover:bg-green-700 text-white font-semibold rounded-xl shadow-lg transition duration-300 disabled:opacity-50",children:i.isSubmitting?p?"Updating...":"Creating...":p?"Update Internship Session":"Create Internship Session"})]})]})},re=()=>{const{id:o}=q(),{search:u}=I(),y=E(),h=new URLSearchParams(u),p=h.get("type"),i=h.get("id"),[m,a]=N.useState(!1),r={title:"",description:"",date:"",startTime:"",endTime:"",speakerName:"",speakerBio:"",speakerPhoto:null,platform:"",meetingLink:"",meetingId:"",passcode:"",registrationRequired:!0,maxParticipants:"",tags:[""],status:"Upcoming"},[x,c]=N.useState(r);N.useEffect(()=>{(async()=>{if(!(p!=="edit"||!i)){a(!0);try{const t=(await Q(i)).data?.data;if(!t){j.fire("Error","Webinar not found","error");return}c({...r,...t,date:t.date?t.date.split("T")[0]:"",speakerPhoto:t.speakerPhoto?`${T.WEBINAR_SPEAKER_PHOTO}${t.speakerPhoto}`:null,tags:Array.isArray(t.tags)&&t.tags.length>0?t.tags:[""]})}catch(d){console.error("‚ùå Error fetching webinar:",d),j.fire("Error",k(d)||"Failed to load webinar data","error")}finally{a(!1)}}})()},[p,i]);const s=P({title:S().required("Title is required")}),n=L({initialValues:x,enableReinitialize:!0,validationSchema:s,onSubmit:async(b,{resetForm:d,setSubmitting:t})=>{t(!0);try{const g=new FormData;Object.entries(b).forEach(([f,v])=>{f==="speakerPhoto"||f==="tags"||v!=null&&v!==""&&g.append(f,v)}),Array.isArray(b.tags)&&b.tags.filter(f=>f.trim()!=="").forEach(f=>g.append("tags[]",f)),b.speakerPhoto instanceof File&&g.append("speakerPhoto",b.speakerPhoto),p==="edit"&&i?(await G(i,g),j.fire({title:"Success",text:"Webinar updated successfully!",icon:"success",confirmButtonText:"OK"}).then(()=>y("/book-session"))):(await K(g),j.fire({title:"Success",text:"Webinar created successfully!",icon:"success",confirmButtonText:"OK"}).then(()=>{d(),y("/book-session")}))}catch(g){console.error("‚ùå Error submitting webinar:",g),j.fire("Error",k(g)||"Failed to submit webinar","error")}finally{t(!1)}}});return e.jsxs("form",{onSubmit:n.handleSubmit,className:"space-y-10 p-8 max-w-6xl mx-auto bg-white shadow-xl rounded-xl border-3 border-blue-700 border-opacity-80",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 border-b border-gray-200 pb-4 mb-4 text-start",children:p==="edit"?"Edit Webinar":"Create Webinar"}),e.jsxs("section",{className:"space-y-4 bg-blue-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 border-b border-gray-200 pb-2",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(l,{label:"Title *",name:"title",formik:n}),e.jsx(l,{label:"Platform *",name:"platform",formik:n})]}),e.jsx(D,{label:"Description",name:"description",formik:n})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 border-b border-gray-200 pb-2",children:"Date & Time"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Date *"}),e.jsx("input",{type:"date",name:"date",value:n.values.date,onChange:n.handleChange,onBlur:n.handleBlur,className:"w-full mt-1 border border-gray-300 rounded-md p-2 focus:ring-2 focus:ring-blue-400 focus:border-blue-400"}),n.touched.date&&n.errors.date&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:n.errors.date})]}),e.jsx(_,{formik:n})]})]}),e.jsxs("section",{className:"space-y-4 bg-blue-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 border-b border-gray-200 pb-2",children:"Meeting Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(l,{label:"Meeting Link *",name:"meetingLink",formik:n,type:"url"}),e.jsx(l,{label:"Meeting ID",name:"meetingId",formik:n}),e.jsx(l,{label:"Passcode",name:"passcode",formik:n})]})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 border-b border-gray-200 pb-2",children:"Speaker Information"}),e.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[e.jsx(l,{label:"Speaker Name *",name:"speakerName",formik:n}),e.jsx(D,{label:"Speaker Bio",name:"speakerBio",formik:n}),e.jsx(B,{label:"Speaker Photo",name:"speakerPhoto",formik:n})]})]}),e.jsxs("section",{className:"space-y-4 bg-blue-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 border-b border-gray-200 pb-2",children:"Registration & Tags"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(l,{label:"Max Participants",name:"maxParticipants",type:"number",formik:n}),e.jsx(w,{label:"Tags",name:"tags",formik:n})]}),e.jsx(F,{label:"Registration Required",name:"registrationRequired",checked:n.values.registrationRequired,onChange:()=>n.setFieldValue("registrationRequired",!n.values.registrationRequired)})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 border-b border-gray-200 pb-2",children:"Status"}),e.jsx(C,{label:"Webinar Status",name:"status",formik:n,options:[{_id:"Upcoming",title:"Upcoming"},{_id:"Ongoing",title:"Ongoing"},{_id:"Completed",title:"Completed"}]})]}),e.jsxs("div",{className:"flex justify-end pt-4 gap-4",children:[e.jsx("button",{type:"button",onClick:()=>y(-1),className:"px-8 py-4 bg-gray-400 hover:bg-gray-500 text-white font-semibold rounded-xl shadow-lg transition duration-300",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:n.isSubmitting||m,className:"px-8 py-4 bg-green-600 hover:bg-green-700 text-white font-semibold rounded-xl shadow-lg transition duration-300 disabled:opacity-50 disabled:cursor-not-allowed",children:p==="edit"?m?"Updating...":"Update Webinar":m?"Creating...":"Create Webinar"})]})]})},ie=()=>new URLSearchParams(I().search),R=o=>o?new Date(o).toISOString().split("T")[0]:"",ne=()=>{const u=ie().get("id"),y=E(),[h,p]=N.useState(null),[i,m]=N.useState(!!u);N.useEffect(()=>{if(!u)return;(async()=>{m(!0);try{const c=await X(u);if(c){const s={...c,prerequisites:c.prerequisites?.length?c.prerequisites:[""],topics:c.topics?.length?c.topics:[""],instructors:c.instructors?.length>0?c.instructors.map(n=>n):[""],contact:{email:c.contact?.email??"",phone:c.contact?.phone??""},startDate:R(c.startDate),endDate:R(c.endDate),certification:c.certification??!1,status:c.status??"Past"};p(s)}}catch(c){console.error("Failed to fetch workshop:",c),j.fire("Error",k(c)||"Failed to load workshop details","error")}finally{m(!1)}})()},[u]);const a=P({title:S().required("Title is required"),description:S().required("Description is required")}),r=L({enableReinitialize:!0,initialValues:h||{title:"",description:"",startDate:"",endDate:"",duration:"",location:"",prerequisites:[""],topics:[""],instructors:[""],registrationLink:"",fees:"",certification:!1,contact:{email:"",phone:""},status:"Past",isFree:!1},validationSchema:a,onSubmit:async(x,{setSubmitting:c,resetForm:s})=>{try{const n={...x,fees:Number(x.fees),prerequisites:x.prerequisites.filter(b=>b.trim()!==""),topics:x.topics.filter(b=>b.trim()!==""),instructors:x.instructors.filter(b=>b.trim()!=="")};u?(await Y(u,n),await j.fire("Success","Workshop updated successfully!","success")):(await J(n),await j.fire("Success","Workshop created successfully!","success"),s()),y("/book-session")}catch(n){console.error("Error during submission:",n),j.fire("Error",k(n)||"Failed to submit workshop.","error")}finally{c(!1)}}});return i?e.jsx("div",{className:"flex justify-center items-center h-40 text-gray-500 font-semibold",children:"Loading workshop data..."}):e.jsxs("form",{onSubmit:r.handleSubmit,className:"space-y-10 p-8 max-w-6xl mx-auto bg-white shadow-xl rounded-xl border-3 border-blue-700 border-opacity-80",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 border-b border-gray-200 pb-4 mb-4",children:u?"Edit Workshop":"Create Workshop"}),e.jsxs("section",{className:"space-y-4 bg-blue-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 border-b border-gray-200 pb-2",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(l,{label:"Title",name:"title",formik:r}),e.jsx(l,{label:"Duration (in min)",name:"duration",type:"number",formik:r}),e.jsx(l,{label:"City",name:"location",formik:r}),e.jsx(l,{label:"Registration Link",name:"registrationLink",formik:r}),e.jsxs("section",{className:"space-y-4 bg-blue-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 border-b border-gray-200 pb-2",children:"Pricing"}),e.jsx(F,{label:"Is this workshop free?",name:"isFree",checked:r.values.isFree,onChange:()=>{const x=!r.values.isFree;r.setFieldValue("isFree",x),x&&r.setFieldValue("fees",0)}}),!r.values.isFree&&e.jsx(l,{label:"Fees",name:"fees",type:"number",formik:r})]})]}),e.jsx(D,{label:"Description",name:"description",formik:r})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 border-b border-gray-200 pb-2",children:"Schedule"}),e.jsx(A,{formik:r})]}),e.jsxs("section",{className:"space-y-4 bg-blue-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 border-b border-gray-200 pb-2",children:"Workshop Content"}),e.jsx(w,{label:"Prerequisites",name:"prerequisites",formik:r}),e.jsx(w,{label:"Topics",name:"topics",formik:r})]}),e.jsxs("section",{className:"space-y-4 bg-blue-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 border-b border-gray-200 pb-2",children:"Instructors"}),e.jsx(w,{label:"Instructor Name",name:"instructors",formik:r})]}),e.jsxs("section",{className:"space-y-4 bg-blue-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 border-b border-gray-200 pb-2",children:"Certification"}),e.jsx(F,{label:"Does this workshop offer a certification?",name:"certification",checked:r.values.certification,onChange:()=>r.setFieldValue("certification",!r.values.certification)})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 border-b border-gray-200 pb-2",children:"Contact Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(l,{label:"Contact Email",name:"contact.email",formik:r}),e.jsx(l,{label:"Contact Phone",name:"contact.phone",formik:r})]})]}),e.jsxs("section",{className:"space-y-4 bg-blue-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 border-b border-gray-200 pb-2",children:"Workshop Status"}),e.jsx(ee,{label:"Select Workshop Status",name:"status",formik:r,options:[{label:"Past",value:"Past"},{label:"Upcoming",value:"Upcoming"},{label:"Ongoing",value:"Ongoing"}]})]}),e.jsxs("div",{className:"flex justify-end pt-4 border-t border-gray-200 gap-4",children:[e.jsx("button",{type:"button",onClick:()=>y(-1),className:"px-8 py-4 bg-gray-400 hover:bg-gray-500 text-white font-semibold rounded-xl shadow-lg transition duration-300",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:r.isSubmitting,className:"px-8 py-4 bg-green-600 hover:bg-green-700 text-white font-semibold rounded-xl shadow-lg transition duration-300 disabled:opacity-50",children:r.isSubmitting?u?"Updating...":"Creating...":u?"Update Workshop":"Create Workshop"})]})]})},oe={workshop:ne,"internship-session":ae,webinar:re,event:se},ge=()=>{const{slug:o,id:u}=q(),[y,h]=N.useState(null),[p,i]=N.useState(!0);if(N.useEffect(()=>{(async()=>{try{i(!0);const r=await Z();console.log("‚úÖ Available Categories:",r.map(c=>c._id)),console.log("üîç Searching for ID:",u);const x=r.find(c=>String(c._id)===String(u));x?console.log("‚úÖ Found Category:",x):console.warn("‚ùå No category found for the provided ID."),h(x||null)}catch(r){console.error("‚ùå Error fetching session categories:",r)}finally{i(!1)}})()},[u]),p)return e.jsx("p",{children:"Loading..."});if(!y)return e.jsx("p",{className:"text-red-500 text-center mt-8 font-medium",children:"Category not found."});const m=oe[y.slug.toLowerCase()];return console.log("Category slug:",y.slug),e.jsxs("div",{className:"relative min-h-screen flex flex-col items-center justify-start ",children:[e.jsx("div",{className:"relative z-10 w-full max-w-6xl p-2 md:p-4",children:m?e.jsx("div",{className:"w-full",children:e.jsx(m,{category:y})}):e.jsx("p",{className:"text-center text-red-500 font-medium text-lg",children:"No form available for this type."})}),e.jsx("div",{className:"absolute bottom-0 w-full h-32 bg-gradient-to-t from-blue-200 to-transparent -z-10"})]})};export{ge as default};
