import{r,a as m,a1 as i,j as t,bc as f,t as b,y as p,G as v}from"./index-BlaCQYdb.js";const w=({isOpen:a,onClose:l,onEdit:y})=>{const[c,n]=r.useState([]),[d,o]=r.useState(!1),x=m();r.useEffect(()=>{a&&h()},[a]);const h=async()=>{o(!0);try{const e=await i.get("/api/event");e.data.success&&n(e.data.data||[])}catch(e){console.error(e)}finally{o(!1)}},u=async e=>{if(!(typeof window>"u"||!window.confirm("Are you sure you want to delete this event?")))try{await i.delete(`/api/event/${e}`),n(c.filter(s=>s._id!==e))}catch(s){console.error(s),alert("Failed to delete event")}},g=[{header:"Title",accessor:"title"},{header:"Slug",accessor:"slug"},{header:"Category",accessor:e=>e.category?.name||"N/A"},{header:"Start Date",accessor:e=>e.startDate?new Date(e.startDate).toLocaleDateString():"N/A"},{header:"End Date",accessor:e=>e.endDate?new Date(e.endDate).toLocaleDateString():"N/A"},{header:"Mode",accessor:"mode"},{header:"Organizer",accessor:"organizer"},{header:"Max Participants",accessor:"maxParticipants"},{header:"Status",accessor:"status"},{header:"Actions",accessor:e=>t.jsxs("div",{className:"flex gap-3",children:[t.jsxs("button",{onClick:()=>x(`/session-category/${e.category?._id}/manage`),className:"px-3 py-1 bg-blue-500 text-white rounded-md hover:bg-blue-600 flex items-center gap-1",children:[t.jsx(p,{size:14})," Edit"]}),t.jsxs("button",{onClick:()=>u(e._id),className:"px-3 py-1 bg-red-500 text-white rounded-md hover:bg-red-600 flex items-center gap-1",children:[t.jsx(v,{size:14})," Delete"]})]})}];return a?t.jsx("div",{className:"fixed inset-0 z-50 flex items-start justify-center bg-black bg-opacity-50 p-4 overflow-y-auto",children:t.jsxs("div",{className:"bg-white rounded-xl w-full max-w-6xl shadow-lg p-6 relative",children:[t.jsx("button",{onClick:l,className:"absolute top-4 right-4 text-red-500 hover:text-red-700",children:t.jsx(f,{size:20})}),t.jsx("h2",{className:"text-2xl font-bold mb-4 text-center",children:"Events Table"}),d?t.jsx("p",{className:"text-center text-gray-500",children:"Loading events..."}):t.jsx(b,{columns:g,data:c,maxHeight:"500px"})]})}):null};export{w as default};
