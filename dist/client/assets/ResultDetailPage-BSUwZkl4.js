import{b as j,r as o,aX as w,a as R,j as e}from"./index-BlaCQYdb.js";import{t as v}from"./TestServices-iIG0093W.js";const D=()=>{const{resultId:i}=j(),{currentUser:f}=o.useContext(w),l=f?.token,p=R(),[t,m]=o.useState(null),[h,d]=o.useState(!0),[g,c]=o.useState("");o.useEffect(()=>{if(!l||!i){d(!1),c("Missing required information to fetch result details.");return}(async()=>{try{d(!0);const s=await v.getResultDetails(i,l);console.log("API se mila data (resultDetails):",s),m(s),c("")}catch(s){c(s.response?.data?.message||"Failed to fetch result details."),console.error("Result details laane mein error:",s)}finally{d(!1)}})()},[i,l]);const b=r=>{if(!t?.answers||t.answers.length===0)return null;const s=t.answers.find(n=>n.question&&n.question.toString()===r.toString());return s?s.selectedOption:null};return h?e.jsx("div",{className:"container",style:{padding:"2rem"},children:"Loading Result Details..."}):g?e.jsxs("div",{className:"container",style:{color:"red",padding:"2rem"},children:["Error: ",g]}):e.jsxs("div",{className:"result-detail-container",style:{padding:"20px",maxWidth:"900px",margin:"auto"},children:[e.jsx("button",{onClick:()=>p(-1),className:"button button-secondary",style:{marginBottom:"20px",display:"inline-block"},children:"← Go Back"}),e.jsxs("h2",{style:{textAlign:"center"},children:["Result for: ",t?.test?.title]}),e.jsx("div",{style:{textAlign:"center",fontSize:"1.2rem",marginBottom:"30px"},children:e.jsxs("strong",{children:["Your Score: ",t?.score," / ",t?.totalMarks]})}),(!t?.answers||t.answers.length===0)&&e.jsxs("div",{style:{padding:"20px",backgroundColor:"#fff3cd",color:"#856404",textAlign:"center",borderRadius:"8px",marginBottom:"20px",border:"1px solid #ffeeba"},children:[e.jsx("strong",{children:"Note:"})," Detailed answers are not available for this result."]}),t?.test?.questions.map((r,s)=>{const n=b(r._id),x=r.correctOption;return e.jsxs("div",{style:{marginBottom:"25px",border:"1px solid #f0f0f0",padding:"20px",borderRadius:"8px"},children:[e.jsx("h4",{style:{marginTop:0},children:`Q${s+1}: ${r.questionText}`}),r.options.map((y,a)=>{let u={};return t?.answers?.length>0&&(a===x&&(u={backgroundColor:"#d4edda",color:"#155724",fontWeight:"bold"}),a===n&&n!==x&&(u={backgroundColor:"#f8d7da",color:"#721c24"})),e.jsxs("div",{style:{padding:"10px",margin:"5px 0",borderRadius:"5px",...u},children:[y,t?.answers&&a===n&&e.jsx("span",{style:{fontWeight:"bold"},children:" ← Your Answer"})]},a)})]},r._id)})]})};export{D as default};
