import{b as A,r as i,j as e,N as g,O as F,P as u,Q as h,R as r,U as b,V as C,C as E,W as P,X as N,Y as c,Z as k,_ as y,$ as z,a0 as R,a1 as L,S as f}from"./index-BlaCQYdb.js";const _=()=>{const{id:j}=A(),[t,v]=i.useState(null),[w,p]=i.useState(!0),[n,D]=i.useState("overview"),x=s=>{const a={active:{color:"bg-green-100 text-green-800 border-green-200",icon:r},completed:{color:"bg-blue-100 text-blue-800 border-blue-200",icon:r},upcoming:{color:"bg-purple-100 text-purple-800 border-purple-200",icon:c},pending:{color:"bg-yellow-100 text-yellow-800 border-yellow-200",icon:c},inactive:{color:"bg-red-100 text-red-800 border-red-200",icon:y}},l=a[s?.toLowerCase()]||a.pending,m=l.icon;return e.jsxs("span",{className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium border ${l.color}`,children:[e.jsx(m,{size:14}),s]})},S=[{id:"overview",label:"Overview",icon:C},{id:"courses",label:E,icon:u},{id:"batches",label:"Batches",icon:h},{id:"attendance",label:"Attendance",icon:r},{id:"assignments",label:"Assignments",icon:b}];if(i.useEffect(()=>{(async()=>{try{p(!0);const a=await L.get(`/api/enrollments/${j}`);a.data.success?v(a.data.data):f.fire("Error",a.data.message,"error")}catch(a){console.error(a),f.fire("Error",a.response?.data?.message||"Failed to fetch enrollment","error")}finally{p(!1)}})()},[j]),w)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading enrollment details..."})]})});if(!t)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(g,{className:"text-gray-400 text-6xl mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"No Enrollment Found"}),e.jsx("p",{className:"text-gray-600",children:"The requested enrollment details could not be loaded."})]})});const d=t.attendance?.reduce((s,a)=>(a.studentAttendance?.find(m=>m.student===t.studentId)?.present&&s.present++,s.total++,s),{present:0,total:0})||{present:0,total:0},o=d.total>0?Math.round(d.present/d.total*100):0;return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50 p-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6 mb-6",children:e.jsx("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl flex items-center justify-center",children:e.jsx(g,{className:"text-white text-2xl"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-gray-900",children:t.fullName}),e.jsxs("p",{className:"text-gray-600 flex items-center gap-2 mt-1",children:[e.jsx(F,{size:16}),t.email]}),e.jsxs("p",{className:"text-gray-500 text-sm mt-1",children:["Enrolled on"," ",new Date(t.enrolledAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]})]})]})})}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-200 text-center",children:[e.jsx(u,{className:"text-blue-600 text-xl mx-auto mb-2"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.enrolledCourses.length}),e.jsx("p",{className:"text-sm text-gray-600",children:"Training"})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-200 text-center",children:[e.jsx(h,{className:"text-green-600 text-xl mx-auto mb-2"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.enrolledBatches.length}),e.jsx("p",{className:"text-sm text-gray-600",children:"Batches"})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-200 text-center",children:[e.jsx(r,{className:"text-purple-600 text-xl mx-auto mb-2"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[o,"%"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Attendance"})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-200 text-center",children:[e.jsx(b,{className:"text-orange-600 text-xl mx-auto mb-2"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.assignmentSubmissions.filter(s=>s.submitted).length}),e.jsx("p",{className:"text-sm text-gray-600",children:"Submitted"})]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-1 mb-6",children:e.jsx("div",{className:"flex overflow-x-auto",children:S.map(s=>{const a=s.icon,l=n===s.id;return e.jsxs("button",{onClick:()=>D(s.id),className:`flex items-center gap-2 px-4 py-3 rounded-lg font-medium whitespace-nowrap transition-all duration-200 ${l?"bg-blue-500 text-white shadow-md":"text-gray-600 hover:text-blue-600 hover:bg-blue-50"}`,children:[e.jsx(a,{size:18}),s.label]},s.id)})})}),e.jsxs("div",{className:"space-y-6",children:[n==="overview"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(g,{className:"text-blue-600"}),"Participate Information"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100",children:[e.jsx("span",{className:"text-gray-600",children:"Full Name"}),e.jsx("span",{className:"font-semibold text-gray-900",children:t.fullName})]}),e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100",children:[e.jsx("span",{className:"text-gray-600",children:"Email"}),e.jsx("span",{className:"font-semibold text-gray-900",children:t.email})]}),e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100",children:[e.jsx("span",{className:"text-gray-600",children:"Mobile"}),e.jsx("span",{className:"font-semibold text-gray-900",children:t.mobileNo})]}),e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100",children:[e.jsx("span",{className:"text-gray-600",children:"Password"}),e.jsx("span",{className:"font-semibold text-gray-900",children:t.password})]}),e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsx("span",{className:"text-gray-600",children:"Enrollment Date"}),e.jsx("span",{className:"font-semibold text-gray-900",children:new Date(t.enrolledAt).toLocaleDateString()})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(r,{className:"text-green-600"}),"Attendance Summary"]}),e.jsx("div",{className:"text-center mb-4",children:e.jsxs("div",{className:"relative inline-block",children:[e.jsx("div",{className:"w-32 h-32 rounded-full border-8 border-gray-200 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[o,"%"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Present"})]})}),e.jsx("div",{className:"absolute top-0 left-0 w-32 h-32 rounded-full border-8 border-green-500 border-t-8 border-r-8 border-b-8 border-l-8",style:{clipPath:"inset(0 0 0 50%)",transform:`rotate(${o*3.6}deg)`,transformOrigin:"center"}})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:d.present}),e.jsx("p",{className:"text-sm text-gray-600",children:"Present"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-400",children:d.total-d.present}),e.jsx("p",{className:"text-sm text-gray-600",children:"Absent"})]})]})]})]}),n==="courses"&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:t.enrolledCourses.map(s=>e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6 hover:shadow-xl transition-all duration-300",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:s.title}),e.jsxs("div",{className:"flex items-center gap-1 bg-yellow-50 px-2 py-1 rounded-full",children:[e.jsx(P,{className:"text-yellow-500",size:14}),e.jsx("span",{className:"text-sm font-semibold text-yellow-700",children:s.rating})]})]}),e.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:s.description}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Duration"}),e.jsx("span",{className:"font-semibold text-gray-900",children:s.duration})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Participates"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(N,{className:"text-gray-400",size:14}),e.jsx("span",{className:"font-semibold text-gray-900",children:s.enrolledCount})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"flex-1 bg-blue-50 text-blue-600 py-2 rounded-lg font-semibold hover:bg-blue-100 transition-colors text-sm",children:"View Details"}),e.jsx("button",{className:"flex-1 border border-gray-300 text-gray-700 py-2 rounded-lg font-semibold hover:bg-gray-50 transition-colors text-sm",children:"Resources"})]})]},s._id))}),n==="batches"&&e.jsx("div",{className:"grid grid-cols-1 gap-6",children:t.enrolledBatches.map(s=>e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:s.batchName}),x(s.status)]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(h,{className:"text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Schedule"}),e.jsx("p",{className:"font-semibold text-gray-900",children:s.days.join(", ")})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(c,{className:"text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Timing"}),e.jsxs("p",{className:"font-semibold text-gray-900",children:[s.time.start," - ",s.time.end]})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(k,{className:"text-purple-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Mode"}),e.jsx("p",{className:"font-semibold text-gray-900 capitalize",children:s.mode})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(N,{className:"text-orange-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Participates"}),e.jsx("p",{className:"font-semibold text-gray-900",children:s.studentCount})]})]})]}),s.additionalNotes&&e.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Notes: "}),s.additionalNotes]})})]},s._id))}),n==="attendance"&&e.jsx("div",{className:"space-y-6",children:t.attendance?.length===0?e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-12 text-center",children:[e.jsx(r,{className:"text-gray-300 text-6xl mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"No Attendance Records"}),e.jsx("p",{className:"text-gray-500",children:"Attendance records will appear here once classes begin."})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:t.attendance?.map(s=>{const a=s.studentAttendance?.find(l=>l.student===t.studentId);return e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:s.meeting?.title}),e.jsx("p",{className:"text-gray-600 text-sm",children:s.course?.title})]}),e.jsxs("div",{className:"text-right",children:[a?.present?e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800 border border-green-200",children:[e.jsx(r,{size:14}),"Present"]}):e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium bg-red-100 text-red-800 border border-red-200",children:[e.jsx(y,{size:14}),"Absent"]}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:new Date(s.markedAt).toLocaleDateString()})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(c,{className:"text-gray-400"}),e.jsxs("span",{children:["Duration: ",s.meeting?.duration," minutes"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{className:"text-gray-400"}),e.jsxs("span",{children:["Platform: ",s.meeting?.platform]})]})]}),s.meeting?.meetingDescription&&e.jsx("div",{className:"mt-3 p-3 bg-gray-50 rounded-lg",children:e.jsx("p",{className:"text-sm text-gray-700",children:s.meeting.meetingDescription})})]},s._id)})})}),n==="assignments"&&e.jsx("div",{className:"space-y-6",children:t.assignmentSubmissions.length===0?e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-12 text-center",children:[e.jsx(b,{className:"text-gray-300 text-6xl mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"No Assignments Yet"}),e.jsx("p",{className:"text-gray-500",children:"Assignments will appear here once they are assigned."})]}):t.assignmentSubmissions.map(s=>e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:s.title}),e.jsx("p",{className:"text-gray-600",children:s.description})]}),s.submitted?x(s.submitted.status):x("pending")]}),s.submitted?e.jsx("div",{className:"bg-green-50 rounded-xl p-4",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Submitted:"}),e.jsx("span",{className:"text-sm text-gray-600",children:new Date(s.submitted.submittedAt).toLocaleDateString()})]}),s.submitted.remarks&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Remarks:"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:s.submitted.remarks})]})]}),e.jsxs("a",{href:s.submitted.fileUrl,target:"_blank",rel:"noreferrer",className:"flex items-center gap-2 bg-white text-blue-600 px-4 py-2 rounded-lg border border-blue-200 hover:bg-blue-50 transition-colors font-semibold text-sm",children:[e.jsx(R,{size:16}),"Download"]})]})}):e.jsxs("div",{className:"bg-yellow-50 rounded-xl p-4 text-center",children:[e.jsx("p",{className:"text-yellow-700 font-medium",children:"Awaiting submission"}),e.jsxs("p",{className:"text-yellow-600 text-sm mt-1",children:["Due:"," ",s.dueDate?new Date(s.dueDate).toLocaleDateString():"Not specified"]})]})]},s._id))})]})]})})};export{_ as default};
