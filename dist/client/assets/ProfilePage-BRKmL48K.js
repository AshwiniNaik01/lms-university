import{u as P,r as t,j as e,bi as j,bj as C,bk as N}from"./index-BlaCQYdb.js";import{u as E}from"./profile-Ci_nQnci.js";const U=()=>{const{currentUser:i,updateUserContext:y}=P(),[r,m]=t.useState({firstName:"",lastName:"",email:""}),[o,u]=t.useState(""),[x,p]=t.useState(""),[c,n]=t.useState(!0),[f,d]=t.useState(""),[g,h]=t.useState("");t.useEffect(()=>{if(!i?.user)return;const a=i.user;m({firstName:a.firstName||"",lastName:a.lastName||"",email:a.email||""}),n(!1)},[i]);const b=a=>{m({...r,[a.target.name]:a.target.value})},w=a=>{const{name:l,value:s}=a.target;l==="newPassword"&&u(s),l==="confirmNewPassword"&&p(s)},v=async a=>{a.preventDefault(),console.log("handleSubmit triggered"),d(""),h(""),n(!0);const l={...r};if(o){if(o!==x){d("New passwords do not match."),n(!1);return}l.password=o}try{const s=await E(l);console.log("API response:",s),s.success?(h("Profile updated successfully!"),y(s.data),u(""),p("")):d(s.message||"Failed to update profile.")}catch(s){console.error(s.response||s),d(s.response?.data?.message||s.message||"Error updating profile.")}n(!1)};return c&&!r.email?e.jsx("p",{children:"Loading profile..."}):i?e.jsx("section",{className:"bg-gradient-to-r from-pink-200 via-blue-100 to-blue-100 py-5 max-h-fit",children:e.jsx("div",{className:"max-w-6xl mx-auto bg-white backdrop-blur-xl p-10 rounded-3xl shadow-2xl border border-[#53b8ec]/20",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-start",children:[e.jsxs("div",{className:"bg-gradient-to-tr from-blue-100 via-indigo-100 to-purple-100 rounded-2xl shadow-md p-8 border border-gray-200 flex flex-col justify-between h-full",children:[e.jsx("img",{src:"https://cdn-icons-png.flaticon.com/512/3135/3135715.png",alt:"Admin illustration",className:"w-48 h-48 object-contain mx-auto mb-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-[#485dac] text-center mb-2",children:"Welcome, Admin!"}),e.jsx("p",{className:"text-gray-600 text-center",children:"Keep your profile updated to ensure secure access and personalized experience across the platform."}),e.jsxs("ul",{className:"mt-6 text-sm text-gray-500 list-disc pl-5 space-y-1",children:[e.jsx("li",{children:"Secure your account with a strong password."}),e.jsx("li",{children:"Ensure your name is accurate for certifications."}),e.jsx("li",{children:"Email is fixed and used for login."})]})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-4xl font-extrabold text-[#485dac] mb-8 text-center lg:text-left",children:"Admin Profile"}),g&&e.jsx("p",{className:"text-green-600 text-center mb-4 animate-fade-in",children:g}),f&&e.jsx("p",{className:"text-red-600 text-center mb-4 animate-fade-in",children:f}),e.jsxs("form",{onSubmit:v,className:"space-y-10",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-[#485dac] font-medium mb-1",children:[e.jsx(j,{})," First Name"]}),e.jsx("input",{type:"text",name:"firstName",value:r.firstName,onChange:b,className:"w-full px-4 py-2 border border-[#53b8ec]/40 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#53b8ec] bg-white shadow-sm",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-[#485dac] font-medium mb-1",children:[e.jsx(j,{})," Last Name"]}),e.jsx("input",{type:"text",name:"lastName",value:r.lastName,onChange:b,className:"w-full px-4 py-2 border border-[#53b8ec]/40 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#53b8ec] bg-white shadow-sm",required:!0})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-[#485dac] font-medium mb-1",children:[e.jsx(C,{})," Email"]}),e.jsx("input",{type:"email",value:r.email,disabled:!0,className:"w-full px-4 py-2 bg-gray-100 text-gray-500 border border-gray-300 rounded-lg shadow-inner"})]})]}),e.jsxs("div",{className:"pt-8 border-t border-[#e9577c]/30",children:[e.jsxs("h4",{className:"text-xl font-semibold text-[#e9577c] mb-6",children:["Change Password"," ",e.jsx("span",{className:"text-sm text-gray-500",children:"(optional)"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-[#485dac] font-medium mb-1",children:[e.jsx(N,{})," New Password"]}),e.jsx("input",{type:"password",name:"newPassword",value:o,onChange:w,className:"w-full px-4 py-2 border border-[#e9577c]/40 rounded-lg focus:ring-2 focus:ring-[#e9577c] bg-white shadow-sm"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-[#485dac] font-medium mb-1",children:[e.jsx(N,{})," Confirm Password"]}),e.jsx("input",{type:"password",name:"confirmNewPassword",value:x,onChange:w,className:"w-full px-4 py-2 border border-[#e9577c]/40 rounded-lg focus:ring-2 focus:ring-[#e9577c] bg-white shadow-sm"})]})]})]}),e.jsx("button",{type:"submit",disabled:c,className:"w-full py-3 mt-6 text-white text-lg font-semibold rounded-lg shadow-lg transition-all duration-300 hover:scale-[1.01] hover:opacity-90 disabled:opacity-60 disabled:cursor-not-allowed",style:{backgroundImage:"linear-gradient(to right, #53B8EC, #485DAC, #E9577C)"},children:c?"Updating...":"Update Profile"})]})]})]})})}):e.jsx("p",{children:"Please log in to view your profile."})};export{U as default};
