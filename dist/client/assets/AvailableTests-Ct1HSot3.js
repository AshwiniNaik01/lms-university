import{r as n,b as x,aX as h,j as e,aJ as d}from"./index-BlaCQYdb.js";import{t as m}from"./TestServices-iIG0093W.js";const j=()=>{const[l,u]=n.useState([]),[g,r]=n.useState(!0),[c,i]=n.useState(""),{courseId:t}=x(),{currentUser:p}=n.useContext(h),a=p?.token;return n.useEffect(()=>{if(console.log("[Debug] AvailableTests Component Mounted."),console.log("[Debug] Course ID from URL:",t),console.log("[Debug] Token from AuthContext:",a?"Token Found":"Token NOT Found"),!a){console.log("[Debug] Token is missing. Setting error and stopping."),i("Please log in to see available tests."),r(!1);return}t?(async()=>{try{r(!0),console.log(`[Debug] Calling API: testService.getTests for courseId: ${t}`);const s=await m.getTests(t,a);console.log("[Debug] API Response Received:",s),u(s),i("")}catch(s){console.error("[Debug] ERROR fetching tests:",s.response||s.message||s),i(s.response?.data?.message||"Failed to fetch tests. Check browser console for details.")}finally{r(!1)}})():(console.log("[Debug] No courseId found in URL. Not fetching tests."),r(!1))},[t,a]),g?e.jsx("div",{className:"container",children:"Loading available tests..."}):c?e.jsxs("div",{className:"container",style:{color:"red"},children:["Error: ",c]}):e.jsxs("div",{className:"available-tests-container",style:{padding:"20px",maxWidth:"900px",margin:"auto"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e.jsx("h2",{children:"Available Tests"}),e.jsx(d,{to:`/course/${t}/study`,className:"button",children:"Back to Course"})]}),l.length===0?e.jsxs("div",{style:{textAlign:"center",marginTop:"50px",padding:"30px",border:"1px dashed #ccc",borderRadius:"8px"},children:[e.jsx("h3",{children:"No Tests Available"}),e.jsx("p",{children:"There are currently no tests available for this course. Please check back later."})]}):e.jsx("ul",{style:{listStyle:"none",padding:0},children:l.map(o=>e.jsxs("li",{style:{border:"1px solid #ccc",padding:"15px",marginBottom:"10px",borderRadius:"5px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{margin:"0 0 10px 0"},children:o.title}),e.jsxs("p",{style:{margin:0},children:["Duration: ",o.duration||"N/A"," minutes"]})]}),e.jsx(d,{to:`/test/${o._id}/attempt`,children:e.jsx("button",{className:"button button-primary",style:{padding:"10px 20px",cursor:"pointer"},children:"Start Test"})})]},o._id))})]})};export{j as default};
